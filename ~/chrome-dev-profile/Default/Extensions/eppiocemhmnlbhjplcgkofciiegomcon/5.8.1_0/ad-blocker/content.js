(()=>{var j={7452:j=>{var Z=function(j){"use strict";var Z,e=Object.prototype,u=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},M=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",m=i.toStringTag||"@@toStringTag";function w(j,Z,e){return Object.defineProperty(j,Z,{value:e,enumerable:!0,configurable:!0,writable:!0}),j[Z]}try{w({},"")}catch(j){w=function(j,Z,e){return j[Z]=e}}function _(j,Z,e,u){var i=Z&&Z.prototype instanceof g?Z:g,M=Object.create(i.prototype),o=new I(u||[]);return M._invoke=function(j,Z,e){var u=K;return function(i,M){if(u===$)throw new Error("Generator is already running");if(u===W){if("throw"===i)throw M;return Y()}for(e.method=i,e.arg=M;;){var o=e.delegate;if(o){var m=J(o,e);if(m){if(m===a)continue;return m}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(u===K)throw u=W,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);u=$;var w=x(j,Z,e);if("normal"===w.type){if(u=e.done?W:C,w.arg===a)continue;return{value:w.arg,done:e.done}}"throw"===w.type&&(u=W,e.method="throw",e.arg=w.arg)}}}(j,e,o),M}function x(j,Z,e){try{return{type:"normal",arg:j.call(Z,e)}}catch(j){return{type:"throw",arg:j}}}j.wrap=_;var K="suspendedStart",C="suspendedYield",$="executing",W="completed",a={};function g(){}function P(){}function l(){}var A={};w(A,M,(function(){return this}));var y=Object.getPrototypeOf,V=y&&y(y(G([])));V&&V!==e&&u.call(V,M)&&(A=V);var T=l.prototype=g.prototype=Object.create(A);function b(j){["next","throw","return"].forEach((function(Z){w(j,Z,(function(j){return this._invoke(Z,j)}))}))}function p(j,Z){function e(i,M,o,m){var w=x(j[i],j,M);if("throw"!==w.type){var _=w.arg,K=_.value;return K&&"object"==typeof K&&u.call(K,"__await")?Z.resolve(K.__await).then((function(j){e("next",j,o,m)}),(function(j){e("throw",j,o,m)})):Z.resolve(K).then((function(j){_.value=j,o(_)}),(function(j){return e("throw",j,o,m)}))}m(w.arg)}var i;this._invoke=function(j,u){function M(){return new Z((function(Z,i){e(j,u,Z,i)}))}return i=i?i.then(M,M):M()}}function J(j,e){var u=j.iterator[e.method];if(u===Z){if(e.delegate=null,"throw"===e.method){if(j.iterator.return&&(e.method="return",e.arg=Z,J(j,e),"throw"===e.method))return a;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return a}var i=x(u,j.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,a;var M=i.arg;return M?M.done?(e[j.resultName]=M.value,e.next=j.nextLoc,"return"!==e.method&&(e.method="next",e.arg=Z),e.delegate=null,a):M:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,a)}function E(j){var Z={tryLoc:j[0]};1 in j&&(Z.catchLoc=j[1]),2 in j&&(Z.finallyLoc=j[2],Z.afterLoc=j[3]),this.tryEntries.push(Z)}function z(j){var Z=j.completion||{};Z.type="normal",delete Z.arg,j.completion=Z}function I(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(E,this),this.reset(!0)}function G(j){if(j){var e=j[M];if(e)return e.call(j);if("function"==typeof j.next)return j;if(!isNaN(j.length)){var i=-1,o=function e(){for(;++i<j.length;)if(u.call(j,i))return e.value=j[i],e.done=!1,e;return e.value=Z,e.done=!0,e};return o.next=o}}return{next:Y}}function Y(){return{value:Z,done:!0}}return P.prototype=l,w(T,"constructor",l),w(l,"constructor",P),P.displayName=w(l,m,"GeneratorFunction"),j.isGeneratorFunction=function(j){var Z="function"==typeof j&&j.constructor;return!!Z&&(Z===P||"GeneratorFunction"===(Z.displayName||Z.name))},j.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,l):(j.__proto__=l,w(j,m,"GeneratorFunction")),j.prototype=Object.create(T),j},j.awrap=function(j){return{__await:j}},b(p.prototype),w(p.prototype,o,(function(){return this})),j.AsyncIterator=p,j.async=function(Z,e,u,i,M){void 0===M&&(M=Promise);var o=new p(_(Z,e,u,i),M);return j.isGeneratorFunction(e)?o:o.next().then((function(j){return j.done?j.value:o.next()}))},b(T),w(T,m,"Generator"),w(T,M,(function(){return this})),w(T,"toString",(function(){return"[object Generator]"})),j.keys=function(j){var Z=[];for(var e in j)Z.push(e);return Z.reverse(),function e(){for(;Z.length;){var u=Z.pop();if(u in j)return e.value=u,e.done=!1,e}return e.done=!0,e}},j.values=G,I.prototype={constructor:I,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=Z,this.done=!1,this.delegate=null,this.method="next",this.arg=Z,this.tryEntries.forEach(z),!j)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=Z)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if("throw"===j.type)throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var e=this;function i(u,i){return m.type="throw",m.arg=j,e.next=u,i&&(e.method="next",e.arg=Z),!!i}for(var M=this.tryEntries.length-1;M>=0;--M){var o=this.tryEntries[M],m=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var w=u.call(o,"catchLoc"),_=u.call(o,"finallyLoc");if(w&&_){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(w){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(j,Z){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var M=i;break}}M&&("break"===j||"continue"===j)&&M.tryLoc<=Z&&Z<=M.finallyLoc&&(M=null);var o=M?M.completion:{};return o.type=j,o.arg=Z,M?(this.method="next",this.next=M.finallyLoc,a):this.complete(o)},complete:function(j,Z){if("throw"===j.type)throw j.arg;return"break"===j.type||"continue"===j.type?this.next=j.arg:"return"===j.type?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):"normal"===j.type&&Z&&(this.next=Z),a},finish:function(j){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var e=this.tryEntries[Z];if(e.finallyLoc===j)return this.complete(e.completion,e.afterLoc),z(e),a}},catch:function(j){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var e=this.tryEntries[Z];if(e.tryLoc===j){var u=e.completion;if("throw"===u.type){var i=u.arg;z(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(j,e,u){return this.delegate={iterator:G(j),resultName:e,nextLoc:u},"next"===this.method&&(this.arg=Z),a}},j}(j.exports);try{regeneratorRuntime=Z}catch(j){"object"==typeof globalThis?globalThis.regeneratorRuntime=Z:Function("r","regeneratorRuntime = r")(Z)}},8384:j=>{j.exports=class{static get X(){return"2.0.26"}static get M(){return 1}static get o(){return 5}static get m(){return 5}static get H(){return"https://authentication.urban-vpn.com"}static get u(){return"https://analytics-toolbar.urban-vpn.com"}static get _(){return"/tickets"}static get i(){return"/install"}static get W(){return`/configuration?pv=${this.X}`}static get C(){return!1}static get K(){return!0}static get q(){return!1}static get B(){return!1}static get j(){return!0}static get t(){return!0}static get Z(){return!0}static get $(){return!0}static get Y(){return!1}static get k(){return!1}}},3326:(j,Z,e)=>{const u=e(5364),i=e(1568);j.exports=class{constructor(j){this.id=j,this.init=!1,this.InspectorConfig=null,this.hasActiveAdblock=!1}Init(j){return this.InspectorConfig=j,!this.init&&this.InspectorConfig&&this.InspectorConfig.active&&(this.init=!0,setTimeout(this.CheckForActiveAdblocker.bind(this),1e3*this.GetAgentActivationTimeout())),this.init}CheckForActiveAdblocker(){document.readyState===i.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.CheckAdblockerActivityStatus.bind(this)):document.readyState!==i.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==i.DOCUMENT_READYSTATE_COMPLETE||this.CheckAdblockerActivityStatus()}CheckAdblockerActivityStatus(){let j=this.CreateDumpAdElements(),Z=j.length,e=0;for(;0!==Z||this.hasActiveAdblock;){Z-=1;let u=setTimeout((()=>{this.CheckAndRemoveTestAd(j[e]),e+=1,u&&clearTimeout(u)}),1e3*this.GetAdblockerAdRemovingTimeout())}}IsElementHidden(j){return!!j&&0===j.offsetHeight}CreateDumpAdElements(){let j=this.GetAdblockerDetectingSrcPatterns();return j&&j.length||(j=[""]),j.map((j=>{let Z=document.createElement("iframe");return Z.innerHTML="&nbsp;",Z.className=this.GetAdblockerDetectionClassName(),Z.style.position="absolute",Z.style.visibility="hidden",Z.style.zIndex="-9999",j&&(Z.src=j),document.body.appendChild(Z),Z}))}CheckAndRemoveTestAd(j){let Z={};Z.hasActiveAdblock=this.IsElementHidden(j),j.remove(),u.SendAdBlockInspectorAgentReport(this.id,Z,null)}GetAdblockerDetectionClassName(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionClassName}GetAdblockerDetectingSrcPatterns(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionSrcPatterns}GetAgentActivationTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.agentActivationTimeoutSec}GetAdblockerAdRemovingTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.adRemovingTimeoutSec}}},3522:(j,Z,e)=>{const u=e(8384),i=e(1568),M=e(2880),o=e(5364);j.exports=class{constructor(j,Z){this.id=j,this.IOManager=Z,this.init=!1,this.tabId=null,this.status=M.GetDefaultAdblockerStatus(),this.excludeList={domains:[],pages:[]},this.IOManager&&(this.IOManager.onAdBlockerStatusChanged=this.onAdBlockerStatusChanged.bind(this),this.IOManager.onAdBlockerSetHiddenAmount=this.SetHiddenAmount.bind(this))}GetStatus(){return this.status}Init(j,Z,e){return!this.init&&u.j&&(this.tabId=e,this.status=j,this.excludeList=Z,this.init=!0),this.init}onAdBlockerStatusChanged(j){this.status=j}SetHiddenAmount(j){j>0&&o.SendHiddenAdCandidatesAmount(this.id,j)}IsEnabled(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_DISPLAY]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForFacebook(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_FACEBOOK]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTwitter(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_TWITTER]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForReddit(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_REDDIT]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForPinterest(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_PINTEREST]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForInstagram(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_INSTAGRAM]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTiktok(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_TIKTOK]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForLinkedin(){return this.init&&u.j&&this.status[i.ADBLOCKER_FOR_LINKEDIN]===i.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsConfigUseLocal(){return this.init&&this.status[i.USE_LOCAL_CONFIG]===i.ADBLOCKER_STATUS_ENABLED}GetCurrentDomain(){return window.location.origin}GetCurrentPageUrl(){return window.location.href}IsExcluded(){return this.IsExcludedByDomainRule()||this.IsExcludedByPageRule()}IsNotExcluded(){return!this.IsExcluded()}IsExcludedByDomainRule(){return-1!==this.excludeList.domains.indexOf(this.GetCurrentDomain())}IsExcludedByPageRule(){return-1!==this.excludeList.pages.indexOf(this.GetCurrentPageUrl())}IsElementHidden(j){return"hidden"===j.getAttribute(i.ATTRIBUTE_BIS_HIDE_STATUS)}}},9346:(j,Z,e)=>{const u=e(9358),i=e(533),M=e(2880),o=e(1568),m=e(8384);j.exports=class extends i{constructor(j){super(),this.id=j,this.active=!1,this.candidates=[],this.hiddenAmount=0,this.pageUrl="",this.ticketId="",this.onPageRefreshed=null,this.isActive=!1,this.available=!1,this.elementId=0}getGlobalContainer(){}sendAdCandidatesToBackground(){}getUniqueContentId(){}get CandidatesCount(){return this.candidates.length}get Candidates(){return this.candidates}get HiddenAmount(){return this.hiddenAmount}get PageUrl(){return this.pageUrl}get TicketId(){return this.ticketId}get IsActive(){return this.active}Activated(){this.active=!0}CandidateHidden(){this.hiddenAmount=this.hiddenAmount+1}ClearHiddenCounter(){this.hiddenAmount=0}ClearCandidates(){this.candidates=[]}AddCandidate(j){this.candidates.push(j)}PageRefreshed(j,Z){this.pageUrl=j,this.ticketId=Z,this.onPageRefreshed&&this.onPageRefreshed(j,Z)}getSponsorTwitterScreenName(j){let Z=this.getSponsorPageRelativeUrl(j),e=Z.lastIndexOf("/")+1;return Z.substring(e)}getSponsorRedditScreenName(j){let Z=this.getSponsorScreenNameReddit(j);return Z?Z.replace(/^.*\/user\//gi,"").replace(/\/.*/gi,""):""}getSponsorPageRelativeUrl(j){let Z="",e=j.querySelectorAll("a");if(e.length){Z=e[0].getAttribute("href");let j=e[0].getBoundingClientRect().x;e.forEach((e=>{e.getBoundingClientRect().x<j&&(Z=e.getAttribute("href"),j=e.getBoundingClientRect().x)}))}return Z}getSponsorScreenNameReddit(j){let Z,e=Array.from(j.querySelectorAll("a[href]"));for(let j of e){const e=new RegExp(/^\/user\/.*/),u=j.getAttribute("href");if(u&&e.test(u)){Z=u.replace(/\/user\//,"").replace(/\/.*/,"");break}}return Z}get Context(){return this}getAdTwitterObject(j,Z,e,i){let o=M.SetFullSizeToElement(Z),m=M.GetCookie("ct0");return{content:u.encode(j.outerHTML),screenName:this.getSponsorTwitterScreenName(j),stylesByElementBisId:i?{}:this.getStylesByElementsBisId(j),adPlacementType:e,size:o,userDataByScreenName:"",token:m}}getAdRedditObject(j,Z,e,i){let o=M.SetFullSizeToElement(j);return{content:u.encode(Z.outerHTML),screenName:this.getSponsorRedditScreenName(Z),adPlacementType:i,targetUrl:e,size:o}}getAdLinkedinObject(j,Z,e,i,o,m,w=null){let _=M.SetFullSizeToElement(j);return{content:u.encode(Z.outerHTML),socialAdvertiserUrl:o,advertiserName:m,advertiserUrl:"",adPlacementType:e,targetUrl:i,size:_,cookie:M.GetAllCookies(),uniqueDataId:w}}getAdPinterestObject(j,Z,e,i,o,m,w){let _=M.SetFullSizeToElement(j),x=this.getUniqueContentId(Z);return{content:u.encode(Z.outerHTML),screenName:e,adPlacementType:w,targetUrl:i,size:_,adText:o,advertiserUrl:m,uniqueContentId:x}}getAdInstagramObject(j,Z,e,i,o,m){let w=M.SetFullSizeToElement(j);return{content:u.encode(Z.outerHTML),screenName:e,adPlacementType:m,targetUrl:i,size:w,aboutPageUrl:o}}setSizesAndIdForAllElements(j){if(j&&j.setAttribute){let Z=this.getElementId();j.setAttribute(o.ATTRIBUTE_BIS_ELEMENT_ID,Z),j.querySelectorAll("*").forEach((j=>{let Z=this.getElementId();j.setAttribute&&(j.setAttribute(o.ATTRIBUTE_BIS_ELEMENT_ID,Z),M.SetFullSizeToElement(j))}))}}isEmpty(j){return void 0===j||0===j.length}getElementId(){return this.elementId++}set setActive(j){"boolean"==typeof j&&(this.isActive=j)}set setAvailable(j){"boolean"==typeof j&&(this.available=j)}HideElement(j){j&&j.style&&(j.style.cssText+=o.STYLES_HIDE_ELEMENT,j.setAttribute(o.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}HideElementForInstagramFeedOnly(j){j&&j.style&&(j.firstElementChild.style.cssText+=o.STYLES_HIDE_INSTAGRAM_FEED_AD[0],j.style.cssText+=o.STYLES_HIDE_INSTAGRAM_FEED_AD[1],j.setAttribute(o.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}UnhideElement(j){if(j&&j.style){let Z=j.style.cssText;Z.includes(o.STYLES_HIDE_ELEMENT)&&(Z=Z.replace(o.STYLES_HIDE_ELEMENT,""),j.style.cssText=Z)}}removeCloneElement(j){j.remove()}isCarousel(j){let Z=j.querySelector("ul");return!!Z&&Z.offsetHeight>40}isVideo(j,Z){return!(!j||!j.querySelectorAll(Z).length)}doesElementExists(j){if(!j)return!1;let Z=j.outerHTML;return document.querySelector("html").outerHTML.includes(Z)}addRedBorderForCandidates(j){m.q&&(j.style.cssText+="border: 6px solid red !important;")}}},1153:(j,Z,e)=>{const u=e(1568),i=e(2880),M=e(7235),o=e(3210),m=e(4430),w=e(855),_=e(97),x=e(4919),K=e(5465),C=e(2075),$=e(3375),W=e(9181),a=e(5849),g=e(9203),P=e(1368);j.exports=class{constructor(j,Z,e,u){if(this.id=j,this.Config=Z,this.AdBlockerAgent=u,this.IOManager=e,this.PageUrl=document.location.href,this.FacebookAds=null,this.TwitterAds=null,this.RedditAds=null,this.SkinAds=null,this.HTML5Ads=null,this.VideoAds=null,this.PinterestAds=null,this.InstagramAds=null,this.LinkedinAds=null,this.TwitchAds=null,this.TiktokAds=null,this.IsBlacklistedPublisher=i.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),!this.IsBlacklistedPublisher)switch(!0){case i.IsFacebookUrl(this.PageUrl):this.FacebookAds=new _(this.id,this.Config,this.AdBlockerAgent);break;case i.IsTwitterUrl(this.PageUrl):this.TwitterAds=new x(this.id,this.Config,this.AdBlockerAgent);break;case i.IsRedditUrl(this.PageUrl):this.RedditAds=new K(this.id,this.Config,this.AdBlockerAgent);break;case i.IsTiktokUrl(this.PageUrl):this.TiktokAds=new a(this.id,this.Config,this.AdBlockerAgent);break;case i.IsPinterestUrl(this.PageUrl):this.PinterestAds=new C(this.id,this.Config,this.AdBlockerAgent);break;case i.IsInstagramUrl(this.PageUrl):this.InstagramAds=new $(this.id,this.Config,this.AdBlockerAgent);break;case i.IsLinkedinUrl(this.PageUrl):this.LinkedinAds=new W(this.id,this.Config,this.AdBlockerAgent);break;case i.IsTwitchUrl(this.PageUrl)&&this.Config.twitchConfig.COLLECT_INSTREAM_ADS:this.TwitchAds=new g(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new o(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new m(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case i.isAI(this.PageUrl,this.Config):this.AIManager=new P(this.id,this.Config,this.PageUrl);break;default:this.SkinAds=new M(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new o(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new m(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.VideoAds=new w(this.id,this.Config,this.IOManager)}}ActivateAdsdetectors(){this.IsBlacklistedPublisher||(document.readyState===u.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.StartAdsdetectors.bind(this)):document.readyState!==u.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==u.DOCUMENT_READYSTATE_COMPLETE||this.StartAdsdetectors())}StartAdsdetectors(){this.SkinAds&&this.SkinAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.BannerAds&&this.BannerAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.HTML5Ads&&this.HTML5Ads.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.VideoAds&&this.VideoAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.FacebookAds&&this.FacebookAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.TwitterAds&&this.TwitterAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.RedditAds&&this.RedditAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.InstagramAds&&this.InstagramAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.LinkedinAds&&this.LinkedinAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER),this.TwitchAds&&this.TwitchAds.ActivateDetector(u.ACTIVATION_BY_ADS_MANAGER)}PageRefreshed(j,Z){this.SkinAds&&this.SkinAds.PageRefreshed(j,Z),this.BannerAds&&this.BannerAds.PageRefreshed(j,Z),this.HTML5Ads&&this.HTML5Ads.PageRefreshed(j,Z),this.VideoAds&&this.VideoAds.PageRefreshed(j,Z),this.FacebookAds&&this.FacebookAds.PageRefreshed(j,Z),this.TwitterAds&&this.TwitterAds.PageRefreshed(j,Z),this.RedditAds&&this.RedditAds.PageRefreshed(j,Z),this.PinterestAds&&this.PinterestAds.PageRefreshed(j,Z),this.InstagramAds&&this.InstagramAds.PageRefreshed(j,Z),this.LinkedinAds&&this.LinkedinAds.PageRefreshed(j,Z),this.TiktokAds&&this.TiktokAds.PageRefreshed(j,Z),this.TwitchAds&&this.TwitchAds.pageRefreshed(j,Z),this.AIManager&&this.AIManager.pageRefreshed(j,Z)}GetHtml5CandidatesPrebuildInfo(){return this.HTML5Ads&&this.HTML5Ads.IsActive?this.HTML5Ads.GetPrebuildInfo():[]}}},1104:(j,Z,e)=>{const u=e(6882);j.exports=class{constructor(j,Z){this.id=j,this.onGotWindowMessageCallback=Z,this.mesToFrameDeactivationIntervalId=null}SetId(j){this.id=j}ActivateMesToFrameContentListener(j){this.mesToFrameDeactivationIntervalId||(this.mesToFrameDeactivationIntervalId=setInterval(this.CheckMesToFrameContent.bind(this),300),setTimeout(this.DeactivateMesToFrameContentListener.bind(this),3e3))}CheckMesToFrameContent(){try{let j=document.body.getAttribute("bis_mes_to_fr");if(j&&j){let Z=JSON.parse(j);document.body.setAttribute("bis_mes_to_fr",""),u.IsValid(Z)&&this.onGotWindowMessageCallback&&this.onGotWindowMessageCallback(Z),this.DeactivateMesToFrameContentListener()}}catch(j){}}DeactivateMesToFrameContentListener(){this.mesToFrameDeactivationIntervalId&&(clearInterval(this.mesToFrameDeactivationIntervalId),this.mesToFrameDeactivationIntervalId=null)}}},3210:(j,Z,e)=>{const u=e(8384),i=e(2880),M=e(9358),o=e(9346),m=e(5364),w=e(1568);j.exports=class extends o{constructor(j,Z,e,u){super(j),this.Config=Z,this.bannerAdsConfig=this.Config.BannerAdsConfig,this.IOManager=e,this.IOManager.onGotBannerCandidatesExtractionStatusesCallback=this.onGoBannerCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=u}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),350),setInterval((()=>{this.DetectCandidates()}),700)}PushCandidate(j,Z){let e={bisId:Z,content:M.encode(j)};this.AddCandidate(e)}IsValidCandidateSize(j){return j&&j.width>70&&j.height>40&&j.height<1100}SetBorderToCandidate(j){j&&u.q&&(u.B?j.style.cssText+=w.STYLES_BORDER_BANNER_URL_EXTRACTED:j.style.cssText+="border: 6px solid red !important;")}SendCandidatesToBackground(){this.Candidates.length&&m.SendAdCandidates(this.id,this.Candidates,w.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS,null)}DetectCandidates(){this.ClearCandidates();let j=i.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.FULL_IMG_COLLECTION);for(let Z=0;Z<j.length;Z++){let e=j[Z];if(!e)continue;let u=e.src.toLowerCase(),M=this.getTagWithHref(e);if(!M)continue;let o=M.href.toLowerCase(),m=!1;if((!this.filterNonAdBanner(e)||this.isRedirectInHref(M))&&(i.IsInFilterList(this.Config.BlacklistBannerHref,o)||i.IsInFilterList(this.Config.BlacklistBannerImgSrc,u)||e.hasAttribute("bis_skin_element")||(i.isValidUrl(u)&&i.isValidUrl(o)||i.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,u)||i.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o))&&(m=!0),m)){let j=e.getBoundingClientRect();if(this.IsValidCandidateSize(j)){this.SetBorderToCandidate(e),i.SetFullSizeToElement(e),i.SetFullSizeToElement(M);let j=i.GenerateAndSetBisIdToBanner(e);this.PushCandidate(M.outerHTML,j)}}}let Z=i.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.ON_EVENT_IMG_COLLECTION);for(let j=0;j<Z.length;j++){let e=Z[j],u=e.src.toLowerCase();if(!i.IsInFilterList(this.Config.BlacklistBannerImgSrc,u)&&(i.isValidUrl(u)&&!i.IsUrlFromHost(document.location.host,u)||i.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,u))){let j=e.getBoundingClientRect();if(this.IsValidCandidateSize(j)){this.SetBorderToCandidate(e),i.SetFullSizeToElement(e);let j=i.GenerateAndSetBisIdToBanner(e);this.PushCandidate(e.outerHTML,j)}}}this.SendCandidatesToBackground()}filterNonAdBanner(j){let Z=window.location.host||"__NULL__",e=j.src.toLowerCase(),u=e.match(/\/\/(www\.)?[A-Za-z0-9.]+/),M=this.getTagWithHref(j),o=M?M.href.match(/\/\/(www\.)?[A-Za-z0-9.]+/):"",m=document.querySelector("head").outerHTML,w=i.IsUrlFromHost(Z,M.href);return o=o?o[0].replace("//",""):"",u=u?u[0].replace("//",""):"__NULL__",Z=0===Z.indexOf("www")?Z.replace("www.",""):Z,w||m.includes(o)||e.includes(Z)&&w||-1!==e.search(/^data/)}isRedirectInHref(j){let Z=j.href;return!!Z&&Z.search(/=https?/)>0}onGoBannerCandidatesExtractionStatuses(j){if(u.q&&u.B&&j&&j.length)for(let Z=0;Z<j.length;Z++){let e=i.QuerySelector(document,`*[bis_id="${j[Z].bannerId}"]`);e&&i.UpdateCandidateStatusBorderColor(e,j[Z].extractionStatus)}}getTagWithHref(j){let Z=j.parentElement;for(let j=0;j<5&&"A"!==Z.tagName;j++)Z=Z.parentElement;return"A"!==Z.tagName&&(Z=null),Z}}},1245:(j,Z,e)=>{e(1568);const u=e(9358);j.exports=class{constructor(j,Z){this.id=j,this.configEncoded=Z,this.config=JSON.parse(u.decode(Z)),this.counterTriesToSave=0,this.SaveToStorageConfig()}GetConfigEncoded(){return this.configEncoded}get BlacklistPublishers(){return this.config.filterLists.blacklistPublishers}get BlacklistBannerImgSrc(){return this.config.filterLists.blacklistBannerImgSrc}get BlacklistBannerHref(){return this.config.filterLists.blacklistBannerHref}get BlacklistIframeSrc(){return this.config.filterLists.blacklistIframeSrc}get BlacklistIframeId(){return this.config.filterLists.blacklistIframeId}get WhitelistCandidatesUrlKeyWords(){return this.config.filterLists.whitelistCandidatesUrlKeyWords}get WhitelistRedirectionCode(){return this.config.filterLists.whitelistRedirectionCode}GetVideoValidatorsForHTML(){return this.config.videoValidatorsForHTML}GetVideoValidatorsForJS(){return this.config.videoValidatorsForJS}GetVideoValidatorsForXHR(){return this.config.videoValidatorsForXHR}get FacebookConfig(){return this.config.facebookConfig}get TwitterConfig(){return this.config.twitterConfig}get RedditConfig(){return this.config.redditConfig}get PinterestConfig(){return this.config.pinterestConfig}get LinkedinConfig(){return this.config.linkedinConfig}get TiktokConfig(){return this.config.tiktokConfig}get GetInstagramConfig(){return this.config.instagramConfig}GetAdBlockInspectorConfig(){return this.config.adBlockInspectorConfig}get BannerAdsConfig(){return this.config.bannerAdsConfig}get Html5AdsConfig(){return this.config.HTML5AdsConfig}get P(){return this.config.aiMessagesConfig||{}}get l(){return this.P.CLAUDE}get V(){return this.P.CHATGPT}get T(){return this.P.COPILOT}get p(){return this.P.PERPLEXITY}get J(){return this.P.META_AI}get I(){return this.P.DEEPSEEK}get G(){return this.P.GEMINI}get BlacklistTargetUrl(){return this.config.filterLists.blacklistTargetUrl}get BlacklistKeyWordsInContent(){return this.config.filterLists.blacklistKeyWordsInContent}GetHtml5TargetUrlDetectionConfig(){return this.config.html5TargetUrlDetectionConfig}get twitchConfig(){return this.config.twitchConfig}static get CheckBisDataExist(){try{return!!sessionStorage.getItem("bis_data")}catch(j){return null}}SaveToStorageConfig(){const j=JSON.stringify({id:this.id,config:this.config});sessionStorage.setItem("bis_data",j),this.counterTriesToSave++}get amountTriesSaveConfig(){return this.counterTriesToSave}}},5364:(j,Z,e)=>{const u=e(1568),i=e(6882),M=e(2880);class o{constructor(j,Z){this.id=j,this.init=!1,this.onGotHTML5CandidatesExtractionStatusesCallback=null,this.onGotSkinAdCandidatesExtractionStatusesCallback=null,this.onGotBannerCandidatesExtractionStatusesCallback=null,this.onGotVideoXHRTrafficCallback=null,this.onGotTwitchVideoInstreamDataCallback=null,this.onAdBlockerStatusChanged=null,this.onAdBlockerSetHiddenAmount=null,this.onTabUrlChanged=null,this.twitterVideoInfoCandidates=[],this.twitterAdCandidate=[],this.ConfigAgent=Z}IsInit(){return this.init}Init(){this.init||(this.init=!0,window.addEventListener("message",(j=>{try{let Z=j.data;if(i.IsValid(Z)){const j=Z.type;switch(j){case u.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE:this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(Z.content);break;case u.MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA:this.onGotTwitchVideoInstreamDataCallback&&this.onGotTwitchVideoInstreamDataCallback(Z.content);break;case u.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:o.SendFBInStreamData(this.id,Z.content);break;case u.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:M.IsFBVideoDataValid(Z.content)&&o.SendFBVideoData(this.id,Z.content);break;case u.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:o.SendPinterestVideoData(this.id,Z.content);break;case u.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:case u.MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES:case u.MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA:case u.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:o.SendInstagramDataToBgStorage(this.id,Z.content,j);break;case u.MESSAGE_TYPE_LINKEDIN_VIDEO_DATA:case u.MESSAGE_TYPE_LINKEDIN_SLIDES_DATA:o.SendLinkedinDataToBgStorage(this.id,Z.content,j);break;case u.MESSAGE_TYPE_TWITTER_VIDEO_DATA:o.SendTWVideoData(this.id,Z.content);break;case u.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA:o.SendTWCarouselData(this.id,Z.content);break;case u.MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES:o.SendTiktokDataToBgStorage(this.id,Z.content,j),this.SetAdBlockerHiddenAmount(1);break;case u.MESSAGE_TYPE_REDDIT_VIDEO_DATA:o.SendRedditVideoData(this.id,Z.content);break;case u.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:o.SendRedditRightColumnData(this.id,Z.content);break;case u.MESSAGE_TYPE_CLAUDE_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_CLAUDE_DATA);break;case u.MESSAGE_TYPE_CHATGPT_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_CHATGPT_DATA);break;case u.MESSAGE_TYPE_DEEPSEEK_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_DEEPSEEK_DATA);break;case u.MESSAGE_TYPE_COPILOT_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_COPILOT_DATA);break;case u.MESSAGE_TYPE_PERPLEXITY_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_PERPLEXITY_DATA);break;case u.MESSAGE_TYPE_META_AI_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_META_AI_DATA);break;case u.MESSAGE_TYPE_GEMINI_DATA:o.sendAIMessageCandidates(this.id,Z.content,u.MESSAGE_TYPE_GEMINI_DATA);break;case u.MESSAGE_TYPE_CONFIG_NOT_FOUND:this.ConfigAgent.SaveToStorageConfig(),this.sendResponseConfigSaved()}}}catch(j){}}),!1),M.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((j=>{let Z=j;i.IsValid(Z)&&Z.to===this.id&&(Z.type===u.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES?this.onGotHTML5CandidatesExtractionStatusesCallback&&this.onGotHTML5CandidatesExtractionStatusesCallback(Z.content):Z.type===u.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES?this.onGotBannerCandidatesExtractionStatusesCallback&&this.onGotBannerCandidatesExtractionStatusesCallback(Z.content):Z.type===u.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES?this.onGotSkinAdCandidatesExtractionStatusesCallback&&this.onGotSkinAdCandidatesExtractionStatusesCallback(Z.content):Z.type===u.MESSAGE_TYPE_TAB_URL_CHANGED?this.onTabUrlChanged&&this.onTabUrlChanged(Z.content):Z.type===u.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED&&this.onAdBlockerStatusChanged&&this.onAdBlockerStatusChanged(Z.content))})))}SetAdBlockerHiddenAmount(j){this.onAdBlockerSetHiddenAmount&&this.onAdBlockerSetHiddenAmount(j)}SendTicket(j){let Z=i.EmptyMessage;Z.type=u.MESSAGE_TYPE_OUT_TICKET,Z.from=this.id,Z.to="bg",Z.content=j,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).then(this.onTicketSend.bind(this)).catch((()=>{}))}onTicketSend(j){j&&j.status}static SendHiddenAdCandidatesAmount(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}static SendInitMes(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_TAB_INITIALIZATION,e.to="bg",e.content=j,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).then((j=>{j&&j.config&&Z&&Z(j.config)})).catch((()=>{}))}static SendSinglePageReinitMes(j){let Z=i.EmptyMessage;Z.type=u.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION,Z.to="bg",Z.content=j,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendNewPageCreatedTicket(j){let Z=i.EmptyMessage;Z.type=u.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET,Z.to="bg",Z.content=j,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendPanelRegulatorResult(j){let Z=i.EmptyMessage;Z.type=u.MESSAGE_TYPE_PANEL_REGULATOR_RESULT,Z.to="bg",Z.content=j,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendMesToBackground(j,Z,e,u){let o=i.EmptyMessage;o.type=Z,o.from=j,o.to="bg",o.content=e,M.IsOnChromeRuntime()&&(u?chrome.runtime.sendMessage(o).then(u).catch((()=>{})):chrome.runtime.sendMessage(o).catch((()=>{})))}static SendAdCandidates(j,Z,e,u){o.SendMesToBackground(j,e,Z,u)}static sendAIMessageCandidates(j,Z,e){o.SendMesToBackground(j,e,Z)}static SendCandidatePlacementsCount(j,Z,e,u){o.SendMesToBackground(j,e,Z,u)}static SendHtml5CandidatePlacements(j,Z,e){o.SendMesToBackground(j,u.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5,Z,e)}static SendAdBlockInspectorAgentReport(j,Z){o.SendMesToBackground(j,u.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT,Z,null)}static SendTWVideoData(j,Z){o.SendMesToBackground(j,u.MESSAGE_TYPE_TWITTER_VIDEO_DATA,Z,null)}static SendTWCarouselData(j,Z){o.SendMesToBackground(j,u.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA,Z,null)}static SendRedditVideoData(j,Z){o.SendMesToBackground(j,u.MESSAGE_TYPE_REDDIT_VIDEO_DATA,Z,null)}static SendRedditRightColumnData(j,Z){o.SendMesToBackground(j,u.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA,Z,null)}static SendVideoHar(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_VIDEO_HAR,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}SendTwitchInstreamData(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}static SendFBVideoData(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}static SendPinterestVideoData(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_PINTEREST_VIDEO_DATA,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}static SendInstagramDataToBgStorage(j,Z,e){let u=i.EmptyMessage;u.type=e,u.from=j,u.to="bg",u.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(u).catch((()=>{}))}static SendTiktokDataToBgStorage(j,Z,e){let u=i.EmptyMessage;u.type=e,u.from=j,u.to="bg",u.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(u).catch((()=>{}))}static SendLinkedinDataToBgStorage(j,Z,e){let u=i.EmptyMessage;u.type=e,u.from=j,u.to="bg",u.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(u).catch((()=>{}))}static SendInstagramFullTextData(j,Z,e){let u=i.EmptyMessage;u.type=e,u.from=j,u.to="bg",u.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(u).catch((()=>{}))}static SendFBInStreamData(j,Z){let e=i.EmptyMessage;Z.encodedText=Z.content,Z.alias=u.VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON,Z.mediaType=u.VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON,Z.frameId=0,Z.framesChain=[],Z.contentType="json",delete Z.content,e.type=u.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}static SendInitRequestListener(j,Z){let e=i.EmptyMessage;e.type=u.MESSAGE_TYPE_INIT_REQUEST_LISTENER,e.from=j,e.to="bg",e.content=Z,M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}sendResponseConfigSaved(){if(this.ConfigAgent.amountTriesSaveConfig>4)return;let j=i.EmptyMessage;j.type=u.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,window.postMessage(j,"*")}}j.exports=o},8229:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j,Z,e,u){this.init=!1,this.Config=u,this.chainId=j,this.frameId=Z,this.bisId=e,this.documentObj=null,this.onInputsDetectedCallback=null,this.onRedirectsDetectedCallback=null,this.detectedValidationInfo={inputs:!1,redirect:!1}}Init(j,Z,e){return!this.init&&j&&(this.init=!0,this.fullIdStr=u.GetFullIdStr(this.chainId,this.frameId,this.bisId),this.documentObj=j,this.onInputsDetectedCallback=Z,this.onRedirectsDetectedCallback=e,this.ValidateContent()),this.init}ValidateContent(){if(!this.detectedValidationInfo.inputs){this.GetInputsAmount()>0&&!this.IsIFrameWithInputsException()&&(this.detectedValidationInfo.inputs=!0,this.onInputsDetectedCallback&&this.onInputsDetectedCallback())}this.detectedValidationInfo.redirect||this.HasRedirect()&&(this.detectedValidationInfo.redirect=!0,this.onRedirectsDetectedCallback&&this.onRedirectsDetectedCallback())}GetInputsAmount(){let j=0;try{let Z=u.QuerySelectorAll(this.documentObj,"input");Z&&Z.length&&Z.forEach((Z=>{let e=Z.getBoundingClientRect();e.width>0&&e.height>0&&(j+=1)}))}catch(j){}return j}IsIFrameWithInputsException(){let j=!1,Z=u.QuerySelector(this.documentObj,"html");return Z&&-1!==Z.innerHTML.search(/var clicktag/i)&&(j=!0),j}IsWhiteListedRedirectionCode(j){let Z=!1;try{if(j&&j.length&&this.Config){let e=this.Config.WhitelistRedirectionCode;for(let u=0;u<e.length&&!Z;u++)j.includes(e[u])&&(Z=!0)}}catch(j){}return Z}HasRedirect(){let j=!1,Z=u.QuerySelectorAll(this.documentObj,"script");for(let e=0;e<Z.length&&!j;e++){let u=Z[e].innerHTML;u.length&&u.includes("location.replace")&&(j=!this.IsWhiteListedRedirectionCode(u))}return j}}},3870:(j,Z,e)=>{const u=e(9358),i=e(2880),M=e(6882),o=e(1568),m=e(4503),w=e(8229),_=e(9877),x=e(855),K=e(1245);class C{constructor(){this.id=null,this.frameId=null,this.chainId=null,this.fullIdStr="",this.init=!1,this.chainActivated=!1,this.finalFrame=!1,this.activated=!1,this.contentSenderTimer=null,this.activationInfo=null,this.IframesIO=null,this.TargetUrlDetector=null,this.ContentValidator=null,this.VideoAds=null,this.Config=null,this.recheckerInterval=null,this.PageUrl=document.location.href,this.counter=10,this.timeoutHandlerForBlockedFrame=null,this.isBlockedFrameInfoGot=!1}Init(){this.init||(this.init=!0,setTimeout(this.SendInitMessage.bind(this),700))}SetBisStatus(){document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_status","ok")}RecheckBisStatus(){document&&document.body&&document.body.getAttribute&&"ok"!==document.body.getAttribute("bis_status")&&this.SetBisStatus()}StopRechecker(){this.recheckerInterval&&(clearInterval(this.recheckerInterval),this.recheckerInterval=null)}SendInitMessage(){let j=document.querySelector("html"),Z=j?j.innerHTML:"",e=M.EmptyMessage;e.type=o.MESSAGE_TYPE_IFRAME_INITIALIZATION,e.from=this.id,e.to="bg",e.content={location:document.location.href,contentForSave:{depth:this.findDepthForClosedFrame(window,0),src:document.location.href,content:u.encode(Z)}},i.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).then(this.onGotInitMesResponse.bind(this)).catch((()=>{}))}findDepthForClosedFrame(j,Z=0){const e=j.parent;return e&&e!==top?(Z++,this.findDepthForClosedFrame(e,Z)):Z}onGotInitMesResponse(j){const Z=j.mes.content.location;this.Config=new K(this.id,j.mes.content.configuration);const e=this.Config?.LinkedinConfig?.FEED.REGEXP_IFRAME_SRC;if(!e)throw new Error("Not found this.Config.LinkedinConfig.FEED.REGEXP_IFRAME_SRC in PosdFrameContent.onGotInitMesResponse");if(!0===new RegExp(e).test(Z))this.linkedinScenario(j);else this.commonScenario(j)}commonScenario(j){if(j&&j.status&&"ok"===j.status&&M.IsValid(j.mes)&&j.mes.content.activeStatus&&(this.frameId=j.mes.content.frameId,this.fullIdStr=i.GetFullIdStr(this.chainId,this.frameId,this.id),j.mes.content.isMaster)){this.Config=new K(this.id,j.mes.content.configuration);const Z=i.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),e=i.IsInFilterList(this.Config.BlacklistIframeSrc,this.PageUrl),u=i.IsInFilterList(this.Config.BlacklistKeyWordsInContent,document.querySelector("html").innerHTML);if(Z||e||u)return;this.SetBisStatus(),setTimeout(this.StopRechecker.bind(this),1e4),this.recheckerInterval=setInterval(this.RecheckBisStatus.bind(this),300),this.IframesIO=new m(this.id),this.IframesIO.Init(),this.IframesIO.onGotChainActivationCallback=this.onGotChainActivation.bind(this),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.VideoAds=new x(this.id,this.Config,this.IframesIO,!Z),document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_frame_id",this.frameId),"null"===self.origin&&(this.timeoutHandlerForBlockedFrame=setInterval((()=>{this.counter--,this.isBlockedFrameInfoGot||this.counter<=0?clearInterval(this.timeoutHandlerForBlockedFrame):this.requestHeaderInfoFromBG()}),1e3))}}linkedinScenario(j){if(!(j&&j.status&&"ok"===j.status&&M.IsValid(j.mes)))return;let Z=document?.documentElement;if(!Z)return;let e=Z.querySelector("body");if(e){let j=1e3;e.setAttribute(o.ATTRIBUTE_BIS_ELEMENT_ID,j),e.querySelectorAll("*").forEach((Z=>{j++,Z.setAttribute&&(Z.setAttribute(o.ATTRIBUTE_BIS_ELEMENT_ID,j),i.SetFullSizeToElement(Z))}))}let u=setTimeout((()=>{let j=Z.outerHTML,e=document.querySelector('span[class="ssplayer-topbar-title-text ssplayer-topbar-ellipsis"]')?.textContent;this.storeLinkedinFrameContent(j,e),clearTimeout(u)}),100)}storeLinkedinFrameContent(j,Z){let e=M.EmptyMessage;e.type=o.MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE,e.from=this.id,e.to="bg",e.content={content:u.encode(j),title:Z},i.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}requestHeaderInfoFromBG(){let j=M.EmptyMessage;j.type=o.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME,j.from=this.id,j.to="bg",j.content={src:document.location.href},i.IsOnChromeRuntime()&&(this.setMessageListenerForThisIFrame(),chrome.runtime.sendMessage(j).catch((()=>{})))}setMessageListenerForThisIFrame(){chrome.runtime.onMessage.addListener(this.callbackForHeaderInfoRequest.bind(this))}callbackForHeaderInfoRequest(j){let Z=arguments.callee;if(j&&j.type&&j.type===o.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE){let e=j.parentInfo;if(chrome.runtime.onMessage.removeListener(Z),e){this.isBlockedFrameInfoGot=!0;let j=_.DetectTargetUrlFromWindowObj(this.id,self,this.Config),Z={depth:e.depth,headerInfo:e.headerInfo,chainId:e.chainId,configEncoded:this.Config.configEncoded,targetUrlCandidates:j.length?j:[]};this.onGotChainActivation(Z)}}}onGotChainActivation(j){if(this.chainActivated)return null;if(this.chainActivated=!0,!(j&&j.headerInfo&&j.headerInfo.bisId))return null;this.id=j.headerInfo.bisId,this.IframesIO.SetId(this.id),this.chainId=j.chainId,this.fullIdStr=i.GetFullIdStr(this.chainId,this.frameId,this.id),this.StopRechecker(),this.activationInfo=j,this.Config||j.configEncoded&&j.configEncoded.length&&(this.Config=new K(this.id,j.configEncoded)),this.ContentValidator=new w(this.chainId,this.frameId,this.id,this.Config),this.ContentValidator.Init(document,this.onContentInputsDetected.bind(this),this.onContentRedirectsDetected.bind(this)),this.TargetUrlDetector=new _(this.chainId,this.frameId,this.id,this.activationInfo.targetUrlCandidates,this.Config),this.TargetUrlDetector.Init(this.IframesIO),C.SetBisId(document,window,this.id),i.SetBisDepth(document.body,j.depth),i.SetBisChainId(document.body,j.chainId),this.InjectJs();let Z=setTimeout((()=>{this.onGotActivationMes(),clearTimeout(Z)}),50)}onGotActivationMes(){if(!this.activated){this.activated=!0;var j=i.QuerySelectorAll(document,"iframe, frame");if(j.length)for(let Z=0;Z<j.length;Z++){const e=j[Z];if(i.SetFullSizeToElement(e,C.GetAbsoluteCoordinates(this.activationInfo)),i.GenerateAndSetBisIdToFrame(e),i.SetBisDepth(e,this.activationInfo.depth+1),i.SetBisChainId(e,this.activationInfo.chainId),i.IsIframeHasContentScript(j[Z]))C.SendActivationMesToFrame(this.id,this.activationInfo.chainId,e,this.activationInfo.depth+1,this.Config);else{let j=C.GetInvalidChainSegmentContent(this.id,this.activationInfo.chainId,e,this.activationInfo.depth+1,this.Config);C.SendInvalidChainSegmentContent(this.id,j)}}this.TargetUrlDetector.DetectTargetUrl(1e3,this.onTargerUrlDetected.bind(this))}}onTargerUrlDetected(){if(!this.contentSenderTimer){let j=i.GetRandomIntInRange(0,200);this.contentSenderTimer=setTimeout(this.SendContent.bind(this),j)}}SendContent(){C.PrepareContent(this.fullIdStr,document,C.GetAbsoluteCoordinates(this.activationInfo)),C.RemoveInjectedJs(this.fullIdStr,document);let j=document.querySelector("html");if(!j)return;let Z=j.outerHTML;if(Z.length){let j=M.EmptyMessage;j.type=o.MESSAGE_TYPE_IFRAME_CONTENT,j.from=this.id,j.to="bg",j.content={isValid:!0,headerInfo:this.activationInfo.headerInfo,contentFinal:u.encode(Z),targetUrl:this.TargetUrlDetector.FrameTargetUrl},i.IsOnChromeRuntime()&&chrome.runtime.sendMessage(j).catch((()=>{}))}}onGotChainActivationResponse(){}onGotContentMes(){}onContentInputsDetected(){this.IframesIO.SendInputsDetected()}onContentRedirectsDetected(){this.IframesIO.SendRedirectDetected()}static SetBisId(j,Z,e){Z&&(Z.bis_id=e),j&&(j.bis_id=e),j.body&&j.body.setAttribute&&j.body.setAttribute("bis_body_id",e)}static RemoveInjectedJs(j,Z){try{let j=Z.head.querySelectorAll("script[bis_script]");if(j&&j.length)for(let Z=0;Z<j.length;Z++)j[Z].remove()}catch(j){}}static GetAbsoluteCoordinates(j){return{x:j.headerInfo.size.abs_x,y:j.headerInfo.size.abs_y}}static PrepareContent(j,Z,e){for(var u=i.QuerySelectorAll(Z,"*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)"),M=0;M<u.length;M++){var o=u[M];if(o)try{var m=!1,w=window.getComputedStyle(o).backgroundImage;if(w&&w.length&&"none"!=w&&w.includes("url")&&(w=w.replace(/"/g,"'"),m=!0),o.hasAttribute("style")){var _=o.getAttribute("style");_&&o.setAttribute&&(_=_.replace(/"/g,"'"),o.setAttribute("style",_),m&&(o.style.cssText+="background-image: "+w+";",o.setAttribute("bis_label","style")))}else m&&o.setAttribute&&(o.setAttribute("style","background-image: "+w+";"),o.setAttribute("bis_label","style"));try{if(o.attributes&&o.attributes.length)for(var x=0;x<o.attributes.length;x++)o.attributes[x]&&o.attributes[x].value&&o.attributes[x].value.length&&"src"!==o.attributes[x].name&&o.attributes[x].value.includes('"')&&(o.attributes[x].value=o.attributes[x].value.replace(/"/g,"'"))}catch(j){}i.SetFullSizeToElement(o,e)}catch(j){}}}static ExtractContent(j,Z){return Z.document.querySelector("html").outerHTML}static GetFrameHeaderInfo(j,Z,e){let i={depth:e,chainId:j,frameId:Z.id,src:Z.src,size:JSON.parse(Z.getAttribute("bis_size")),bisId:Z.getAttribute("bis_id")};return 0===e&&(i.topHeaderContent=u.encode(Z.outerHTML)),i}static SendActivationMesToFrame(j,Z,e,m,w){let x=!1;try{const K=document.querySelector("body"),$=self===top?0:K?+K.getAttribute("bis_frame_id"):null;let W="";if(w&&w.GetConfigEncoded&&(W=w.GetConfigEncoded()),e){let K,a=M.EmptyMessage;try{K=e.contentWindow&&Object.keys(e.contentWindow).includes("origin")?e.contentWindow.origin:e.src}catch(j){K=e.src}a.type=o.MESSAGE_TYPE_CHAIN_ACTIVATION,a.from=j,a.to="fr",a.content={chainId:Z,depth:m,headerInfo:C.GetFrameHeaderInfo(Z,e,m),configEncoded:W,targetUrlCandidates:[]};let g=M.EmptyMessage;if(g.type=o.MESSAGE_TYPE_HEADER_INFO_TO_STORAGE,g.from=j,g.to="bg",g.content={chainId:Z,depth:m,frameId:$,headerInfo:C.GetFrameHeaderInfo(Z,e,m)},i.IsOnChromeRuntime()&&chrome.runtime.sendMessage(g).catch((()=>{})),i.IsIframeSecure(e)){if(e.contentWindow&&e.contentWindow.postMessage)try{e.contentWindow.postMessage(a,K)}catch(j){}}else{try{let Z=_.DetectTargetUrlFromWindowObj(j,e.contentWindow,w);Z.length&&(a.content.targetUrlCandidates=Z)}catch(j){}e.contentWindow.document.body.setAttribute&&e.contentWindow.document.body.setAttribute("bis_activation",u.encode(JSON.stringify(a)))}x=!0}}catch(j){}return x}static GetInvalidChainSegmentContent(j,Z,e,M,o){let m={},w=!1,x=C.GetFrameHeaderInfo(Z,e,M),K={x:x.size.x,y:x.size.y};try{let $=i.QuerySelectorAll(e.contentWindow.document,"iframe, frame");if(0===$.length)w=!0;else{w=!1;for(let e=0;e<$.length;e++)i.SetFullSizeToElement($[e],K),i.GenerateAndSetBisIdToFrame($[e]),i.SetBisDepth($[e],M+1),C.SendActivationMesToFrame(j,Z,$[e],M+1,o)}C.PrepareContent(j,e.contentWindow.document,K),m.isValid=!1,m.isChainCompleted=w,m.headerInfo=x,m.contentFinal=u.encode(C.ExtractContent(j,e.contentWindow)),m.targetUrl=_.DetectTargetUrlFromWindowObj(j,e.contentWindow,o)}catch(j){}return m}static SendInvalidChainSegmentContent(j,Z){if(Z){let e=M.EmptyMessage;e.type=o.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT,e.from=j,e.to="bg",e.content=Z,i.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((()=>{}))}}InjectJs(){if(document.querySelector('script[bis_script="display"]'))return;let j=document.createElement("script"),Z=document.querySelector("head");this.setAttributes(j),Z&&Z.appendChild(j)}setAttributes(j){const Z=i.getURL("../executors/frame.js");j.setAttribute("bis_use","true"),j.setAttribute("bis_script","display"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("bis_id",this.id),j.src=Z}}j.exports=C},4430:(j,Z,e)=>{const u=e(8384),i=e(2880),M=e(1568),o=e(9346),m=e(3870),w=e(5364);j.exports=class extends o{constructor(j,Z,e,u){super(j),this.Config=Z,this.HTML5AdsConfig=this.Config.Html5AdsConfig,this.IOManager=e,this.IOManager.onGotHTML5CandidatesExtractionStatusesCallback=this.onGotHTML5CandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=u,this.topFramesCandidates=[],this.onDetectedCallback=null,this.chainIdCounter=0,this.maxTriesForPreciseAds=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.MAX_TRIES_FIND_ADS}ActivateDetector(){this.Activated(),this.sequentialDetection().catch((()=>{}))}async sequentialDetection(){let j=await this.asyncStartDetectPreciseAds();this.startDetectCandidates(j)}startDetectCandidates(j){j?setInterval(this.startDetectPreciseAds.bind(this),600):setTimeout(this.sequentialDetection.bind(this),500)}startDetectPreciseAds(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter();let j=this.detectByQuerySelectors();if(!j.length)return void this.startDetectHTML5AdsCandidates();let Z=0;for(let e=0;e<j.length;e++){const u=j[e];u.setAttribute&&(u.setAttribute(M.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(u,!0),this.addRedBorderForCandidates(u),Z++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(u))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.startToProcessCandidates(Z),this.startDetectHTML5AdsCandidates()}asyncStartDetectPreciseAds(){return new Promise((j=>{this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.maxTriesForPreciseAds<=0&&(this.maxTriesForPreciseAds--,j(!0));let Z=this.detectByQuerySelectors();if(!Z.length)return j(!1),void this.maxTriesForPreciseAds--;let e=0;for(let j=0;j<Z.length;j++){const u=Z[j];u.setAttribute&&(u.setAttribute(M.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(u,!0),this.addRedBorderForCandidates(u),e++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(u))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.maxTriesForPreciseAds--,this.startToProcessCandidates(e),j(Z.length>0)}))}detectByQuerySelectors(){const j=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.QUERY_SELECTORS;let Z=[];for(let e of j){let j=Array.from(i.QuerySelectorAll(document,`${e}:not([${M.ATTRIBUTE_BIS_PRECISE_AD}]):not([${M.ATTRIBUTE_BIS_SIZE}])`));j.length&&(Z=Z.concat(...j))}return Z}startDetectHTML5AdsCandidates(){let j=i.QuerySelectorAll(document,this.HTML5AdsConfig.QUERIES.IFRAMES_COLLECTION),Z=0;if(j.length){for(let e=0;e<j.length;e++){const u=j[e];if(u.getAttribute(M.ATTRIBUTE_BIS_PRECISE_AD))continue;let o=u.src?u.src.toLowerCase():u.src;this.preCheckFrameContent(u)&&(i.IsInFilterList(this.Config.BlacklistIframeSrc,o)||i.IsInFilterList(this.Config.BlacklistIframeId,u.id)?i.SetFullSizeToElement(u):!this.IsFrameFromSite(o)||i.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o)?(this.buildCandidateObject(u,!1),Z+=1,this.addRedBorderForCandidates(u)):i.SetFullSizeToElement(u))}Z>0&&this.startToProcessCandidates(Z)}}startToProcessCandidates(j){w.SendHtml5CandidatePlacements(this.id,j,null);for(let j=0;j<this.topFramesCandidates.length;j++)this.topFramesCandidates[j].status===M.CANDIDATE_PROCESS_STATUS_DETECTED&&(this.topFramesCandidates[j].status=M.CANDIDATE_PROCESS_STATUS_START_PROCESSING,setTimeout((()=>{this.ActivateCandidateProcessing(this.topFramesCandidates[j])}),3e3+i.GetRandomIntInRange(0,500)))}buildCandidateObject(j,Z){let e=j.getBoundingClientRect();if(!Z&&e.width<=70&&e.height<=40&&e.height>=1100)return;i.SetFullSizeToElement(j);let u=i.GenerateAndSetBisIdToFrame(j);this.chainIdCounter=this.chainIdCounter+1;let o={ticketId:this.TicketId,pageUrl:this.PageUrl,bisId:u,chainId:this.chainIdCounter,detectionTime:(new Date).getTime(),processingStartTime:null,frame:j,isSecure:i.IsIframeSecure(j),hasContentScript:i.IsIframeHasContentScript(j),status:M.CANDIDATE_PROCESS_STATUS_DETECTED};this.topFramesCandidates.push(o),i.SetBisDepth(j,0),i.SetBisChainId(j,this.chainIdCounter)}preCheckFrameContent(j){if(!j.contentDocument)return!0;const Z=j.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.ACCEPTABLE_NODES_IN_IFRAME),e=j.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.UNACCEPTABLE_NODES_IN_IFRAME);let u=!1;return Z.length&&!e.length&&(u=!0),u}onGotHTML5CandidatesExtractionStatuses(j){if(j&&j.length)for(let Z=0;Z<j.length;Z++)if(this.AdBlockerAgent.IsEnabled()&&j[Z].extractionStatus.filteredOut)this.UnhideElement(i.QuerySelector(document,`iframe[bis_chainid="${j[Z].chainId}"]`));else if(u.q&&u.B){let e=i.QuerySelector(document,`iframe[bis_chainid="${j[Z].chainId}"]`);e&&i.UpdateCandidateStatusBorderColor(e,j[Z].extractionStatus)}}ActivateCandidateProcessing(j){if(j&&j.status&&j.status===M.CANDIDATE_PROCESS_STATUS_START_PROCESSING){j.processingStartTime=(new Date).getTime(),j.status=M.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED;let Z=i.IsIframeSecure(j.frame);j.isSecure!==Z&&(j.isSecure=Z);let e=i.IsIframeHasContentScript(j.frame);if(j.hasContentScript!==e&&(j.hasContentScript=e),j.hasContentScript)m.SendActivationMesToFrame(this.id,j.chainId,j.frame,0,this.Config);else{let Z=m.GetInvalidChainSegmentContent(this.id,j.chainId,j.frame,0,this.Config);if(u.q&&u.B&&Z.isChainCompleted){let e={fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1};Z.contentFinal&&Z.contentFinal.length&&(e.fullContentExtracted=!0),Z.targetUrl&&Z.targetUrl.length&&(e.targetUrlExtracted=!0),i.UpdateCandidateStatusBorderColor(j.frame,e)}m.SendInvalidChainSegmentContent(this.id,Z)}}}GetPrebuildInfo(){let j=[],Z=(new Date).getTime();for(let e=0;e<this.topFramesCandidates.length;e++)this.topFramesCandidates[e].status===M.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED&&(this.topFramesCandidates[e].status=M.CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT,j.push({ticketId:this.topFramesCandidates[e].ticketId,pageUrl:this.topFramesCandidates[e].pageUrl,bisId:this.topFramesCandidates[e].bisId,chainId:this.topFramesCandidates[e].chainId,timeAfterDetection:Z-this.topFramesCandidates[e].detectionTime,timeAfterProcessingStart:Z-this.topFramesCandidates[e].processingStartTime}));return j}IsFrameFromSite(j){let Z=!1,e=j;if(e.length){let u=e.indexOf("?");u>0?e=j.substring(0,u):(u=e.indexOf("#"),u>0&&(e=j.substring(0,u))),-1!==e.indexOf(window.location.host)?Z=!0:i.isValidUrl(e)||"about:blank"===e||(Z=!0)}return Z}}},4503:(j,Z,e)=>{const u=e(6882),i=e(1568),M=e(2880),o=e(9358),m=e(1104);j.exports=class{constructor(j){this.id=j,this.init=!1,this.AtrMessageListeners=[],this.webNavigationIframes=[],this.chainActivationListernerIntervalId=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotChainActivationCallback=null,this.onGotVideoXHRTrafficCallback=null,this.chainActivationEventProcessed=!1,this.processedMessages=[]}IsInit(){return this.init}get Context(){return this}SetId(j){this.id=j,this.AtrMessageListener&&this.AtrMessageListener.SetId(j)}Init(){this.init||(this.init=!0,window.addEventListener("message",(j=>{try{var Z=j.data;this.ProcessWindowMessage(Z)}catch(j){}}),!1),M.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((j=>{var Z=j;u.IsValid(Z)&&(Z.type===i.MESSAGE_TYPE_GET_FRAME_CONTENT?Z.multiTo.includes(this.id)&&(this.webNavigationIframes=Z.content,this.onGotContentMesCallback&&this.onGotContentMesCallback()):Z.type===i.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK&&Z.multiTo.includes(this.id)&&this.ActivateWindowClickTargetUrlDetection(Z.content))})),this.chainActivationListernerIntervalId=setInterval((()=>{try{if(!this.chainActivationEventProcessed&&document&&document.body){let j=document.body.getAttribute("bis_activation");if(j&&j.length){let Z=o.decode(j);if("{"===Z[0]&&"}"===Z[Z.length-1]){let j=JSON.parse(Z);u.IsValid(j)&&j.type===i.MESSAGE_TYPE_CHAIN_ACTIVATION&&(this.chainActivationEventProcessed=!0,clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null,document.body.setAttribute("bis_activation","done"),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(j.content))}}document.body.removeAttribute("bis_activation")}}catch(j){}}),500))}ProcessWindowMessage(j){u.IsValid(j)&&j.posdHash&&!this.processedMessages.includes(j.posdHash)&&(j.posdHash&&j.posdHash.length&&this.processedMessages.push(j.posdHash),j.type===i.MESSAGE_TYPE_CHAIN_ACTIVATION?(this.chainActivationListernerIntervalId&&(clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(j.content)):j.type===i.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?this.onWindowEmbeddedTargetUrlDetectionCallback&&this.onWindowEmbeddedTargetUrlDetectionCallback(j.content.targetUrlList):j.type===i.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND?(j.to="bg",M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(j).catch((()=>{}))):j.type===i.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE&&this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(j.content))}ActivateWindowEmbeddedTargetUrlDetection(j){try{this.onWindowEmbeddedTargetUrlDetectionCallback=j;let e=u.EmptyMessage;e.type=i.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,e.from=this.id,e.to=this.id+"_w",window.postMessage&&window.postMessage(e,"*");var Z=new m(this.id,this.ProcessWindowMessage.bind(this));Z.ActivateMesToFrameContentListener(i.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND),this.AtrMessageListeners.push(Z)}catch(j){}}ActivateWindowClickTargetUrlDetection(j){try{let e=u.EmptyMessage;e.type=i.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,e.from=this.id,e.to=this.id+"_w",e.content=j,window.postMessage&&window.postMessage(e,"*");var Z=new m(this.id,this.ProcessWindowMessage.bind(this));Z.ActivateMesToFrameContentListener(i.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL),this.AtrMessageListeners.push(Z)}catch(j){}}SendInputsDetected(){let j=u.EmptyMessage;j.type=i.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS,j.from=this.id,j.to="bg",M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(j).catch((()=>{}))}SendRedirectDetected(){let j=u.EmptyMessage;j.type=i.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS,j.from=this.id,j.to="bg",M.IsOnChromeRuntime()&&chrome.runtime.sendMessage(j).catch((()=>{}))}}},9700:(j,Z,e)=>{e(1568);const u=e(2880);j.exports=class{#j;#Z;#e;constructor(j){this.#j=j}injectDetector(j){if(this.#Z=j.className,this.#e=j.fileName,document.head){let Z=document.createElement("script");this.#u(Z),j.injectBeforeFirstChild?document.head.insertBefore(Z,document.head.firstChild):document.head.appendChild(Z)}}#u(j){const Z=u.getURL(`../executors/${this.#e}.js`);j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}}},3129:(j,Z,e)=>{const u=e(2880),i=e(1568),M=e(7584),o=e(1153),m=e(5364),w=e(3522),_=e(3326),x=e(1245),K=e(7376);j.exports=class{constructor(){this.id=null,this.tabId=null,this.init=!1,this.panalyticsId="",this.adsCandidatesDetectionInterval=null,this.ticket=null,this.cycleNumber=0,this.RefreshTicket(),m.SendNewPageCreatedTicket(u.ToJSON(this.ticket))}RefreshTicket(){this.pageUrl=document.location.href,this.ticketId=u.GenerateUUID(),this.cycleNumber=0,this.ticket=M.GetSingleOutTicket(this.panalyticsId,this.ticketId,this.tabId),this.init&&this.AdsManager&&this.AdsManager.PageRefreshed(this.pageUrl,this.ticketId)}Init(){this.init||m.SendInitMes({ticketId:this.ticketId,url:this.pageUrl},this.onGetInitConfig.bind(this))}onGetInitConfig(j){return j.activeStatus?this.init?null:(this.init=!0,this.tabId=j.tabId,this.id="mp_"+j.tabId,this.panalyticsId=j.panalyticsId,this.ticket.tabId=this.tabId,this.ticket[i.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.Config=new x(this.id,j.configuration),this.IOManager=new m(this.id,this.Config),this.IOManager.onTabUrlChanged=this.onTabUrlChanged.bind(this),this.IOManager.Init(),this.AdBlockerAgent=new w(this.id,this.IOManager),this.AdBlockerAgent.Init(j.adBlockerStatus,j.excludeList,j.tabId),this.AdsManager=new o(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.PanelsRegulator=new K(this.id),this.PanelsRegulator.Init(this.AdBlockerAgent,this.onGotRegulatorRespond.bind(this)),void(j.activeAdBlockInspectorAgent&&(this.AdBlockInspectorAgent=new _(this.id),this.AdBlockInspectorAgent.Init(this.Config.GetAdBlockInspectorConfig())))):null}onGotRegulatorRespond(j){return!!this.init&&(!!j&&(this.adsCandidatesDetectionInterval=setInterval(this.onAdsCandidatesDetected.bind(this),1e4),this.AdsManager.ActivateAdsdetectors(),m.SendNewPageCreatedTicket(u.ToJSON(this.ticket)),void m.SendPanelRegulatorResult(j)))}onTabUrlChanged(j){return!(!j?.newUrl||!j?.initedTicketId)&&((j.newUrl!==this.pageUrl||j.initedTicketId===this.ticketId)&&(this.RefreshTicket(),m.SendSinglePageReinitMes({ticketId:this.ticketId,url:this.pageUrl}),void m.SendNewPageCreatedTicket(u.ToJSON(this.ticket))))}onAdsCandidatesDetected(){return!!this.init&&(u.IsOnChromeRuntime()?!!this.panalyticsId.length&&(this.cycleNumber=this.cycleNumber+1,this.ticket[i.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.ticket.windowSize=u.GetWindowSize(),this.ticket.firstVisit=this.cycleNumber<=1,this.ticket.adCandidatesHtml5=this.AdsManager.GetHtml5CandidatesPrebuildInfo(),void this.IOManager.SendTicket(u.ToJSON(this.ticket))):(this.adsCandidatesDetectionInterval&&clearInterval(this.adsCandidatesDetectionInterval),!1))}}},7376:(j,Z,e)=>{const u=e(8384),i=e(1568),M=e(2880),o=e(9358);j.exports=class{constructor(j){this.id=j,this.init=!1,this.extensionId=""+chrome.runtime.id,this.AdBlockerAgent=null,this.onInitCallback=null}Init(j,Z){!this.init&&j&&(this.onInitCallback=Z,this.init=!0,this.AdBlockerAgent=j,document.readyState===i.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.ActivateRegulator.bind(this)):document.readyState!==i.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==i.DOCUMENT_READYSTATE_COMPLETE||this.ActivateRegulator())}ActivateRegulator(){this.RegisterPanel(),setTimeout(this.Regulate.bind(this),500)}Regulate(){let j=!0,Z="",e=[];try{let u=document.body.getAttribute("bis_register");if(u&&u.length){e=JSON.parse(o.decode(u));for(let j=0;j<e.length&&0===Z.length;j++)e[j].master&&(Z=e[j].extensionId);Z.length&&this.extensionId!==Z&&(j=!1)}}catch(j){}this.onInitCallback&&this.onInitCallback(j)}GetPanelScore(){let j=u.X.split("."),Z=1e4*parseInt(j[0])+100*parseInt(j[1])+parseInt(j[2]),e=this.AdBlockerAgent.GetStatus();return M.IsFacebookUrl(document.location.href)?e[i.ADBLOCKER_FOR_FACEBOOK]===i.ADBLOCKER_STATUS_ENABLED&&(Z*=10):M.IsTwitterUrl(document.location.href)?e[i.ADBLOCKER_FOR_TWITTER]===i.ADBLOCKER_STATUS_ENABLED&&(Z*=10):M.IsRedditUrl(document.location.href)?e[i.ADBLOCKER_FOR_REDDIT]===i.ADBLOCKER_STATUS_ENABLED&&(Z*=10):e[i.ADBLOCKER_FOR_DISPLAY]===i.ADBLOCKER_STATUS_ENABLED&&(Z*=10),Z}UpdateRegister(j){let Z={master:!0,extensionId:this.extensionId,adblockerStatus:this.AdBlockerAgent.GetStatus(),version:u.X,score:this.GetPanelScore()},e=!0;for(let u=0;u<j.length&&e;u++)j[u].extensionId===this.extensionId&&(e=!1,j[u]=Z);e&&j.push(Z)}ChooseWinner(j){if(j&&j.length)if(1===j.length);else{let Z=0,e=j[Z].score;for(let u=0;u<j.length;u++)j[u].master=!1,j[u].score>e&&(e=j[u].score,Z=u);j[Z].master=!0}}RegisterPanel(){try{let j=[],Z=document.body.getAttribute("bis_register");Z&&Z.length&&(j=JSON.parse(o.decode(Z))),this.UpdateRegister(j),this.ChooseWinner(j),document.body.setAttribute("bis_register",o.encode(JSON.stringify(j)))}catch(j){}}}},7235:(j,Z,e)=>{const u=e(2880),i=e(8384),M=e(9346),o=e(5364),m=e(1568);j.exports=class extends M{constructor(j,Z,e,u){super(j),this.Config=Z,this.skinAdsConfig=Z.config.skinAdsConfig,this.IOManager=e,this.IOManager.onGotSkinAdCandidatesExtractionStatusesCallback=this.onGotSkinAdCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=u}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),500),setInterval((()=>{this.DetectCandidates()}),1e3)}SendCandidatesToBackground(){this.Candidates.length&&o.SendAdCandidates(this.id,this.Candidates,m.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS,null)}DetectCandidates(){this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),this.SendCandidatesToBackground()}GetSkinAdFromBodyBackground(){var j,Z={source:[],targetUrl:[]},e=document.body;if(e&&!e.hasAttribute("bis_skin_checked")&&(j=u.GetUrlFromStyleStr(window.getComputedStyle(e).backgroundImage)),j&&u.isValidUrl(j)){e.setAttribute("bis_skin_checked","1");var i={type:"single",src:j,size:u.GetFullElementSize(e)};Z.source.push(i);for(var M=u.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),o=0;o<M.length;o++){var m=M[o];m.setAttribute&&m.setAttribute("bis_skin_checked","1");var w=m.getBoundingClientRect(),_=m.firstElementChild?m.firstElementChild.getBoundingClientRect():null;m.href&&(w.width>50&&w.height>=100&&0==w.left||_&&_.width>50&&_.height>=100&&0==_.left)&&u.isValidUrl(m.href)&&!Z.targetUrl.includes(m.href)&&Z.targetUrl.push(m.href),this.findElementsByHref(Z.targetUrl,m)}}Z.source.length&&Z.targetUrl.length&&this.AddCandidate(Z)}GetSkinAdFromDivBackground(){let j={source:[],targetUrl:[]},Z=!1,e=u.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_DIV_COLLECTION);for(let i=0;i<e.length&&!Z;i++){let M=e[i];M.setAttribute&&M.setAttribute("bis_skin_checked","1");let o=M.getBoundingClientRect();if(o.width>50&&o.height>500&&0==o.left){let e=u.GetUrlFromStyleStr(window.getComputedStyle(M).backgroundImage);if(e&&u.isValidUrl(e)){let i={type:"single",src:e,size:u.GetFullElementSize(M)};j.source.push(i),Z=!0}}}if(Z){let Z=u.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION);for(let e=0;e<Z.length;e++){let i=Z[e];i.setAttribute&&i.setAttribute("bis_skin_checked","1");let M=i.getBoundingClientRect();i.href&&0==M.left&&(M.width>50&&M.height>500||M.width>500&&M.height>50)&&u.isValidUrl(i.href)&&!j.targetUrl.includes(i.href)&&j.targetUrl.push(i.href)}}j.source.length&&j.targetUrl.length&&this.AddCandidate(j)}findElementsByHref(j,Z){const e=Z.href;j.includes(e)&&(this.SetBorderToCandidate(Z),Z.setAttribute("bis_skin_element","1"))}SetBorderToCandidate(j){const Z=j.getBoundingClientRect();j&&(Z.width>1&&Z.height>1?j.style.cssText+="border: 6px solid red !important; display: block;":j.firstElementChild.style.cssText+="border: 6px solid red !important; display: block;")}onGotSkinAdCandidatesExtractionStatuses(j){if(i.q&&i.B&&j&&j.length)for(let Z=0;Z<j.length;Z++){let e=u.QuerySelectorAll(document,j[Z].query);e&&e.forEach((e=>{e&&u.UpdateCandidateStatusBorderColor(e,j[Z].extractionStatus)}))}}}},7584:(j,Z,e)=>{const u=e(8384),i=e(2880),M=e(1568);j.exports=class{static GetSingleOutTicket(j,Z,e){let o={tabId:e,ticketFormatVersion:3,partnerId:u.o,distributorId:u.m,ticketId:Z,firstVisit:!1,url:document.location.href,userAgent:navigator.userAgent,creationTime:i.GetCurrentDataTimeStr(),windowSize:i.GetWindowSize(),timeOnPage:0,adCandidatesSkinAd:[],adCandidatesBanner:[],adCandidatesHtml5:[],adsFacebook:[],adsTwitter:[],adsReddit:[],adsPinterest:[],adsInstagram:[],adsLinkedin:[],adsTiktok:[],aiMessages:[],adCandidatePlacements:{skinAd:0,banner:0,html5:0,facebook:0,twitter:0,reddit:0,pinterest:0,tiktok:0,instagram:0,linkedin:0},videoTraffics:[],activeAdBlocker:!1};o[M.TICKET_ALIAS_PANALYTICSID]=j,o[M.TICKET_ALIAS_PINSTANCEID]=u.M;let m=i.GetBaseHref();""!==m&&(o.base=m);let w=chrome.runtime.getManifest();return o.extensionVersion=w.version,o.panelosVersion=u.X,o}}},855:(j,Z,e)=>{const u=e(1568),i=e(9358),M=e(2880),o=e(1936),m=e(2938),w=e(8940),_=e(5364);j.exports=class{constructor(j,Z,e){this.id=j,this.Config=Z,this.IOManager=e,this.onDetectVideoHarCallback=null,this.VideoTrafficValidator=new w(this.id,this.Config),this.VideoTrafficDetector=new m(this.id),this.VideoTrafficDetector.InjectXhrDetector(this.Config),this.IOManager.onGotVideoXHRTrafficCallback=this.ProcessVideoXHRTraffic.bind(this)}ActivateDetector(){this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS()}PageRefreshed(j,Z){M.IsYouTubeUrl(j)||(this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS())}CheckVideoTrafficInHTML(){let j=new o(u.VIDEO_TRAFFIC_SOURCE_HTML,"GET",window.location.href,"text/html",document.documentElement.outerHTML),Z=this.VideoTrafficValidator.Validate(j);Z&&this.SendVideoTraffic(j,Z)}CheckVideoTrafficInJS(){let j=M.QuerySelectorAll(document,"script");for(let Z=0;Z<j.length;Z++){let e=new o(u.VIDEO_TRAFFIC_SOURCE_JS,"GET",j[Z].src,"text/javascript",j[Z].innerHTML),i=this.VideoTrafficValidator.Validate(e);i&&this.SendVideoTraffic(e,i)}}ProcessVideoXHRTraffic(j){if(o.IsXHRvalid(j)){let Z=new o(u.VIDEO_TRAFFIC_SOURCE_XHR,j.requestMethod,j.url,j.type,j.content,j.encodedPostBody),e=this.VideoTrafficValidator.Validate(Z);e&&this.SendVideoTraffic(Z,e)}}SendVideoTraffic(j,Z){if(j&&Z){let e={requestMethod:j.GetRequestMethod(),url:j.GetUrl(),contentType:j.GetType(),mediaType:Z.name,alias:Z.alias};if(j.IsEncodedPostBodyExist()&&(e.encodedPostBody=j.GetEncodedPostBody()),Z.reduceSizeFilter&&Z.reduceSizeFilter.active){let u;if(null!==(u=w.CreateRegExp(Z.reduceSizeFilter.reducePattern).exec(j.GetContent()))&&u.length>0&&Math.max(...Z.reduceSizeFilter.regResIndexes)<u.length){let j=u.filter(((j,e)=>Z.reduceSizeFilter.regResIndexes.includes(e)));e.encodedText=i.encode(j.join(" "))}}else e.encodedText=i.encode(j.GetContent());_.SendVideoHar(this.id,e)}}}},1936:(j,Z,e)=>{const u=e(9358);j.exports=class{constructor(j,Z,e,u,i,M=null){this.trafficSource=j,this.requestMethod=Z,this.url=e,this.type=u,this.content=i,this.SetEncodedPostBody(M)}static IsXHRvalid(j){return j&&j.hasOwnProperty("requestMethod")&&j.hasOwnProperty("url")&&""!==j.url}SetEncodedPostBody(j){j&&"string"==typeof j&&j.length>0&&(this.encodedPostBody=u.encode(j))}GetEncodedPostBody(){return this.encodedPostBody?this.encodedPostBody:null}IsEncodedPostBodyExist(){return!!this.encodedPostBody}GetTrafficSource(){return this.trafficSource}GetRequestMethod(){return this.requestMethod}GetUrl(){return this.url}GetType(){return this.type}GetContent(){return this.content}SetContent(j){this.content=j}SetUrl(j){this.url=j}}},2938:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j){this.id=j}InjectXhrDetector(j){if(document.head){let Z=document.createElement("script");this.setAttributes(Z,j),document.head.appendChild(Z)}}setAttributes(j,Z){const e=u.getURL("../executors/traffic.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("data-bis-config",JSON.stringify(Z.config.filterLists.blacklistIframeSrc)),j.src=e}}},8940:(j,Z,e)=>{const u=e(1568);class i{constructor(j,Z){this.id=j,this.Config=Z}Validate(j){let Z=[],e=!1;if(j&&(j.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_HTML?(Z=this.Config.GetVideoValidatorsForHTML(),e=!0):j.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_XHR?(Z=this.Config.GetVideoValidatorsForXHR(),e=!0):j.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_JS&&(Z=this.Config.GetVideoValidatorsForJS(),e=!0),e))for(let e of Z){if(this.ValidateUseConfiguration(j,e))return this.specificFilterCandidate(j,e)}return!1}ValidateUseConfiguration(j,Z){const e=Object.keys(Z);let u=[];for(let j of e)-1!==j.indexOf("Pattern")&&u.push(j);let M=0,o={domainPattern:"GetUrl",mimePattern:"GetType",contentPattern:"GetContent"};for(let e of u)try{let u=i.CreateRegExp(Z[e]),m=o[e];M+=u.test(j[m]())?1:0}catch(j){}return M===u.length}static CreateRegExp(j){let Z=j.replace(/.*\/([gimy]*)$/,"$1"),e=j.replace(new RegExp("^/(.*?)/"+Z+"$"),"$1");return new RegExp(e,Z)}specificFilterCandidate(j,Z){return!(!j.IsEncodedPostBodyExist()&&"YT_FORCING_KEY"===Z.alias)&&Z}}j.exports=i},1368:(j,Z,e)=>{const u=e(1568),i=e(2880),M=e(100),o=e(9587),m=e(778),w=e(6912),_=e(8065),x=e(8476),K=e(8375);j.exports=class{#j;#i;#M;#o=null;constructor(j,Z,e){switch(this.#j=j,this.#i=Z,this.#M=e,!0){case i.isClaudeUrl(this.#M,Z):this.#o=new M(this.#j,this.#i);break;case i.isChatgptUrl(this.#M,Z):this.#o=new o(this.#j,this.#i);break;case i.isCopilotUrl(this.#M,Z):this.#o=new m(this.#j,this.#i);break;case i.isPerplexityUrl(this.#M,Z):this.#o=new w(this.#j,this.#i);break;case i.isMetaUrl(this.#M,Z):this.#o=new _(this.#j,this.#i);break;case i.isDeepseekUrl(this.#M,Z):this.#o=new x(this.#j,this.#i);break;case i.isGeminiUrl(this.#M,Z):this.#o=new K(this.#j,this.#i)}this.#m()}#m(){document.readyState===u.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.#w.bind(this)):document.readyState!==u.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==u.DOCUMENT_READYSTATE_COMPLETE||this.#w.apply(this)}#w(){this.#o&&this.#o.activateDetector()}pageRefreshed(j,Z){}}},9587:(j,Z,e)=>{e(1568);const u=e(9700);j.exports=class extends u{#j;#i={};#_={fileName:"chatgpt",className:"PosdChatgptMessagesCollector:Injector"};constructor(j,Z){super(j),this.#j=j,this.#i=Z.V||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#_))}}},100:(j,Z,e)=>{const u=e(9700);e(1568);j.exports=class extends u{#j;#i={};#_={fileName:"claude",className:"PosdClaudeMessagesCollector:Injector"};#x=!1;constructor(j,Z){super(j),this.#j=j,this.#i=Z.l||{}}activateDetector(){this.#x||(this.#x=!0,this.injectDetector(this.#_))}}},778:(j,Z,e)=>{const u=e(9700);e(1568);j.exports=class extends u{#j;#i={};#_={fileName:"copilot",className:"PosdCopilotMessagesCollector:Injector",injectBeforeFirstChild:!0};#x=!1;constructor(j,Z){super(j),this.#j=j,this.#i=Z.T||{}}activateDetector(){this.#x||(this.#x=!0,this.injectDetector(this.#_))}}},8476:(j,Z,e)=>{e(1568);const u=e(9700);j.exports=class extends u{#j;#i={};#_={fileName:"deepseek",className:"PosdDeepseekMessagesCollector:Injector"};constructor(j,Z){super(j),this.#j=j,this.#i=Z.I||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#_))}}},8375:(j,Z,e)=>{e(1568);const u=e(9700);j.exports=class extends u{#j;#i={};#_={fileName:"gemini",className:"PosdGeminiMessagesCollector:Injector"};constructor(j,Z){super(j),this.#j=j,this.#i=Z.I||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#_))}}},8065:(j,Z,e)=>{const u=e(9700);e(1568);j.exports=class extends u{#j;#i={};#_={fileName:"meta",className:"PosdMetaMessagesCollector:Injector"};#x=!1;constructor(j,Z){super(j),this.#j=j,this.#i=Z.J||{}}activateDetector(){this.#x||(this.#x=!0,this.injectDetector(this.#_))}}},6912:(j,Z,e)=>{const u=e(9700);e(1568);j.exports=class extends u{#j;#i={};#_={fileName:"perplexity",className:"PosdPerplexityMessagesCollector:Injector"};#x=!1;constructor(j,Z){super(j),this.#j=j,this.#i=Z.p||{}}activateDetector(){this.#x||(this.#x=!0,this.injectDetector(this.#_))}}},655:(j,Z,e)=>{const u=e(2880),i=e(1568);j.exports=class{constructor(j,Z,e){this.id=j,this.options=Z,this.AdBlockerAgent=e,this.active=!1,this.lastDetectTime=u.GetCurrentTimestampMs()-1e3,this.activateDetectorTime=u.GetCurrentTimestampMs(),this.detectorInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.isObserverAlreadySet=!1,this.onScrollListenerHandler=null,this.onScrollListenerIsOn=!1,this.onScrollCallback=null}ActualizeDetector(){}ActivateMutationObserver(){}DeactivateMutationObserver(){}Detector(){}HideAd(j,Z,e){}CheckIfAd(j){}CheckIfAdRendered(j){}ExtractAd(j){}ActivateDetector(){this.active||(this.activateDetectorTime=u.GetCurrentTimestampMs(),this.active=!0,this.options.firstDetectionAfterActivationTimeoutMs&&this.options.firstDetectionAfterActivationTimeoutMs>0&&setTimeout((()=>{this.DetectCandidates(i.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.firstDetectionAfterActivationTimeoutMs),this.startIntervalDetectCandidates(i.AD_DETECTOR_INITIATOR_TIMER),this.options.useObserver&&this.IsActualByKeyWordInUrl&&(this.observerNodesListenerInterval=setInterval((()=>{this.observerNodesChecksAmount=this.observerNodesChecksAmount+1,this.ActivateMutationObserver(),(this.isObserverAlreadySet||this.observerNodesChecksAmount>this.options.observerNodesChecksMaxAmount)&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.activateOnScrollEvent())}),this.options.observerNodesCheckIntervalMs)))}DeactivateDetector(j){j===i.AD_DETECTOR_INITIATOR_URL&&(this.DeactivateMutationObserver(),(this.onScrollCallback||this.onScrollListenerIsOn)&&(window.removeEventListener("scroll",this.onScrollCallback),this.onScrollCallback=null,this.onScrollListenerIsOn=!1,this.onScrollListenerHandler&&(clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null))),this.detectorInterval&&(clearInterval(this.detectorInterval),this.detectorInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0),this.activateDetectorTime=u.GetCurrentTimestampMs(),this.lastDetectTime=u.GetCurrentTimestampMs()-1e3,this.active=!1}DetectCandidates(j,Z){if(!this.ActualizeDetector()||!this.IsActualByKeyWordInUrl)return void this.checkLimits(j);let e=u.GetCurrentTimestampMs();u.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs?(this.checkLimits(j),Z&&this.startIntervalDetectCandidates()):e-this.lastDetectTime>this.options.minTimeAfterLastDetectionMs&&(this.lastDetectTime=e,this.Detector())}get IsActualByKeyWordInUrl(){const j=this.options.urlInvalidKeyWord,Z=this.options.urlValidationByKeyWord;if(!j&&!Z)return!0;const e=window.location.href;let u=!!j&&j.some((j=>e.includes(j))),i=!Z||e.includes(Z);return!u&&i}checkLimits(j){return!this.options.maxActualizeDetectorWaitTimeMs||(!(u.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs)||(this.DeactivateDetector(j),!1))}activateOnScrollEvent(){this.options.useOnScroll&&!this.onScrollListenerIsOn&&this.IsActualByKeyWordInUrl&&this.ActualizeDetector()&&(this.onScrollCallback=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0)}onScroll(j){this.DetectCandidates(i.AD_DETECTOR_INITIATOR_SCROLL_EVENT),this.startIntervalDetectCandidates(i.AD_DETECTOR_INITIATOR_SCROLL_EVENT),window.removeEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!1,this.onScrollListenerHandler=setTimeout((()=>{window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0,clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null}),this.options.onScrollTimeout)}startIntervalDetectCandidates(j){this.detectorInterval||(this.detectorInterval=setInterval((()=>{this.DetectCandidates(j)}),this.options.detectionIntervalMs))}}},97:(j,Z,e)=>{const u=e(8384),i=e(2880),M=e(9358),o=e(1568),m=e(9346),w=e(5364),_=e(7678),x=e(6335),K=e(7948),C=e(1899),$=e(2300),W=e(1454);j.exports=class extends m{constructor(j,Z,e){super(j),this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.fbConfig=Z.FacebookConfig,this.AdBlockerAgent=e,this.VideoTrafficDetector=new W(this.id),this.VideoTrafficDetector.InjectDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(o.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetector(j){j===o.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.fbContent=document.querySelector(this.fbConfig.FB_CONTENT),this.fbContent&&(this.DetectorFeed=new x(this.id,this.fbConfig.FEED_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorFeed.HideAd=this.HideAd.bind(this),this.DetectorFeed.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorFeed.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorRightColumn=new C(this.id,this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorRightColumn.HideAd=this.HideAd.bind(this),this.DetectorRightColumn.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorRightColumn.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorWatch=new K(this.id,this.fbConfig.FEED_WATCH_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorWatch.HideAd=this.HideAd.bind(this),this.DetectorWatch.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorWatch.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorMarketplace=new $(this.id,this.fbConfig.MARKETPLACE_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorMarketplace.HideAd=this.HideAd.bind(this),this.DetectorMarketplace.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorMarketplace.ExtractAd=this.ProcessFbCreative.bind(this),this.ActivateDetectors())}ActivateDetectors(){this.DetectorRightColumn.ActivateDetector(),this.DetectorFeed.ActivateDetector(),this.DetectorWatch.ActivateDetector(),this.DetectorMarketplace.ActivateDetector()}DeactivateDetectors(j){this.DetectorRightColumn.DeactivateDetector(j),this.DetectorFeed.DeactivateDetector(j),this.DetectorWatch.DeactivateDetector(j),this.DetectorMarketplace.DeactivateDetector(j)}ProcessFbCreative(j,Z,e){try{let M=!1,m=!1,x=!1;if(j){let K=document.querySelector(`[${o.ATTRIBUTE_BIS_ID}=${j}]`);if(K)if(M=!0,m=this.IsAdContentRendered(K,_.GetMinImgsSpacePercentag(this.fbConfig,e)),m){x=this.IsVideoCreative(K),w.SendCandidatePlacementsCount(this.id,1,o.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK,null);let j={x:0,y:0};if(_.IsPostHidden(K)){K.setAttribute(o.ATTRIBUTE_BIS_SIZE,i.ToJSON(_.GetPostContainerSize(K)));let Z=K.getAttribute(o.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);Z&&(j.x=parseInt(Z))}else i.SetFullSizeToElement(K);let M=K.querySelectorAll("*");for(let Z=0;Z<M.length;Z++)i.SetFullSizeToElement(M[Z],null,j);let m=[];m.push(this.BuildCreative(K,x,Z,e)),this.SendFacebookCandidates(m),u.q&&u.B&&(this.IsVideoCreative(K)?K.style.cssText+=o.STYLES_OUTLINE_VIDEO_AD:K.style.cssText+=o.STYLES_OUTLINE_SUCCESS_DETECT)}else K.removeAttribute&&K.removeAttribute(o.ATTRIBUTE_BIS_ID)}}catch(j){}}BuildCreative(j,Z,e,u){let i=_.GetPostContainerSize(j),m=Array.from(document.querySelectorAll("link")),w=Array.from(document.querySelector("head").querySelectorAll("style[nonce]")),x=m.concat(w),K='<html><head><meta charset="utf-8">';for(let j of x)K+=j.outerHTML;if(K+=`</head><body style='position:absolute; top:0px; left:0px; width:${i.w}px; height:${i.h}px;'>${j.outerHTML}</body></html>`,this.AdBlockerAgent.IsEnabledForFacebook()&&e?.length&&K.includes(e)){let j="";K=K.replace(e,j)}let C="",$=!1;this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&($=!0),this.fbConfig&&$&&(this.DetectorFeed&&u===o.FACEBOOK_AD_PLACEMENT_TYPE_FEED?C=this.DetectorFeed.GetAboutPageLink(j):this.DetectorMarketplace&&u===o.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?C=this.DetectorMarketplace.GetAboutPageLink(j):this.DetectorWatch&&u===o.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH&&(C=this.DetectorWatch.GetAboutPageLink(j)));let W={content:M.encode(K),adPlacementType:u,designVersion:o.FACEBOOK_DESIGN_VERSION_NEW,aboutPageLink:C,aboutSectionContent:"",size:i};return Z&&(W.videoData={videoId:"",videoUrl:"",audioUrl:""}),j.setAttribute(o.ATTRIBUTE_BIS_STATUS,"extracted"),W}HideAd(j,Z,e){let u="";return j&&Z&&j&&j.style&&(u=`position: absolute !important; width: ${Z.w}px; overflow: hidden; height: 0px;`,_.IsPostHidden(j)||(j.style.cssText+=u,j.setAttribute(o.ATTRIBUTE_BIS_HIDE_HEIGHT,Z.h),j.setAttribute(o.ATTRIBUTE_BIS_HIDE_WIDTH,Z.w),j.setAttribute(o.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"))),j.style.cssText}IsAdContentRendered(j,Z){let e=_.GetPostContainerSize(j);if(i.GetImagesSpacePercentage(this.fbConfig.TAGS_FOR_LOADING_CHECK,j,e).some((j=>j>=Z)))return!0;let u=j.querySelector(`a[${o.ATTRIBUTE_BIS_LABEL}]`);return u&&u.removeAttribute(o.ATTRIBUTE_BIS_LABEL),!1}IsVideoCreative(j){return 0!==j.querySelectorAll("video").length}AddNeededStylesForElement(j,Z){try{if(Z.w<=3&&Z.h<=3&&("SPAN"===j.nodeName||"DIV"===j.nodeName)){let Z=j.getAttribute("class");if(Z&&Z.includes("accessible_elem")){let Z=getComputedStyle(j);j.setAttribute(o.ATTRIBUTE_BIS_STYLE,`clip:${Z.getPropertyValue("clip")}; height:${Z.getPropertyValue("height")}; overflow:${Z.getPropertyValue("overflow")}; position:${Z.getPropertyValue("position")}; white-space:${Z.getPropertyValue("white-space")}; width:${Z.getPropertyValue("width")};`)}}}catch(j){}}LoadAboutPageAndSendCandidates(j){if(j&&j.length){let Z=j[0].aboutPageLink;Z&&Z.length?fetch(Z,{headers:this.fbConfig.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((Z=>{try{if(200===Z.status)return Z.text();this.SendFacebookCandidates(j)}catch(j){}})).then((Z=>{let e="",u=Z.split(/\r?\n/);if(u.length)for(let j=0;j<u.length;j++){!new RegExp(this.fbConfig.ABOUT_SECTION_CONFIG.CONTENT_CHECK_STRING).test(u[j])||e.includes("delegate_page_id")&&e.includes("about_app_sections")||(e+=u[j])}j[0].aboutSectionContent=M.encode(e),this.SendFacebookCandidates(j)})).catch((()=>{this.SendFacebookCandidates(j)})):this.SendFacebookCandidates(j)}}SendFacebookCandidates(j){w.SendAdCandidates(this.id,j,o.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK,null),this.AdBlockerAgent.IsEnabledForFacebook()&&this.AdBlockerAgent.SetHiddenAmount(j.length)}}},7678:(j,Z,e)=>{const u=e(1568),i=e(2880);class M{static GetVisibleText(j){let Z=j.querySelectorAll(":scope > *");if(0!==Z.length)return Array.prototype.slice.call(Z).map(M.GetVisibleText).flat();if("none"!==getComputedStyle(j).display){let Z=j.innerText;try{if(0===Z.length&&j.getAttribute){let e=j.getAttribute("data-content");e&&e.length&&(Z=e)}}catch(j){}return Z}return""}static GetVisibleSpansText(j,Z,e=[]){if(j.hasAttribute&&j.hasAttribute("bis_sponsor_checked")&&3==j.getAttribute("bis_sponsor_checked"))return"";let u=j.querySelectorAll(Z),i="",M=parseInt(j.getAttribute("bis_sponsor_checked"))||0;return u.forEach((j=>{const Z=getComputedStyle(j);if("none"!==Z.display&&"absolute"!==Z.position)try{let Z=Array.from(j.childNodes).filter((j=>3===j.nodeType)).map((j=>j.nodeValue.trim())).reduce(((j,Z)=>j+Z),"");if(0===Z.length&&j.getAttribute){let e=j.getAttribute("data-content");e&&e.length&&(Z=e)}i+=Z}catch(j){}})),j.setAttribute("bis_sponsor_checked",parseInt(M)+1),i&&e.length&&!e.includes(i)&&(i=this.checkLettersOfAlly(i,e)),i}static checkLettersOfAlly(j,Z){const e=j.split(""),u=e.length-1,i=Z.length;let M=1,o=!1,m=0,w="";for(;!o&&M<=i;){const i=Z[M-1],_=e[m];-1!==i.indexOf(_)&&i.length===e.length?u!==m?m+=1:u===m&&j.length===i.length?(o=!0,w=i):(M+=1,m=0):(M+=1,m=0)}return w}static HideSateliteSponsoredString(j,Z){try{Z&&Z.forEach((Z=>{if(Z.innerText){let e=Z.innerText;j.SPONSORED_TEXTS.some((j=>-1!==e.indexOf(j)))&&(Z.style="display:none")}}))}catch(j){}}static GetMinImgsSpacePercentag(j,Z){return Z===u.FACEBOOK_AD_PLACEMENT_TYPE_FEED?j.FEED_PAGE.MIN_IMGS_SPACE_PERCENTAGE:Z===u.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?j.MARKETPLACE_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:Z===u.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN?j.RIGHT_COLUMN_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:Z===u.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH?j.FEED_WATCH_PAGE.MIN_IMGS_SPACE_PERCENTAGE:0}static IsInitiallyRendered(j,Z){return!!M.IsPostHidden(j)||Z.w>0&&Z.h>10}static IsPostHidden(j){return"hidden"===j.getAttribute(u.ATTRIBUTE_BIS_HIDE_STATUS)}static GetPostContainerSize(j){let Z=i.GetFullElementSize(j);if(M.IsPostHidden(j)){let e=j.getAttribute(u.ATTRIBUTE_BIS_HIDE_HEIGHT);e&&(Z.h=parseInt(e));let i=j.getAttribute(u.ATTRIBUTE_BIS_HIDE_WIDTH);i&&(Z.w=parseInt(i));let M=j.getAttribute(u.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);M&&(Z.x=Z.x+parseInt(M),Z.abs_x=Z.abs_x+parseInt(M))}return Z}}j.exports=M},6335:(j,Z,e)=>{const u=e(655),i=e(7678),M=e(2880),o=e(1568),m=e(6882);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.fbConfig=u,this.fbFeed=null,this.fbFeedObserver=null}ActualizeDetector(){return!!this.isValidUrl&&(this.fbFeed=this.FeedContainer,!!this.fbFeed)}ActivateMutationObserver(){this.fbFeed?(this.fbFeedObserver||(this.fbFeedObserver=new MutationObserver(this.DetectCandidates.bind(this,o.AD_DETECTOR_INITIATOR_MUTATION)),this.fbFeedObserver.observe(this.fbFeed,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedContainer(){const j=this.fbConfig.FEED_PAGE.MIN_HEIGHT,Z=this.fbConfig.FEED_PAGE.FEED_QUERIES,e=Z.length;let u=!1,i=null;for(let M=0;M<e&&!u;M++){let e=Z[M],o=document.querySelector(e);if(o){const Z=o.offsetHeight;if(o.children.length>2&&Z>j)i=o,u=!0;else if(o.nodeName.search(/span/i)>-1){let Z=o.nextElementSibling;if(Z&&Z.children){const e=Z.offsetHeight;1===Z.children.length&&Z.querySelector("h3")?(i=Z.querySelector("h3").parentElement,u=!0):2===Z.children.length?(o=Z.querySelector("div:not([class])"),o&&o.offsetHeight>j&&(i=o,u=!0)):Z.children.length>1&&e>j&&(i=Z,u=!0)}}}}return i}DeactivateMutationObserver(){this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.FeedContainer;if(j){let Z=Array.from(j.children);if(Z.length&&1!==Z.length||(Z=document.querySelectorAll(this.fbConfig.FEED_PAGE.POSTS_QUERY)),!Z)return;for(let j=0;j<Z.length;j++){let e=Z[j],u=M.GetElementSize(e);if(!e.hasAttribute(o.ATTRIBUTE_BIS_ID)&&i.IsInitiallyRendered(e,u)&&this.CheckIfAdRendered(e,i.GetMinImgsSpacePercentag(this.fbConfig,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED))&&this.CheckIfAd(e)){let i="";this.AdBlockerAgent.IsEnabledForFacebook()&&(i=this.HideAd(Z[j],u,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED)),this.addCoverImageSrcAttribute(e);let m=M.GenerateAndSetBisIdToFBAds(e),w=this.options.extractAdStaticPartTimeoutMs+M.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(e),setTimeout(this.ReadyToExtractAd.bind(this,m,i),w)}}}}ReadyToExtractAd(j,Z){try{if(j){let e=document.querySelector(`[${o.ATTRIBUTE_BIS_ID}=${j}]`);if(!e)return;let u=e.querySelector(`[${o.ATTRIBUTE_BIS_LABEL}="fb_feed_ad"]`);u?this.ExtractAd(j,Z,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED):null!==u&&(u.removeAttribute(o.ATTRIBUTE_BIS_ID),e.removeAttribute(o.ATTRIBUTE_BIS_ID))}}catch(j){}}CheckIfAd(j){const Z=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let e=!1;for(let u=0;u<Z.length&&!e;u++){const i=Z[u];let M=j.querySelectorAll(i);if(e=this.GetTextCustom(M),e||(e=this.GetTextFromXlink(M)),e||(e=this.GetTextIfUseCanvas(M)),e){j.firstElementChild.setAttribute(o.ATTRIBUTE_BIS_LABEL,"fb_feed_ad");break}}return!!e}GetTextCustom(j){for(let Z=0;Z<j.length;Z++){const e=j[Z];let u=e.innerText,M=e.getAttribute(this.options.attributeWithSponsorAlly),m=M?[u,M]:u;if("string"==typeof u&&u.length&&this.isTagSponsored(m))return!0;if(u&&u.length>=2&&!e.hasAttribute(o.ATTRIBUTE_BIS_LABEL)){let j=i.GetVisibleSpansText(e,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(j!==u&&j!==M&&"string"==typeof j&&j.length&&this.isTagSponsored(j))return!0}}return!1}GetTextFromXlink(j){let Z="";for(let e of j){if(!e.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const j=e.parentElement;let u="";if(j?.hasAttribute("bis_processed")&&j?.hasAttribute(o.ATTRIBUTE_BIS_LABEL))continue;const i=Array.from(j.children);if(i&&i.forEach((j=>{let Z=j.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const e=document.querySelector(Z);e&&("text"===e.nodeName.toLowerCase()?u+=e.textContent:"svg"===e.nodeName.toLowerCase()&&(u=this.GetTextFromXlink([e.firstElementChild])))})),j.setAttribute("bis_processed",""),this.isTagSponsored(u))return Z=u,j.removeAttribute("bis_processed"),Z;Z=""}return Z}GetTextIfUseCanvas(j){let Z="";for(let e of j){if("canvas"!==e.nodeName.toLowerCase()||e.hasAttribute(o.ATTRIBUTE_BIS_LABEL))continue;let j=this.CheckAndGetFieldName(e);if("string"==typeof j&&this.isTagSponsored(j)){Z=j;break}}return Z}CheckAndGetFieldName(j){if(j.hasAttribute("bis-text"))return j.getAttribute("bis-text");let Z=m.EmptyMessage;Z.type=o.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,Z.content={attribute:"bis-text"},window.postMessage({attribute:"bis-text"},window.location.origin)}AddHiddenTextTags(j){const Z=j.querySelectorAll("svg>use");if(Z)for(let j=0;j<Z.length;j++){const e=Z[j],u=e.parentElement;let i=e.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let M=document.querySelector(i).cloneNode(!0);M.style.display="none",M.id=M.id+"_bis",u&&u.appendChild(M)}}isTagSponsored(j){let Z=!1;if(!j)return Z;if("string"==typeof j)Z=this.fbConfig.SPONSORED_TEXTS.some((Z=>Z===j));else for(let e of j)if(Z=this.fbConfig.SPONSORED_TEXTS.some((j=>j===e)),Z)break;return Z}GetAboutPageLink(j){let Z="",e=this.fbConfig.ABOUT_SECTION_CONFIG,u=j.querySelectorAll(e.QUERY_ABOUT_PAGE_HREF);if(!u?.length)return Z;let i="";for(let Z=0;Z<u.length;Z++){let M=u[Z];if(!M.href)continue;if(!e.ABOUT_PAGE_BAD_WORDS_MATCHES.every((j=>-1===M.href.indexOf(j))))continue;let o=j.getBoundingClientRect().top,m=M.getBoundingClientRect();m.top>o&&m.top-o<=e.MAX_DISTANCE_FROM_POST_TOP&&(i=M.href)}if(!i.length)return Z;let M=i.substring(e.HREF_PREFIX.length,i.length),o=M.substring(0,M.search(/(\/|\?)/));if("profile.php"===o&&M.includes("id=")){const j=new RegExp(e.QUERY_GET_USER_ID_FROM_HREF);o=M.match(j),o&&o.length&&o[1]&&(o=o[1])}return Z=e.ABOUT_PAGE_TEMPLATE.replace("%1",o),Z}get isValidUrl(){return!this.fbConfig.FEED_PAGE.INVALID_URL_PATHS.some((j=>window.location.href.includes(j)))}addCoverImageSrcAttribute(j){let Z=j.querySelector(this.fbConfig.FEED_PAGE.COVER_IMAGE_QUERY);if(Z&&Z.hasAttribute("src")){let e=Z.getAttribute("src");j.setAttribute("data-cover-image-src",e)}}}},2300:(j,Z,e)=>{const u=e(655),i=e(2880),M=e(7678),o=e(1568);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.fbConfig=u,this.fbMarketplace=null,this.fbMarketplaceObserver=null}ActualizeDetector(){return this.fbMarketplace=this.MainContainer,!!this.fbMarketplace}get MainContainer(){return document.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.CONTAINER)}ActivateMutationObserver(){this.fbMarketplace?(this.fbMarketplaceObserver||(this.fbMarketplaceObserver=new MutationObserver(this.DetectCandidates.bind(this,o.AD_DETECTOR_INITIATOR_MUTATION)),this.fbMarketplaceObserver.observe(this.fbMarketplace,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.CARDS);if(j?.length)for(let Z=0;Z<j.length;Z++){const e=j[Z];let u=i.GetElementSize(e);if(this.addCoverImageSrcAttribute(e),!e.hasAttribute(o.ATTRIBUTE_BIS_ID)&&M.IsInitiallyRendered(e,u)&&(this.addCoverImageSrcAttribute(e),this.CheckIfAd(e))){let j;if(this.AdBlockerAgent.IsEnabledForFacebook()&&(M.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SATELITE_SPONSORED_STRING)),j=this.HideAd(e,u,o.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE)),this.CheckIfAdRendered(e,M.GetMinImgsSpacePercentag(this.fbConfig,o.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))){let Z=i.GenerateAndSetBisIdToFBAds(e),u=this.options.extractAdStaticPartTimeoutMs+i.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.addCoverImageSrcAttribute(e),setTimeout(this.ExtractAd.bind(this,Z,j,o.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE),u)}}}}addCoverImageSrcAttribute(j){let Z=j.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.COVER_IMAGE_QUERY);if(Z&&Z.hasAttribute("src")&&!j.hasAttribute("data-cover-image-src")){let e=Z.getAttribute("src");j.setAttribute("data-cover-image-src",e)}}CheckIfAd(j){let Z=!1;if(!j||!this.MainContainer)return Z;const e=j.getBoundingClientRect();let u=Array.from(this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSOR_BLOCKS));if(!u?.length)return Z;for(let i of u){const u=i.getBoundingClientRect();if(u.x-e.x<=5&&u.x-e.x>=-5){let e=M.GetVisibleSpansText(i,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((j=>-1!==e.indexOf(j)))){j.setAttribute(o.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),Z=!0;break}}else if(this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH){let e=j;for(let j of this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH)if(e[j])e=e[j];else if(j.includes(",")){const Z=j.split(",");e=e[Z[0]](Z[1])}if(e){let u=M.GetVisibleSpansText(e,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((j=>-1!==u.indexOf(j)))){j.setAttribute(o.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),Z=!0;break}}}}return Z||(Z=this.checkAHref(j)),Z}checkAHref(j){return!!j.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSORED_HREF_CHECK)}GetAboutPageLink(j){let Z="",e=this.fbConfig.ABOUT_SECTION_CONFIG,u=j.querySelector(`*[${o.ATTRIBUTE_BIS_LABEL}='fb_marketplace_ad']`),i=j.querySelectorAll(`a[href^='${e.HREF_PREFIX}'`);if(u&&i&&i.length){let M="",o=u.getBoundingClientRect().top,m=o-j.getBoundingClientRect().top;for(let j=0;j<i.length;j++){let Z=i[j].getBoundingClientRect();i[j].href&&Z.top<o&&o-Z.top<m&&(m=o-Z.top,M=i[j].href)}if(M.length){let j=M.substring(e.HREF_PREFIX.length,M.length),u=j.substring(0,j.search(/(\/|\?)/));if("profile.php"===u&&j.includes("id=")){const Z=new RegExp(e.QUERY_GET_USER_ID_FROM_HREF);u=j.match(Z),u&&u.length&&u[1]&&(u=u[1])}Z=e.ABOUT_PAGE_TEMPLATE.replace("%1",u)}}return Z}}},1899:(j,Z,e)=>{const u=e(655),i=e(2880),M=e(7678),o=e(1568),m=e(8384);e(1568);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.fbConfig=u,this.fbRightColumn=null,this.fbRightColumnObserver=null,this.options=Z}ActualizeDetector(){return this.fbRightColumn=this.getRightColumnContainer(),!!this.fbRightColumn}ActivateMutationObserver(){this.fbRightColumn?(this.fbRightColumnObserver||(this.fbRightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,o.AD_DETECTOR_INITIATOR_MUTATION)),this.fbRightColumnObserver.observe(this.fbRightColumn,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CARDS);if(j?.length)for(let Z=0;Z<j.length;Z++){let e=j[Z],u=null,w=Array.from(this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.SATELITE_SPONSORED_STRING)),_=i.GetElementSize(e);if(M.IsInitiallyRendered(e,_))if(e.hasAttribute(o.ATTRIBUTE_BIS_ID))this.CheckIfAdRotated(e)&&e.removeAttribute&&(e.removeAttribute(o.ATTRIBUTE_BIS_ID),e.removeAttribute(o.ATTRIBUTE_BIS_SIZE),e.removeAttribute(o.ATTRIBUTE_BIS_STATUS),m.q&&m.B&&"border: 6px solid green !important;"===e.style.cssText&&(e.style.cssText=""));else if(this.CheckIfAd(e,w)&&(this.AdBlockerAgent.IsEnabledForFacebook()&&(M.HideSateliteSponsoredString(this.fbConfig,w),u=this.HideAd(e,_,o.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)),this.CheckIfAdRendered(e,M.GetMinImgsSpacePercentag(this.fbConfig,o.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)))){let j=i.GenerateAndSetBisIdToFBAds(e),Z=this.options.extractAdStaticPartTimeoutMs+i.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);setTimeout(this.ExtractAd.bind(this,j,u,o.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN),Z)}}}CheckIfAd(j,Z){const e=this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IMPOSSIBLE_HREF_REG_FOR_AD,u=this.fbConfig.SPONSORED_TEXTS;if(Z?.length)for(let j of Z){let Z=j.innerText;if(u.some((j=>j===Z)))return!0}const i=Array.from(j.querySelectorAll(`${this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IF_AD}, [${this.options.attributeWithSponsorAlly}]`));return!!i.length&&i.some((j=>{const Z=j.href;if(-1===Z?.indexOf(e))return!0;const i=j.getAttribute(this.options.attributeWithSponsorAlly);return!!i&&u.some((j=>i===j))}))}CheckIfAdRotated(j){let Z=!1;if(j&&"extracted"===j.getAttribute(o.ATTRIBUTE_BIS_STATUS)){let e=0,u=0,i=0,M=j.querySelectorAll("*");M&&M.length&&(M.forEach((j=>{j.getAttribute(o.ATTRIBUTE_BIS_SIZE)?e+=1:u+=1})),0===e&&u>0?Z=!0:e>0&&u>0&&(i=u/M.length*100|0,i>50&&(Z=!0)))}return Z}getRightColumnContainer(){return document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER)}}},1454:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j){this.id=j}InjectDetector(){if(document.head){let j=document.createElement("script");this.setAttributes(j),document.head.appendChild(j)}}setAttributes(j){const Z=u.getURL("../executors/facebook.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}}},7948:(j,Z,e)=>{const u=e(655),i=e(7678),M=e(2880),o=e(1568);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.fbConfig=u,this.fbWatch=null,this.fbWatchObserver=null}ActualizeDetector(){return this.fbWatch=this.FeedWatchContainer,!!this.fbWatch}ActivateMutationObserver(){this.fbWatch?(this.fbWatchObserver||(this.fbWatchObserver=new MutationObserver(this.DetectCandidates.bind(this,o.AD_DETECTOR_INITIATOR_MUTATION)),this.fbWatchObserver.observe(this.fbWatch,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedWatchContainer(){const j=this.fbConfig.FEED_WATCH_PAGE.FEED_WATCH_QUERIES,Z=j.length;let e=!1,u=null;for(let i=0;i<Z&&!e;i++){let Z=j[i],M=Array.from(document.querySelectorAll(Z));if(!M.length)continue;let o=M.filter((j=>j.children&&j.children.length>2));o.length&&1===o.length&&(u=o[0],e=!0)}return u}DeactivateMutationObserver(){this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.fbWatch;if(j){let Z=Array.from(j.children);for(let j=0;j<Z.length;j++){const e=Z[j];let u=M.GetElementSize(e);if(!e.hasAttribute(o.ATTRIBUTE_BIS_ID)&&i.IsInitiallyRendered(e,u)&&this.CheckIfAd(e)){let j="";if(this.AdBlockerAgent.IsEnabledForFacebook()&&(j=this.HideAd(e,u,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH)),this.CheckIfAdRendered(e,i.GetMinImgsSpacePercentag(this.fbConfig,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH))){this.addCoverImageSrcAttribute(e);let Z=M.GenerateAndSetBisIdToFBAds(e),u=this.options.extractAdStaticPartTimeoutMs+M.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(e),setTimeout(this.ReadyToExtractAd.bind(this,Z,j),u)}}}}}ReadyToExtractAd(j,Z){try{if(j){let e=document.querySelector(`[${o.ATTRIBUTE_BIS_ID}=${j}]`),u=e.querySelector(`[${o.ATTRIBUTE_BIS_LABEL}="fb_watch_ad"]`);e&&u?this.ExtractAd(j,Z,o.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH):(u.removeAttribute(o.ATTRIBUTE_BIS_ID),e.removeAttribute(o.ATTRIBUTE_BIS_ID))}}catch(j){}}CheckIfAd(j){const Z=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let e=!1;for(let u=0;u<Z.length&&!e;u++){const i=Z[u];let M=j.querySelectorAll(i);if(e=this.GetTextCustom(M),e||(e=this.GetTextFromXlink(M)),e||(e=this.GetTextIfUseCanvas(M)),e){j.firstElementChild.setAttribute(o.ATTRIBUTE_BIS_LABEL,"fb_watch_ad");break}}return!!e}GetTextCustom(j){for(let Z=0;Z<j.length;Z++){const e=j[Z];let u=e.innerText,M=e.getAttribute(this.options.attributeWithSponsorAlly),m=M?[u,M]:u;if("string"==typeof u&&u.length&&this.isTagSponsored(m))return!0;if(u&&u.length>=2&&!e.hasAttribute(o.ATTRIBUTE_BIS_LABEL)){let j=i.GetVisibleSpansText(e,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(j!==u&&j!==M&&"string"==typeof j&&j.length&&this.isTagSponsored(j))return!0}}return!1}GetTextFromXlink(j){let Z="";for(let e of j){if(!e.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const j=e.parentElement;let u="";if(j?.hasAttribute("bis_processed")&&j?.hasAttribute(o.ATTRIBUTE_BIS_LABEL))continue;const i=Array.from(j.children);if(i&&i.forEach((j=>{let Z=j.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const e=document.querySelector(Z);e&&("text"===e.nodeName.toLowerCase()?u+=e.textContent:"svg"===e.nodeName.toLowerCase()&&(u=this.GetTextFromXlink([e.firstElementChild])))})),j.setAttribute("bis_processed",""),this.isTagSponsored(u))return Z=u,j.removeAttribute("bis_processed"),Z;Z=""}return Z}GetTextIfUseCanvas(j){let Z="";for(let e of j){if("canvas"!==e.nodeName.toLowerCase()||e.hasAttribute(o.ATTRIBUTE_BIS_LABEL))continue;let j=this.CheckAndGetFieldName(e);if("string"==typeof j&&this.isTagSponsored(j)){Z=j;break}}return Z}AddHiddenTextTags(j){const Z=j.querySelectorAll("svg>use");if(Z)for(let j=0;j<Z.length;j++){const e=Z[j],u=e.parentElement;let i=e.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let M=document.querySelector(i).cloneNode(!0);M.style.display="none",u&&u.appendChild(M)}}isTagSponsored(j){let Z=!1;if(!j)return Z;if("string"==typeof j)Z=this.fbConfig.SPONSORED_TEXTS.some((Z=>Z===j));else for(let e of j)if(Z=this.fbConfig.SPONSORED_TEXTS.some((j=>j===e)),Z)break;return Z}GetAboutPageLink(j){let Z="",e=this.fbConfig.ABOUT_SECTION_CONFIG,u=j.querySelectorAll(e.HREF_PREFIX_WATCH);if(!u?.length)return Z;let i="";for(let Z=0;Z<u.length;Z++){let M=u[Z];if(!M.href)continue;if(!e.ABOUT_PAGE_BAD_WORDS_MATCHES.every((j=>-1===M.href.indexOf(j))))continue;let o=j.getBoundingClientRect().top,m=M.getBoundingClientRect();m.top>o&&m.top-o<=e.MAX_DISTANCE_FROM_POST_TOP&&(i=M.href)}if(!i.length)return Z;let M=i.substring(e.HREF_TEMPLATE_WATCH.length,i.length),o=M.substring(0,M.search(/(\/|\?)/));if("profile.php"===o&&M.includes("id=")){const j=new RegExp(e.QUERY_GET_USER_ID_FROM_HREF);o=M.match(j),o&&o.length&&o[1]&&(o=o[1])}return Z=e.ABOUT_PAGE_TEMPLATE.replace("%1",o),Z}addCoverImageSrcAttribute(j){let Z=j.querySelector(this.fbConfig.FEED_WATCH_PAGE.COVER_IMAGE_QUERY);if(Z&&Z.hasAttribute("src")){let e=Z.getAttribute("src");j.setAttribute("data-cover-image-src",e)}}}},3162:(j,Z,e)=>{const u=e(2880),i=e(9358);class M{static GetHyperlinkEmbeddedTargetUrlDataList(j,Z,e){let i,M,o,m=u.QuerySelectorAll(Z,"A[href]"),w=[];for(var _=0;_<m.length;_++)if(i=m[_],!u.IsInFilterList(e,i.href)){M=u.GetElementSize(i),o=M.w*M.h;let j=i.querySelectorAll("img, canvas");if(j.length){let Z,e;for(var x=0;x<j.length;x++)Z=u.GetElementSize(j[x]),e=Z.w*Z.h,e>o&&(o=e,M.w=Z.w,M.h=Z.h)}o>=100&&u.isValidUrl(i.href)&&w.push({href:i.href,square:o})}return w&&w.length,w}static GetDocumentEmbeddedTargetUrlDataList(j,Z,e){let u=[this.strategyStrictFinalUrl,this.strategyScriptClickTag,this.strategyAppnexus,this.strategyNoscriptAnchors,this.strategyScriptAndMetaContentJsonKeyWords,this.strategyLookingForPropertyInsideWindow],i=this.processStrategyList(Z,u,e);return i&&i.length,i}static processStrategyList(j,Z,e){let u=[];for(let i of Z)try{let Z=i(j,e);Z&&Z.href&&u.push(Z)}catch(j){}return u}static strategyStrictFinalUrl(j,Z){for(var e=u.QuerySelectorAll(j,'script[type="application/json"]'),i=0;i<e.length;i++){var M=e[i].outerText;if(M.length>1&&"{"===M[0]&&"}"===M[M.length-1]&&-1!=M.indexOf("targets")&&-1!=M.indexOf("redirectUrl")&&-1!=M.indexOf("finalUrl")){var o=JSON.parse(M);if(void 0!==o.targets&&void 0!==o.targets.redirectUrl&&void 0!==o.targets.redirectUrl.finalUrl){let j=o.targets.redirectUrl.finalUrl;if(u.isValidUrl(j))return{href:j,square:1e6}}}}}static strategyScriptClickTag(j,Z){let e=u.QuerySelectorAll(j,"script");for(let j=0;j<e.length;j++){let Z=e[j].outerText;if(Z.length>1&&-1!==Z.indexOf("clickTag")&&(Z=Z.replace(/\s/g,""),Z.startsWith('varclickTag="')&&Z.endsWith('";'))){let j=Z.indexOf('"'),e=Z.lastIndexOf('"'),i=Z.substring(j+1,e);if(u.isValidUrl(i))return{href:i,square:1e6}}}}static strategyAppnexus(j,Z){let e=u.QuerySelectorAll(j,".GoogleActiveViewElement script"),i=Array.from(e).map((j=>j.innerHTML)).filter((j=>j.indexOf("APPNEXUS.placement")>=0));for(let j=0;j<i.length;j++){let Z=M(i[j]);if(u.isValidUrl(Z))return{href:Z,square:1e6}}function M(j){let Z=(j=j.replace(/(\r\n|\n|\r|\s)/gm,"")).match(/APPNEXUS.placement\(".+","(.+)",.+/);return Z&&Z.length>1?Z[1]:null}}static strategyNoscriptAnchors(j,Z){let e=u.QuerySelectorAll(j,"noscript");for(let Z=0;Z<e.length;Z++){let i=j.createElement("div");i.innerHTML=e[Z].innerText;let M=i.querySelector("a[href]");if(M){let j=M.getAttribute("href");if(u.isValidUrl(j))return{href:j,square:1}}}}static strategyScriptAndMetaContentJsonKeyWords(j,Z,e=null){if(e){let j=M(e,Z);return u.isValidUrl(j)?{href:j,square:999999}:void 0}let i=u.QuerySelectorAll(j,"script, meta[content]");for(let j of i){let e="script"===j.nodeName.toLowerCase()?j.outerText:j.getAttribute("content");if(e.length>1&&"{"===e[0]&&"}"===e[e.length-1]){let j=M(JSON.parse(e),Z);if(u.isValidUrl(j))return{href:j,square:999999}}}function M(j,Z,e=[]){let i=Z.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(e.length>i)return null;let m=Object.getOwnPropertyNames(j);for(let i of m)try{let m=j[i];if(!m)return null;let w=e.concat(i);if("string"==typeof m&&m.length>1&&"{"===m[0]&&"}"===m[m.length-1]){let j=M(JSON.parse(m),Z,w);if(j)return j}if("object"==typeof m){let j=M(m,Z,w);if(j)return j}else if("string"==typeof m&&o(i,Z)&&u.isValidUrl(m))return m}catch(j){}return null}function o(j,Z){let e=function(j){let Z=j.toLowerCase();return Z.replace(/[^a-zA-Z]+/g,"")}(j),u=Z.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let j of u){if(e===j)return!0}return!1}}static strategyLookingForPropertyInsideWindow(j,Z){const e=j.defaultView,u=Z.WINDOW_PROPERTY_NAMES;for(let i of u){let u=e[i];if(u){if("string"==typeof u)return!u.search(/^http/)>-1&&(u=o(u)),{href:u,square:1e6};if("object"==typeof u)return M.strategyScriptAndMetaContentJsonKeyWords(j,Z,u)}}function o(e){try{const u=i.decode(e);if(u){if("string"==typeof u&&"{"===u[0]){let e=JSON.parse(u);return M.strategyScriptAndMetaContentJsonKeyWords(j,Z,e).href}return""}}catch(j){}}}}j.exports=M},9877:(j,Z,e)=>{const u=e(2880),i=e(7817),M=e(3162);class o{constructor(j,Z,e,i,M){this.id=e,this.fullIdStr=u.GetFullIdStr(j,Z,e),this.init=!1,this.targetUrlDataList=[],this.targetUrlDetected=!1,this.IframesIO=null,this.activationTargetUrlCandidates=i,this.html5TargetUrlDetectionConfig=M.GetHtml5TargetUrlDetectionConfig(),this.blacklistedTargetUrls=M.BlacklistTargetUrl,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}get FrameTargetUrl(){return this.targetUrlDataList}Init(j){return j&&(this.IframesIO=j,this.init=!0),this.init}DetectTargetUrl(j,Z){if(this.init&&!this.targetUrlDetected&&this.html5TargetUrlDetectionConfig)if(this.onDetectTargetUrlCallBack=Z,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),j),this.activationTargetUrlCandidates&&this.activationTargetUrlCandidates.length)this.targetUrlDataList=this.activationTargetUrlCandidates,this.TargetUrlDetected();else{let j=M.GetHyperlinkEmbeddedTargetUrlDataList(this.id,document,this.blacklistedTargetUrls);this.targetUrlDataList=this.targetUrlDataList.concat(j);let Z=M.GetDocumentEmbeddedTargetUrlDataList(this.id,document,this.html5TargetUrlDetectionConfig);Z=o.filterTargetUrlDataList(Z,this.blacklistedTargetUrls),this.targetUrlDataList=this.targetUrlDataList.concat(Z),this.targetUrlDataList&&this.targetUrlDataList.length?this.TargetUrlDetected():this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrlData.bind(this))}}static filterTargetUrlDataList(j,Z){if(!j||0===j.length)return[];return j.filter((j=>{if(j.href&&0===j.href.search(/^http/)&&!u.IsInFilterList(Z,j.href))return!0}))}onGetWindowEmbeddedTargetUrlData(j){let Z=o.filterTargetUrlDataList(j,this.blacklistedTargetUrls);this.targetUrlDataList.push(Z),this.concatTargetUrlsDataIfNeed(),!Z||Z.length,this.TargetUrlDetected()}concatTargetUrlsDataIfNeed(){this.targetUrlDataList[0].length&&(this.targetUrlDataList=this.targetUrlDataList.flat(1))}onTargetUrlDetectionTimout(){this.targetUrlDetected||this.TargetUrlDetected()}TargetUrlDetected(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}static DetectTargetUrlFromWindowObj(j,Z,e){var u=[];let o=e.GetHtml5TargetUrlDetectionConfig(),m=e.BlacklistTargetUrl;try{let e=M.GetHyperlinkEmbeddedTargetUrlDataList(j,Z.document,o);u=u.concat(e)}catch(j){}try{let e=M.GetDocumentEmbeddedTargetUrlDataList(j,Z.document,o);e=this.filterTargetUrlDataList(e,m),u=u.concat(e)}catch(j){}try{let e=i.GetWindowEmbeddedTargetUrlDataList(j,Z,o,this.defaultWindowProps);e=this.filterTargetUrlDataList(e,m),u=u.concat(e)}catch(j){}return u&&u.length,u}}j.exports=o},7817:j=>{j.exports=class{static GetWindowEmbeddedTargetUrlDataList(j,Z,e){let u=[function(j){if(void 0!==j.clickTag&&M(j.clickTag))return{href:j.clickTag,square:1000001}},function(j){if(void 0!==j.adData){if(void 0!==j.adData.destination_url&&M(j.adData.destination_url))return{href:j.adData.destination_url,square:1000001};if(void 0!==j.adData.redirect_url&&M(j.adData.redirect_url))return{href:j.adData.redirect_url,square:1000001}}},function(j){if(void 0!==j.BF&&void 0!==j.BF.Parameters&&void 0!==j.BF.Parameters.targeturl&&M(j.BF.Parameters.targeturl))return{href:j.BF.Parameters.targeturl,square:1000001}},function(j){if(void 0!==j.ADAPT&&void 0!==j.ADAPT.symbols&&void 0!==j.ADAPT.symbols.stage&&void 0!==j.ADAPT.symbols.stage.clickUrl&&M(j.ADAPT.symbols.stage.clickUrl))return{href:j.ADAPT.symbols.stage.clickUrl,square:1000001}},function(j){if(void 0!==j.admixAPI&&void 0!==j.admixAPI.ownerBanner&&void 0!==j.admixAPI.ownerBanner.clickUrl&&M(j.admixAPI.ownerBanner.clickUrl))return{href:j.admixAPI.ownerBanner.clickUrl,square:1000001}},function(j,Z){let e=function(j,Z,e){let u=function(j,Z){let e=Object.getOwnPropertyNames(j);return e.filter((j=>Z.WINDOW_PROPERTY_NAMES.indexOf(j)<0))}(Z,e);if(!u||0===u.length)return null;return o(Z,u,e)}(0,j,Z);if(M(e))return{href:e,square:999999}}],i=function(j,Z,e){let u=[];for(let i of Z)try{let Z=i(j,e);Z&&Z.href&&u.push(Z)}catch(j){}return u}(Z,u,e);return i&&i.length,i;function M(j){return"string"==typeof j&&j.length>0&&(-1!==j.indexOf("http")||-1!==j.indexOf("//"))}function o(j,Z,e,u=[]){let i=e.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(u.length>i)return null;for(let i of Z)try{let Z=j[i];if(!Z)return null;let w=u.concat(i);if("object"==typeof Z){let j=o(Z,Object.getOwnPropertyNames(Z),e,w);if(j)return j}else if("string"==typeof Z&&m(i,e)&&M(Z))return Z}catch(j){}return null}function m(j,Z){let e=function(j){let Z=j.toLowerCase();return Z.replace(/[^a-zA-Z]+/g,"")}(j),u=Z.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let j of u){if(e===j)return!0}return!1}}}},3375:(j,Z,e)=>{const u=e(8384),i=e(1568),M=e(5364),o=e(5337),m=e(5972),w=e(9944),_=e(9346);j.exports=class extends _{constructor(j,Z,e){super(j),this.id=j,this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.instaConfig=Z.GetInstagramConfig,this.AdBlockerAgent=e,this.DetectorFeed=null,this.DetectorStories=null,this.headersEntries=[],this.ActivateVideoTrafficDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(i.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),0)}ActivateDetector(j){j===i.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new o(this.id,this.instaConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.DetectorStories=new w(this.id,this.instaConfig.STORIES.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.DetectorFeed.isVideo=this.isVideo.bind(this),this.DetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorFeed.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorFeed.HideElement=this.HideElementForInstagramFeedOnly.bind(this),this.DetectorFeed.isCarousel=this.isCarousel.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this),this.DetectorStories.HideElement=this.HideElement.bind(this),this.DetectorStories.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorStories.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorStories.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector=new m(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.instaConfig.TRAFFIC_LISTENER_CONFIG))}ActivateDetectors(){this.GetHeadersDataForLoader(),this.DetectorFeed.ActivateDetector(),this.DetectorStories.ActivateDetector()}DeactivateDetectors(j){this.DetectorFeed.DeactivateDetector(j),this.DetectorStories.DeactivateDetector(j)}processAndSendInstagramAd(j,Z,e){let o=document.querySelector(`[${i.ATTRIBUTE_BIS_ID}=${j}]`);o&&(this.addFieldsToCandidateAboutHeaders(Z),M.SendCandidatePlacementsCount(this.id,1,i.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM,null),M.SendAdCandidates(this.id,[Z],i.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM,null),u.q&&u.B&&(o.style.cssText+=e?i.STYLES_OUTLINE_VIDEO_AD:i.STYLES_OUTLINE_SUCCESS_DETECT))}GetHeadersDataForLoader(){let j=this.instaConfig.LOAD_USER_DATA.HEADERS_VALUES_QUERIES;for(let Z of j){let j=new RegExp(Z[1]),e=Z[0],u=new RegExp(e,"i"),i=Array.from(document.querySelectorAll("script")).filter((j=>j.innerHTML.search(u)>-1));if(!i.length)return;let M=i[0].innerHTML.match(j)[1];this.headersEntries.push([e,M])}}addFieldsToCandidateAboutHeaders(j){this.headersEntries.length&&j.aboutPageUrl&&(j.headers=Object.fromEntries(this.headersEntries))}}},5337:(j,Z,e)=>{const u=e(2880),i=e(1568),M=e(655);j.exports=class extends M{constructor(j,Z,e,u){super(j,Z,e),this.instaConfig=u,this.timeOptions=this.instaConfig.FEED.TIMEOUT_OPTIONS,this.id=j,this.adBlockerAgent=e,this.feedContainer=null,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.processInstagramAdsInterval=null}HideElement(j){}setSizesAndIdForAllElements(j){}getAdInstagramObject(j,Z,e,u,i,M){}isCarousel(j){}isVideo(j,Z){}removeCloneElement(j){}ActualizeDetector(){return this.feedContainer=this.FeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processFeedAds()}get FeedContainer(){const j=this.instaConfig.FEED.CONTAINER_QUERIES,Z=this.instaConfig.FEED.CONTAINER_MIN_HEIGHT;for(let e of j){let j=document.querySelector(e);if(j){if(j.offsetHeight>=Z)return j}}}checkAdBlockerAndHide(j){this.adBlockerAgent.IsEnabledForInstagram()&&!this.adBlockerAgent.IsElementHidden(j)&&(this.HideElement(j),this.adBlockerAgent.SetHiddenAmount(1))}processFeedAds(){let j=this.detectPromotedPosts();if(j&&j.length)for(let Z of j){u.GetElementSize(Z);if(!Z.hasAttribute(i.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(Z);let j=u.GenerateAndSetBisIdToInstagramAds(Z),e=this.createHTML(Z);const M=this.getAdvertiserName(Z),o=this.getTargetUrl(Z),m=this.getAboutPageUrl(Z);this.AddHiddenTextTags(e);const w=this.isCarousel(Z),_=this.isVideo(Z,this.instaConfig.TAGS_FOR_VIDEO_CHECK),x=this.getAdInstagramObject(Z,e,M,o,m,i.INSTAGRAM_AD_PLACEMENT_TYPE_FEED);_&&!w&&(x.videoData={}),w&&(x.carouselSlidesSources=[]),this.removeCloneElement(e),this.checkAdBlockerAndHide(Z);let K=setTimeout((()=>{this.ExtractAd.call(this,j,x,_),clearTimeout(K)}),100)}}}AddHiddenTextTags(j){const Z=j.querySelectorAll("svg>use");if(Z)for(let j=0;j<Z.length;j++){const e=Z[j],u=e.parentElement;let i=e.getAttribute("xlink:href");let M=document.querySelector(i).cloneNode(!0);M.style.display="none",M.id=M.id+"_bis",u&&u.appendChild(M)}}RemoveHideStylesFromClone(j){let Z=j.querySelector("div"),e=Z?Z.firstElementChild:null,u=e?e.firstElementChild:null;return u?(e.style.cssText=e.style.cssText.replace(i.STYLES_HIDE_INSTAGRAM_FEED_AD[1],""),u.style.cssText=u.style.cssText.replace(i.STYLES_HIDE_INSTAGRAM_FEED_AD[0],""),j):j}detectPromotedPosts(){if(!this.feedContainer)return[];const j=this.instaConfig.FEED.IMG_SPACE_PERCENTAGE,Z=this.instaConfig.PROMOTED_ALIASES;let e=Array.from(this.feedContainer.children),u=[];for(let i of e)if(this.IsPostContentRendered(i,j)){const j=i.querySelectorAll(this.instaConfig.FEED.PROMOTED_QUERY);for(let e of j){if(!e)continue;let j=e.hasAttribute("xlink:href")?this.GetTextFromXlink(e):e.innerText;if(j.includes("#"))continue;if(Z.some((Z=>j.search(Z)>=0))){u.push(i);break}}}return u}GetTextFromXlink(j){let Z=j.getAttribute("xlink:href");if(Z){return document.querySelector(Z).textContent}return""}IsPostContentRendered(j,Z){let e=!1;if(j){let i=u.GetFullElementSize(j);if(i.w>0){u.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,j,i).some((j=>j>=Z))&&(e=!0)}}return e}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0),M=this.feedContainer,o=M.cloneNode();return this.styleFixes(o),this.setWrapperStyles(M,o),o.appendChild(i),e.appendChild(o),Z.appendChild(u),Z.appendChild(e),Z}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+` max-width: ${this.maxWidthContainer(j)}`}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}styleFixes(j){j.style.paddingBottom=0}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll('body style, body link[rel="stylesheet"]');return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return Z&&Z.forEach((Z=>{let e=Z.cloneNode(!0);j.appendChild(e)})),j}getAboutPageUrl(j){const Z=this.instaConfig.FEED.ABOUT_PAGE_URL_QUERY;let e=j.querySelector(Z);return e&&e.href?e.href:""}getAdvertiserName(j){const Z=this.instaConfig.FEED.ADVERTISER_NAME_QUERY;let e=j.querySelector(Z),u="";if(e){if(u=e.innerText,u)return u;if(u=e.innerHTML,-1===u.search(/\<\//))return u}return""}getTargetUrl(j){const Z=this.instaConfig.FEED.TARGET_URL_QUERY;let e=j.querySelector(Z),u="";return e&&e.href&&(u=e.href),u}}},9944:(j,Z,e)=>{const u=e(2880),i=e(1568),M=e(655);j.exports=class extends M{constructor(j,Z,e,u){super(j,Z,e),this.instaConfig=u,this.id=j,this.adBlockerAgent=e,this.storyContainer=null,this.storiesObserver=null,this.processInstagramAdsInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}HideElement(j){}setSizesAndIdForAllElements(j){}getAdInstagramObject(j,Z,e,u,i,M){}removeCloneElement(j){}ActualizeDetector(){return this.storyContainer=this.StoryContainer,!!this.storyContainer}ActivateMutationObserver(){this.storyContainer?(this.storiesObserver||(this.storiesObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.storiesObserver.observe(this.storyContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.storyContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processStoriesAds()}processStoriesAds(){let j=this.detectPromotedMarkedStory();if(j&&(u.GetElementSize(j),!j.hasAttribute(i.ATTRIBUTE_BIS_ID))){let Z=u.GenerateAndSetBisIdToInstagramAds(j);this.setSizesAndIdForAllElements(j);const e=this.createHTML(j),M=this.getAdvertiserName(j),o=this.getTargetUrl(j),m=this.getAboutPageUrl(j);this.AddHiddenTextTags(e);const w=this.getAdInstagramObject(j,e,M,o,m,i.INSTAGRAM_AD_PLACEMENT_TYPE_STORY);this.adBlockerAgent.IsEnabledForInstagram(),this.removeCloneElement(e);let _=setTimeout((()=>{this.ExtractAd.call(this,Z,w),clearTimeout(_)}),100)}}AddHiddenTextTags(j){const Z=j.querySelectorAll("svg>use");if(Z)for(let j=0;j<Z.length;j++){const e=Z[j],u=e.parentElement;let i=e.getAttribute("xlink:href");let M=document.querySelector(i).cloneNode(!0);M.style.display="none",M.id=M.id+"_bis",u&&u.appendChild(M)}}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0),M=document.createElement("div");return this.styleFixes(i),this.setWrapperStyles(j,M),M.appendChild(i),e.appendChild(M),Z.appendChild(u),Z.appendChild(e),Z}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll('body style, body link[rel="stylesheet"]');return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return Z&&Z.forEach((Z=>{let e=Z.cloneNode(!0);j.appendChild(e)})),j}detectPromotedMarkedStory(){if(!this.storyContainer)return null;const j=this.instaConfig.STORIES.IMG_SPACE_PERCENTAGE,Z=this.instaConfig.PROMOTED_ALIASES;let e=this.storyContainer;if(this.IsStoryContentRendered(e,j)){const j=e.querySelectorAll(this.instaConfig.STORIES.PROMOTED_QUERY);for(let u of j){if(!u)continue;let j=u.hasAttribute("xlink:href")?this.GetTextFromXlink(u):u.innerText;if(j.includes("#"))continue;if(Z.some((Z=>j.search(Z)>=0)))return e}}return null}GetTextFromXlink(j){let Z=j.getAttribute("xlink:href");if(Z){return document.querySelector(Z).textContent}return""}getAdvertiserName(j){const Z=this.instaConfig.STORIES.ADVERTISER_NAME_QUERY;let e=j.querySelector(Z);return e?e.innerText:""}getTargetUrl(j){const Z=this.instaConfig.STORIES.TARGET_URL_QUERY;let e=j.querySelector(Z),u="";return e&&e.href&&(u=e.href),u}getAboutPageUrl(j){const Z=this.instaConfig.STORIES.ABOUT_PAGE_URL_QUERY;let e=j.querySelector(Z);return e&&e.href?e.href:""}IsStoryContentRendered(j,Z){let e=!1;if(j){let i=u.GetFullElementSize(j);if(i.w>0){u.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,j,i).some((j=>j>=Z))&&(e=!0)}}return e}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+` max-width: ${this.maxWidthContainer(j)}`}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}styleFixes(j){j.style.transform=""}get StoryContainer(){return document.querySelector(this.instaConfig.STORIES.STORY_QUERY)}}},5972:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j,Z){this.id=j,this.AdBlockerAgent=Z}InjectDetector(j,Z){if(document.head){var e=document.createElement("script");this.setAttributes(e),document.head.appendChild(e)}}setAttributes(j){const Z=u.getURL("../executors/insta.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),this.AdBlockerAgent.IsEnabledForInstagram()&&j.setAttribute("ad-opt-on",""),j.src=Z}}},9181:(j,Z,e)=>{const u=e(9346),i=e(9170),M=e(1568),o=e(8384),m=e(5364),w=e(2880),_=e(1291),x=e(8247);j.exports=class extends u{constructor(j,Z,e){super(j),this.id=j,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=e,this.linkedinConfig=Z.LinkedinConfig,this.LinkedinDetectorFeed=null,this.LinkedinDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(M.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.LinkedinDetectorFeed.ActivateDetector(),this.LinkedinDetectorRightColumn.ActivateDetector()}DeactivateDetectors(j){this.LinkedinDetectorFeed.DeactivateDetector(j),this.LinkedinDetectorRightColumn.DeactivateDetector(j)}ActivateDetector(j){j===M.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.LinkedinDetectorFeed=new _(this.id,this.linkedinConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.LinkedinDetectorRightColumn=new x(this.id,this.linkedinConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.LinkedinDetectorFeed.isVideo=this.isVideo.bind(this),this.LinkedinDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorFeed.getAdLinkedinObject=this.getAdLinkedinObject.bind(this),this.LinkedinDetectorFeed.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorFeed.HideElement=this.HideElement.bind(this),this.LinkedinDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorFeed.isCarousel=this.isCarousel.bind(this),this.LinkedinDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.LinkedinDetectorRightColumn.HideElement=this.HideElement.bind(this),this.LinkedinDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorRightColumn.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorRightColumn.getAdLinkedinObject=this.getAdLinkedinObject.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new i(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_l",JSON.stringify(this.linkedinConfig)))}IsAdContentRendered(j,Z){let e=w.GetFullElementSize(j);return w.GetImagesSpacePercentage(this.linkedinConfig.TAGS_FOR_LOADING_CHECK,j,e).some((j=>j>=Z))}processAndSendLinkedinAd(j,Z,e=!1,u=document){let i=u.querySelector(`[${M.ATTRIBUTE_BIS_ID}=${j}]`);i&&(m.SendCandidatePlacementsCount(this.id,1,M.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN,null),m.SendAdCandidates(this.id,[Z],M.MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN,null),o.q&&o.B&&(i.style.cssText+=e?M.STYLES_OUTLINE_VIDEO_AD:M.STYLES_OUTLINE_SUCCESS_DETECT))}}},1291:(j,Z,e)=>{const u=e(655),i=e(1568),M=e(2880);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.id=j,this.feedObserver=null,this.linkedinConfig=u,this.feedContainer=null,this.AdBlockerAgent=e,this.adPlacementType=i.LINKEDIN_AD_PLACEMENT_TYPE_FEED}HideElement(){}setSizesAndIdForAllElements(j){}getAdLinkedinObject(j,Z,e,u,i,M){}doesElementExists(j){}isCarousel(j){}isVideo(j,Z){}IsAdContentRendered(j,Z){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds()}processFeedAds(){this.extractOccurrences()}get getFeedContainer(){const j=this.linkedinConfig.FEED.QUERY_CONTAINER;let Z=document.querySelector(j);return!Z||Z.children.length<3?null:Z}extractOccurrences(){let{allCells:j,minImgSquarePercentage:Z}=this.allCellsAndMinImgSpace();if(j.length)for(let e of j){if(M.GetElementSize(e),e.hasAttribute(i.ATTRIBUTE_BIS_ID))continue;if(!this.IsAdContentRendered(e,Z))continue;let j=M.GenerateAndSetBisIdToLinkedinAds(e);this.setSizesAndIdForAllElements(e);const u=this.createHTML(e),o=this.getTargetUrl(e),m=this.getSocialAdvertiserUrl(e),w=this.getAdvertiserName(e),_=this.isCarousel(e),x=this.isVideo(e,this.linkedinConfig.TAGS_FOR_VIDEO_CHECK),K=this.getUniqueDataId(e);this.removeBisAttribute(u);let C=this.getAdLinkedinObject(e,u,this.adPlacementType,o,m,w,K);if(this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),_&&(C.carouselSlidesData=this.getCarouselSlidesFromDOM(m,e)),e.querySelector("iframe")&&(C.doesHaveIframe=!0),x&&!_){const j=this.getVideoIdAndThumbnail(e);C.videoData=j||{}}setTimeout(this.ExtractAd.bind(this,j,C,x),100)}}allCellsAndMinImgSpace(){let j=[],Z=0;return this.feedContainer&&(j=Array.from(this.feedContainer.children),Z=this.linkedinConfig.FEED.IMG_SPACE_PERCENTAGE),j=j.filter((j=>this.linkedinConfig.FEED.COLLECT_AD_TYPE_EVENT?this.isPromoted(j):this.isPromoted(j)&&!j.querySelector(this.linkedinConfig.FEED.QUERY_CHECK_AD_TYPE_EVENT))),{allCells:j,minImgSquarePercentage:Z}}isPromoted(j){const Z=this.linkedinConfig.FEED.QUERIES_IS_PROMOTED,e=this.linkedinConfig.PROMOTED_ALIASES;let u=!1;for(let i of Z){let Z=Array.from(j.querySelectorAll(i));Z.length&&(u=Z.some((j=>{let Z=j.textContent.trim().toLowerCase();if(Z)return e.some((j=>Z.indexOf(j)>=0))})))}return u}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0),M=this.feedContainer,o=M.cloneNode();return this.styleFixes(o),this.setWrapperStyles(M,o,j),o.appendChild(i),e.appendChild(o),Z.appendChild(u),Z.appendChild(e),Z}setWrapperStyles(j,Z,e){Z.style.cssText=Z.style.cssText+` max-width: ${this.maxWidthContainer(j)}`,Z.style.cssText=Z.style.cssText+` max-height: ${this.maxHeightContainer(e)}`}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}maxHeightContainer(j){return j?j.offsetHeight+"px":"auto"}styleFixes(j){j.style.overflow="hidden"}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll('body style, body link[rel="stylesheet"]');return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),e=document.createElement("meta");return e.setAttribute("charset","UTF-8"),j.append(e),Z&&Z.forEach((Z=>{let e=Z.cloneNode(!0);j.appendChild(e)})),j}getTargetUrl(j){const Z=this.linkedinConfig.FEED.QUERY_TARGET_URL;let e=j.querySelector(Z);return e&&e.href?e.href:""}getSocialAdvertiserUrl(j){const Z=this.linkedinConfig.FEED.QUERY_ADVERTISER_URL;let e=j.querySelector(Z),u="";return e&&e.href?(u=e.href,u):u}getAdvertiserName(j){let Z=j.querySelector(this.linkedinConfig.FEED.QUERY_ADVERTISER_NAME);return Z?Z.innerText.trim():""}getVideoIdAndThumbnail(j){const Z=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.QUERY_VIDEO_TAG_GET_VIDEO_ID,e=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.REGEXP_VIDEO_ID),u=j.querySelector(Z);if(!u)return null;const i=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.ATTRIBUTE_NAME_WITH_VIDEO_ID;let M=u.getAttribute(i);if(!M)return null;let o=M.match(e);return{videoId:o?.groups?.videoId?o.groups.videoId:null,previewImageUrl:M}}getCarouselSlidesFromDOM(j,Z){let e=this.searchFirstImage(Z);if(!e)return[];let u=this.searchMatchedImgId(e);if(!u)return[];let i=this.getAllCodeElements();if(!i.length)return[];let M=this.filterCodeElements(i,u);if(!M.length)return[];let o=this.getSlidesDatas(M,j);return o.length?this.getSlidesImagesSources(o):[]}searchFirstImage(j){return j.querySelector(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_FIRST_IMG)}searchMatchedImgId(j){let Z=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.REGEXP_IMG_ID),e=j.src.match(Z);return e.length&&1!==e.length?e[1]:null}getAllCodeElements(){return Array.from(document.querySelectorAll(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_CODE_ELEMENTS))}filterCodeElements(j,Z){return j.filter((j=>j.innerHTML.includes(Z))).map((j=>"{"===j.innerHTML.trim()[0]?JSON.parse(j.innerHTML):{}))}getSlidesDatas(j,Z){const e=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SOCIAL_ADV_URL,u=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_DATA;let i=j.map((j=>{if(!j.included)return{};let i=j.included.filter((j=>{let u=j;for(let j of e)if(u[j]&&(u=u[j]),Z===u)return!0}));if(!i.length)return!1;let M=i[0];for(let j of u)M[j]&&(M=M[j]);return M}));return i.length?i[0]:[]}getSlidesImagesSources(j){const Z=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_ROOT_URL,e=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_PATH_URL,u=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SLIDE_TEXT;let i=[];for(let M of j){let j=M,o=M,m=M;for(let e of Z)j[e]&&(j=j[e]);if(!j||"string"!=typeof j)break;for(let j of e)o[j]&&(o=o[j]);if(!o||"string"!=typeof o)break;for(let j of u)m[j]&&(m=m[j]);if(!m||"string"!=typeof m)break;let w=j+o,_={source:this.transformToValidUrl(w),text:m};i.push(_)}return i}transformToValidUrl(j){return j.replace(/amp\;/g,"")}removeBisAttribute(j){let Z=j.querySelectorAll(`*[${i.ATTRIBUTE_BIS_ID}]`);Z.length&&Z.forEach((j=>{j.removeAttribute(i.ATTRIBUTE_BIS_ID)}))}getUniqueDataId(j){return j.querySelector(this.linkedinConfig.FEED.QUERY_GET_UNIQUE_ID)?.getAttribute("data-id")}}},8247:(j,Z,e)=>{const u=e(655),i=e(2880),M=e(1568);e(9358);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.rightColumnContainer=null,this.rightColumnObserver=null,this.linkedinConfig=u,this.adPlacementType=M.LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN,this.promotedHeaderHeaderHeight=0}HideElement(){}setSizesAndIdForAllElements(j){}getAdLinkedinObject(j,Z,e,u,i,M){}doesElementExists(j){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer(),!!this.rightColumnContainer}ActivateMutationObserver(){this.getRightColumnContainer()?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,M.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.rightColumnContainer=null,this.isObserverAlreadySet=!1)}getRightColumnContainer(){const j=document.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_CONTAINER);return j&&j.children.length?j:null}isPromoted(j){const Z=j?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_PROMOTED),e=this.linkedinConfig.PROMOTED_ALIASES;let u=!1;if(Z){this.promotedHeaderHeaderHeight=Z.parentElement.offsetHeight;let j=Z.textContent.trim().toLowerCase();u=e.includes(j)}return u}Detector(){this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer(),this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.rightColumnContainer.querySelectorAll(this.linkedinConfig.RIGHT_COLUMN.QUERY_AD_CONTAINER).forEach((j=>{this.isIframe(j)&&this.processIFrame(j)}))}isIframe(j){return!!j?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME)}processIFrame(j){const Z=j.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME),e=Z?.contentDocument;if(this.isPromoted(e)){const Z=[];this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD.forEach((j=>Z.push(...e.querySelectorAll(j)))),this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(j)&&(this.HideElement(j),this.AdBlockerAgent.SetHiddenAmount(Z.length)),this.extractOccurrences(Z,e)}}extractOccurrences(j,Z){j.length&&j.forEach((j=>{if(i.GetElementSize(j),j.hasAttribute(M.ATTRIBUTE_BIS_ID))return;const e=i.GenerateAndSetBisIdToLinkedinAds(j);this.setSizesAndIdForAllElements(j);const u=this.cloneIframeWithAd(Z,j),o=this.getTargetUrl(j);this.removeBisAttribute(u);const m=this.getAdLinkedinObject(j,u,this.adPlacementType,o,"","");setTimeout(this.ExtractAd.bind(this,e,m,!1,Z),100)}))}cloneIframeWithAd(j,Z){const e=document.createElement("html"),u=this.cloneHeadWithStyles(j),i=j.querySelector("body").cloneNode(!0),M=this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD_WRAPPER.find((j=>!!i.querySelector(j))),o=i.querySelector(M),m=i.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IFRAME_STYLES_CONTAINER),w=i.querySelector("script");return w&&w.remove(),m.style.height="auto",m.style.width=`${Z.offsetWidth}px`,o.parentNode.style.height="auto",o.replaceChildren(),o.appendChild(Z.cloneNode(!0)),e.appendChild(u),e.appendChild(i),e}cloneHeadWithStyles(j){const Z=j||document,e=document.createElement("head"),u=Z.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),i=document.createElement("meta");return i.setAttribute("charset","UTF-8"),e.append(i),u&&u.forEach((j=>{let Z=j.cloneNode(!0);e.appendChild(Z)})),e}getTargetUrl(j){return(j.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_TARGET_URL)||j).href||""}removeBisAttribute(j){let Z=j.querySelectorAll(`*[${M.ATTRIBUTE_BIS_ID}]`);Z.length&&Z.forEach((j=>{j.removeAttribute(M.ATTRIBUTE_BIS_ID)}))}}},9170:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j){this.id=j}InjectDetector(j,Z){if(document.head){let j=document.createElement("script");this.setAttributes(j),document.head.appendChild(j)}}setAttributes(j){const Z=u.getURL("../executors/linkedin.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}}},2075:(j,Z,e)=>{const u=e(2629),i=e(1050),M=e(2765),o=e(1568),m=e(5364),w=e(8384),_=e(8792),x=e(9346),K=e(2880);j.exports=class extends x{constructor(j,Z,e){super(j),this.id=j,this.AdBlockerAgent=e,this.pinterestConfig=Z.PinterestConfig,this.onPageRefreshed=this.onPageUrlChanged,this.available=!1,this.pinterestFeedDetector=null,this.pinterestPinDetector=null,this.pinterestSearchDetector=null,this.VideoTrafficDetector=null,this.ActivateVideoTrafficDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(o.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),100)}PageRefreshed(j,Z){this.pageUrl=j,this.ticketId=Z,this.onPageUrlChanged&&this.onPageUrlChanged(j,Z)}ActivateDetector(j){j===o.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.pinterestFeedDetector=new u(this.id,this.pinterestConfig.FEED_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestSearchDetector=new M(this.id,this.pinterestConfig.SEARCH_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestPinDetector=new i(this.id,this.pinterestConfig.PIN_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.pinterestFeedDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestFeedDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestFeedDetector.isCarousel=this.isCarousel.bind(this),this.pinterestFeedDetector.HideElement=this.HideElement.bind(this),this.pinterestFeedDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestFeedDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestFeedDetector.isVideo=this.isVideo.bind(this),this.pinterestFeedDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestFeedDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestPinDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestPinDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestPinDetector.isCarousel=this.isCarousel.bind(this),this.pinterestPinDetector.HideElement=this.HideElement.bind(this),this.pinterestPinDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestPinDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestPinDetector.isVideo=this.isVideo.bind(this),this.pinterestPinDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestPinDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestSearchDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestSearchDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestSearchDetector.isCarousel=this.isCarousel.bind(this),this.pinterestSearchDetector.HideElement=this.HideElement.bind(this),this.pinterestSearchDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestSearchDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestSearchDetector.isVideo=this.isVideo.bind(this),this.pinterestSearchDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestSearchDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this)}ActivateDetectors(){this.pinterestFeedDetector.ActivateDetector(),this.pinterestSearchDetector.ActivateDetector(),this.pinterestPinDetector.ActivateDetector()}DeactivateDetectors(j){this.pinterestFeedDetector.DeactivateDetector(j),this.pinterestSearchDetector.DeactivateDetector(j),this.pinterestPinDetector.DeactivateDetector(j)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new _(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_p",JSON.stringify(this.pinterestConfig)))}GetGlobalContainer(){return document.querySelector(this.pinterestConfig.MAIN_CONTAINER_QUERY)}getUniqueContentId(j){const Z=j.querySelector(`div[${this.pinterestConfig.UNIQUE_ATTRIBUTE}]`);return Z?Z.getAttribute(this.pinterestConfig.UNIQUE_ATTRIBUTE):""}IsPostContentRendered(j,Z,e){let u=!1;if(j){let i=K.GetFullElementSize(j);if(i.w>0&&i.h>0){K.GetImagesSpacePercentage(e,j,i).some((j=>j>=Z))&&(u=!0)}}return u}sendPinterestAd(j,Z){let e=document.querySelector(`[${o.ATTRIBUTE_BIS_ID}=${j}]`);e&&(m.SendCandidatePlacementsCount(this.id,1,o.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST,null),m.SendAdCandidates(this.id,[Z],o.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST,null),w.q&&w.B&&(Z.videoData?e.style.cssText+=o.STYLES_OUTLINE_VIDEO_AD:e.style.cssText+=o.STYLES_OUTLINE_SUCCESS_DETECT))}}},2629:(j,Z,e)=>{e(9346);const u=e(1568),i=e(2880),M=e(655);j.exports=class extends M{constructor(j,Z,e,i){super(j,Z,i),this.id=j,this.pinterestConfig=e,this.adBlockerAgent=i,this.adPlacementType=u.PINTEREST_AD_PLACEMENT_TYPE_FEED,this.feedContainer=null,this.lastFeedAdsCheckTime=0,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(j,Z){}setSizesAndIdForAllElements(j){}getAdPinterestObject(j,Z,e,u,i,M,o){}isVideo(j,Z){}removeCloneElement(j){}IsPostContentRendered(j,Z,e){}ActualizeDetector(){return!!this.isFeedPageURL()&&(this.feedContainer=this.getFeedContainer(),!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,u.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!0)}Detector(){let j=this.detectPromotedPins();if(j&&j.length)for(let Z of j){i.GetElementSize(Z);if(!Z.hasAttribute(u.ATTRIBUTE_BIS_ID)){let j=i.GenerateAndSetBisIdToPinterestAds(Z);this.setSizesAndIdForAllElements(Z);const e=this.createHTML(Z),M=this.getAdvertiserName(Z),o=this.getTargetUrl(Z),m=this.getTitleText(Z),w=this.getAdvertiserUrl(Z),_=this.getAdPinterestObject(Z,e,M,o,m,w,u.PINTEREST_AD_PLACEMENT_TYPE_FEED);this.isVideo(Z,this.pinterestConfig.FEED_PAGE.TAGS_FOR_VIDEO_CHECK)&&(_.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(e);let x=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,j,_),clearTimeout(x)}),100)}}}detectPromotedPins(){if(!this.feedContainer)return[];let j=[],Z=this.pinterestConfig.FEED_PAGE.IMG_SPACE_PERCENTAGE,e=this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,u=Array.from(this.feedContainer.childNodes),i=this.pinterestConfig.PROMOTED_ALIASES;for(let M of u)if(this.IsPostContentRendered(M,Z,this.pinterestConfig.FEED_PAGE.TAGS_FOR_LOADING_CHECK)){const Z=M.querySelector(this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY);if(!Z)continue;let u=Z.innerText;if(!u||"style"===Z.nodeName.toLowerCase()){let j=window.getComputedStyle(Z,":before");u=Z.textContent,j&&j.content&&!u&&(u=j.content);for(let j of e){if(!u){u="";break}let Z=j[0],e=j[1],i="join"!==Z?new RegExp(e,"g"):"";"join"!==Z||1!==u.length?u="replace"===Z?u[Z](i,""):u[Z](i):u=u[0]}}i.some((j=>u.search(j)>=0))&&j.push(M)}return j}getFeedContainer(){let j=this.getGlobalContainer(),Z=null;return j?(Z=j.querySelector(this.pinterestConfig.FEED_PAGE.CONTAINER_QUERY),Z):Z}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll("body style");return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head script');return Z&&Z.forEach((Z=>{let e=Z.cloneNode();j.appendChild(e)})),j}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0);return this.styleFixes(i),e.appendChild(i),Z.appendChild(u),Z.appendChild(e),Z}getAdvertiserName(j){const Z=this.pinterestConfig.FEED_PAGE.ADVERTISER_NAME_QUERY;let e=Array.from(j.querySelectorAll(Z));for(let j of e)if(j&&j.innerText)return j.innerText;return""}getAdvertiserUrl(j){const Z=this.pinterestConfig.FEED_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let e=j.querySelector(Z);return e?e.href:""}styleFixes(j){j.style.cssText=j.style.cssText.replace(/transform.[^;]*;/,"");for(let Z of this.pinterestConfig.FEED_PAGE.STYLE_FIXES){const e=j.querySelector(Z.ELEMENT_QUERY);let i=Z.NEW_RULES;if(e){if(Z.NEW_RULES.includes("${")){let j=JSON.parse(e.getAttribute(u.ATTRIBUTE_BIS_SIZE)).h;i=Z.NEW_RULES.replace(/\$\{.[^}]*\}/,j)}e.style.cssText+=i}}}getTargetUrl(j){const Z=this.pinterestConfig.FEED_PAGE.TARGET_URL_QUERY;let e=j.querySelector(Z),u="";return e&&e.href&&(u=e.href),u}getTitleText(j){const Z=this.pinterestConfig.FEED_PAGE.TITLE_TEXT_QUERY;let e=j.querySelector(Z),u="";return e&&e.textContent.length&&(u=e.textContent),u}isFeedPageURL(){return-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin|search)\//)}}},1050:(j,Z,e)=>{const u=e(1568),i=e(2880),M=e(655);j.exports=class extends M{constructor(j,Z,e,i){super(j,Z,i),this.id=j,this.pinterestConfig=e,this.adBlockerAgent=i,this.pinContainer=null,this.adPlacementType=u.PINTEREST_AD_PLACEMENT_TYPE_PIN,this.lastPinAdsCheckTime=0,this.pinObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(j,Z){}setSizesAndIdForAllElements(j){}getAdPinterestObject(j,Z,e,u,i,M,o){}isVideo(j,Z){}removeCloneElement(j){}IsPostContentRendered(j,Z,e){}ActualizeDetector(){return this.pinContainer=this.getPinContainer(),!!this.pinContainer}ActivateMutationObserver(){this.pinContainer?(this.pinObserver||(this.pinObserver=new MutationObserver(this.DetectCandidates.bind(this,u.AD_DETECTOR_INITIATOR_MUTATION)),this.pinObserver.observe(this.pinContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.pinContainer=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.detectPromotedPins();if(j&&j.length)for(let Z of j){i.GetElementSize(Z);if(!Z.hasAttribute(u.ATTRIBUTE_BIS_ID)){let j=i.GenerateAndSetBisIdToPinterestAds(Z);this.setSizesAndIdForAllElements(Z);const e=this.createHTML(Z),u=this.getAdvertiserName(Z),M=this.getTargetUrl(Z),o=this.getTitleText(Z),m=this.getAdvertiserUrl(Z),w=this.getAdPinterestObject(Z,e,u,M,o,m,this.adPlacementType);this.isVideo(Z,this.pinterestConfig.PIN_PAGE.TAGS_FOR_VIDEO_CHECK)&&(w.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(e);let _=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,j,w),clearTimeout(_)}),100)}}}detectPromotedPins(){if(!this.pinContainer)return[];let j=[],Z=this.pinterestConfig.PIN_PAGE.IMG_SPACE_PERCENTAGE,e=this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,u=Array.from(this.pinContainer.childNodes),i=this.pinterestConfig.PROMOTED_ALIASES;for(let M of u)if(this.IsPostContentRendered(M,Z,this.pinterestConfig.PIN_PAGE.TAGS_FOR_LOADING_CHECK)){const Z=M.querySelector(this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY);if(!Z)continue;let u=Z.innerText;if(!u||"style"===Z.nodeName.toLowerCase()){let j=window.getComputedStyle(Z,":before");u=Z.textContent,j&&j.content&&!u&&(u=j.content);for(let j of e){if(!u){u="";break}let Z=j[0],e=j[1],i="join"!==Z?new RegExp(e,"g"):"";"join"!==Z||1!==u.length?u="replace"===Z?u[Z](i,""):u[Z](i):u=u[0]}}i.some((j=>u.search(j)>=0))&&j.push(M)}return j}getPinContainer(){let j=this.getGlobalContainer(),Z=null;return j?(Z=j.querySelector(this.pinterestConfig.PIN_PAGE.CONTAINER_QUERY),Z):Z}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll("body style");return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head script');return Z&&Z.forEach((Z=>{let e=Z.cloneNode();j.appendChild(e)})),j}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0);return this.styleFixes(i),e.appendChild(i),Z.appendChild(u),Z.appendChild(e),Z}getAdvertiserName(j){const Z=this.pinterestConfig.PIN_PAGE.ADVERTISER_NAME_QUERY;let e=Array.from(j.querySelectorAll(Z));for(let j of e)if(j&&j.innerText)return j.innerText;return""}getAdvertiserUrl(j){const Z=this.pinterestConfig.PIN_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let e=j.querySelector(Z);return e?e.href:""}getTitleText(j){const Z=this.pinterestConfig.PIN_PAGE.TITLE_TEXT_QUERY;let e=j.querySelector(Z),u="";return e&&e.textContent.length&&(u=e.textContent),u}styleFixes(j){j.style.cssText=j.style.cssText.replace(/transform.[^;]*;/,"");for(let Z of this.pinterestConfig.PIN_PAGE.STYLE_FIXES){const e=j.querySelector(Z.ELEMENT_QUERY);let i=Z.NEW_RULES;if(e){if(Z.NEW_RULES.includes("${")){let j=JSON.parse(e.getAttribute(u.ATTRIBUTE_BIS_SIZE)).h;i=Z.NEW_RULES.replace(/\$\{.[^}]*\}/,j)}e.style.cssText+=i}}}getTargetUrl(j){const Z=this.pinterestConfig.PIN_PAGE.TARGET_URL_QUERY;let e=j.querySelector(Z),u="";return e&&e.href&&(u=e.href),u}isPinPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin)\//))}}},2765:(j,Z,e)=>{const u=e(1568),i=e(2880),M=e(655);j.exports=class extends M{constructor(j,Z,e,u){super(j,Z,u),this.id=j,this.pinterestConfig=e,this.adBlockerAgent=u,this.searchContainer=null,this.lastSearchPageAdsCheckTime=0,this.searchPageObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(j,Z){}setSizesAndIdForAllElements(j){}getAdPinterestObject(j,Z,e,u,i,M,o){}isVideo(j,Z){}removeCloneElement(j){}IsPostContentRendered(j,Z,e){}ActualizeDetector(){return this.searchContainer=this.getSearchContainer(),!!this.searchContainer}ActivateMutationObserver(){this.searchContainer?(this.searchPageObserver||(this.searchPageObserver=new MutationObserver(this.DetectCandidates.bind(this,u.AD_DETECTOR_INITIATOR_MUTATION)),this.searchPageObserver.observe(this.searchContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.searchContainer=null,this.isObserverAlreadySet=!1)}Detector(){let j=this.detectPromotedPins();if(j&&j.length)for(let Z of j){i.GetElementSize(Z);if(!Z.hasAttribute(u.ATTRIBUTE_BIS_ID)){let j=i.GenerateAndSetBisIdToPinterestAds(Z);this.setSizesAndIdForAllElements(Z);const e=this.createHTML(Z),M=this.getAdvertiserName(Z),o=this.getTargetUrl(Z),m=this.getTitleText(Z),w=this.getAdvertiserUrl(Z),_=this.getAdPinterestObject(Z,e,M,o,m,w,u.PINTEREST_AD_PLACEMENT_TYPE_SEARCH);this.isVideo(Z,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_VIDEO_CHECK)&&(_.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(e);let x=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,j,_),clearTimeout(x)}),100)}}}detectPromotedPins(){if(!this.searchContainer)return[];let j=[],Z=this.pinterestConfig.SEARCH_PAGE.IMG_SPACE_PERCENTAGE,e=this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,u=Array.from(this.searchContainer.childNodes),i=this.pinterestConfig.PROMOTED_ALIASES;for(let M of u)if(this.IsPostContentRendered(M,Z,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_LOADING_CHECK)){const Z=M.querySelector(this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY);if(!Z)continue;let u=Z.innerText;if(!u||"style"===Z.nodeName.toLowerCase()){let j=window.getComputedStyle(Z,":before");u=Z.textContent,j&&j.content&&!u&&(u=j.content);for(let j of e){if(!u){u="";break}let Z=j[0],e=j[1],i="join"!==Z?new RegExp(e,"g"):"";"join"!==Z||1!==u.length?u="replace"===Z?u[Z](i,""):u[Z](i):u=u[0]}}i.some((j=>u.search(j)>=0))&&j.push(M)}return j}getSearchContainer(){let j=this.getGlobalContainer(),Z=null;return j?(Z=j.querySelector(this.pinterestConfig.SEARCH_PAGE.CONTAINER_QUERY),Z):Z}get cloneBodyWithStyles(){const j=document.createElement("body"),Z=document.querySelectorAll("body style");return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}get cloneHeadWithStyles(){const j=document.createElement("head"),Z=document.querySelectorAll('head link[rel="stylesheet"], head script');return Z&&Z.forEach((Z=>{let e=Z.cloneNode();j.appendChild(e)})),j}createHTML(j){const Z=document.createElement("html"),e=this.cloneBodyWithStyles,u=this.cloneHeadWithStyles,i=j.cloneNode(!0);return this.styleFixes(i),e.appendChild(i),Z.appendChild(u),Z.appendChild(e),Z}getAdvertiserName(j){const Z=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_NAME_QUERY;let e=Array.from(j.querySelectorAll(Z));for(let j of e)if(j&&j.innerText)return j.innerText;return""}getAdvertiserUrl(j){const Z=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let e=j.querySelector(Z);return e?e.href:""}styleFixes(j){j.style.cssText=j.style.cssText.replace(/transform.[^;]*;/,"");for(let Z of this.pinterestConfig.SEARCH_PAGE.STYLE_FIXES){const e=j.querySelector(Z.ELEMENT_QUERY);let i=Z.NEW_RULES;if(e){if(Z.NEW_RULES.includes("${")){let j=JSON.parse(e.getAttribute(u.ATTRIBUTE_BIS_SIZE)).h;i=Z.NEW_RULES.replace(/\$\{.[^}]*\}/,j)}e.style.cssText+=i}}}getTargetUrl(j){const Z=this.pinterestConfig.SEARCH_PAGE.TARGET_URL_QUERY;let e=j.querySelector(Z),u="";return e&&e.href&&(u=e.href),u}getTitleText(j){const Z=this.pinterestConfig.SEARCH_PAGE.TITLE_TEXT_QUERY;let e=j.querySelector(Z),u="";return e&&e.textContent.length&&(u=e.textContent),u}isSearchPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(search)\//))}}},8792:(j,Z,e)=>{const u=e(2880);e(1568);j.exports=class{constructor(j){this.id=j}InjectDetector(j,Z){if(document.head){var e=document.createElement("script");this.setAttributes(e),document.head.appendChild(e)}}setAttributes(j){const Z=u.getURL("../executors/pinterest.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}}},5465:(j,Z,e)=>{const u=e(9346),i=e(9105),M=e(1568),o=e(8384),m=e(5364),w=e(9431),_=e(1145),x=e(9955);j.exports=class extends u{constructor(j,Z,e){super(j),this.id=j,this.RedditVideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=e,this.redditConfig=Z.RedditConfig,this.RedditDetectorFeed=null,this.RedditDetectorComments=null,this.RedditDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(M.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.RedditDetectorFeed.ActivateDetector(),this.RedditDetectorComments.ActivateDetector(),this.RedditDetectorRightColumn.ActivateDetector()}DeactivateDetectors(j){this.RedditDetectorFeed.DeactivateDetector(j),this.RedditDetectorComments.DeactivateDetector(j),this.RedditDetectorRightColumn.DeactivateDetector(j)}ActivateDetector(j){j===M.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.RedditDetectorFeed=new w(this.id,this.redditConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorComments=new _(this.id,this.redditConfig.COMMENT_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorRightColumn=new x(this.id,this.redditConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.RedditDetectorFeed.isCarousel=this.isCarousel.bind(this),this.RedditDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorFeed.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorFeed.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorFeed.HideElement=this.HideElement.bind(this),this.RedditDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorComments.HideElement=this.HideElement.bind(this),this.RedditDetectorComments.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorComments.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorComments.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorComments.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorRightColumn.HideElement=this.HideElement.bind(this),this.RedditDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorRightColumn.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorRightColumn.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this)}ActivateTrafficDetector(){this.RedditVideoTrafficDetector||(this.RedditVideoTrafficDetector=new i(this.id),this.RedditVideoTrafficDetector.InjectDetector(this.id+"_r",JSON.stringify(this.redditConfig)))}processAndSendRedditAd(j,Z,e=!1){let u=document.querySelector(`[${M.ATTRIBUTE_BIS_ID}=${j}]`);if(u){let j=!!u.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK);m.SendCandidatePlacementsCount(this.id,1,M.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT,null),m.SendAdCandidates(this.id,[Z],M.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT,null),o.q&&o.B&&(u.style.cssText+=e?M.STYLES_OUTLINE_VIDEO_AD:j?M.STYLES_OUTLINE_TEXT_AD:M.STYLES_OUTLINE_SUCCESS_DETECT)}}}},1145:(j,Z,e)=>{const u=e(655),i=e(1568),M=e(2880);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.id=j,this.redditConfig=u,this.commentPageContainer=null,this.AdBlockerAgent=e,this.commentPageObserver=null,this.adPlacementType=i.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE}HideElement(){}setSizesAndIdForAllElements(j){}getAdRedditObject(j,Z,e,u){}doesElementExists(j){}ActualizeDetector(){return this.commentPageContainer=this.getCommentPageContainer,!!this.commentPageContainer}ActivateMutationObserver(){this.commentPageContainer?(this.commentPageObserver||(this.commentPageObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.commentPageObserver.observe(this.commentPageContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}get getCommentPageContainer(){let j=this.redditConfig.COMMENT_PAGE.QUERIES,Z=this.redditConfig.COMMENT_PAGE.MIN_HEIGHT,e=window.innerWidth,u=this.redditConfig.COMMENT_PAGE.QUERY_TO_EXCLUDE,i=this.redditConfig.COMMENT_PAGE.TOP_DISTANCE;for(let M of j){const j=Array.from(document.querySelectorAll(M));for(let M of j){const j=M.getBoundingClientRect(),o=(e-parseInt(M.offsetWidth))/e*100,m=Array.from(M.children);if(parseInt(M.offsetHeight)>Z&&o>2&&(parseInt(j.top)>i||parseInt(j.top)<0)&&m.length>=3&&!M.querySelector(u))return M}}return null}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processCommentPageAds(!0),this.isCommentPage&&this.commentPageContainer&&this.processCommentPageAds()}processCommentPageAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let j=[],Z=[],e=this.redditConfig.COMMENT_PAGE.IMG_SPACE_PERCENTAGE;return this.commentPageContainer&&(j=Array.from(this.commentPageContainer.children).map((j=>{let e=Array.from(j.querySelectorAll(this.redditConfig.COMMENT_PAGE.QUERY_AD_INSIDE_COMMENT_TREE));if(!e?.length)return j;for(let j of e)Z.push(j)})).concat(Z)),j=j.filter((j=>!!j&&this.isPromoted(j))),{allCells:j,minImgSquarePercentage:e}}extractOccurrences(){let{allCells:j,minImgSquarePercentage:Z}=this.allCellsAndMinImgSpace();if(j.length)for(let e of j)if(!e.hasAttribute(i.ATTRIBUTE_BIS_ID)&&!e.hasAttribute(i.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(e,Z)&&this.isAvatarImgReady(e)){let j=M.GenerateAndSetBisIdToRedditAds(e),Z=this.isVideoPost(e);if(this.isShadowRootExist(e)){const u=this.deepClone(e);let i=this.buildBannerHtml(u,this.adPlacementType),M=this.lookingTargetUrl(i),o=this.getAdRedditObject(e,i,M,this.adPlacementType);Z&&(o.videoData=this.lookingForVideoDataInContent(e)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,j,o,Z),100)}else{this.setSizesAndIdForAllElements(e);const u=e.cloneNode(!0);let i=this.buildBannerHtml(u,this.adPlacementType),M=this.lookingTargetUrl(i),o=this.getAdRedditObject(e,i,M,this.adPlacementType);Z&&(o.videoData=this.lookingForVideoDataInContent(e)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,j,o,Z),100)}}}isShadowRootExist(j){if(j.shadowRoot)return!0;return Array.from(j.querySelectorAll("*")).some((j=>j.shadowRoot))}deepClone(j){let Z=1;const e=(j,u)=>{const i=(j,Z)=>{for(;j;)e(j,Z),j=j.nextSibling};if(j){const e=j.cloneNode(!1);"SLOT"===j.nodeName&&(j.setAttribute("data-assigning-slot-id",Z),e.setAttribute("data-assigning-slot-id",Z)),j.assignedSlot&&j instanceof Element&&j.assignedSlot.hasAttribute("data-assigning-slot-id")&&e.setAttribute("data-assigned-to",j.assignedSlot.getAttribute("data-assigning-slot-id")),Z+=1,u.appendChild(e),j.shadowRoot&&(this.setSizesAndIdForAllElements(j.shadowRoot),j.shadowRoot&&j.shadowRoot.firstChild.setAttribute&&M.SetFullSizeToElement(j.shadowRoot.firstChild),i(j.shadowRoot.firstChild,e)),this.setSizesAndIdForAllElements(j),j&&j.setAttribute&&M.SetFullSizeToElement(j),i(j.firstChild,e)}},u=document.createElement("div");return e(j,u),this.replaceElementsToRightSlots(u.firstElementChild),u.firstElementChild}replaceElementsToRightSlots(j){const Z=j.querySelectorAll("*[data-assigned-to]"),e=j.querySelectorAll("*[data-assigning-slot-id]");for(let j of Z){const Z=j.getAttribute("data-assigned-to");for(let u of e){if(Z===u.getAttribute("data-assigning-slot-id")){u.appendChild(j);break}}}}buildBannerHtml(j,Z){let e=this.commentPageContainer;this.setWrapperClass(e);let u=this.headCopyWithStyles;const i=document.createElement("html"),M=this.bodyCopyWithStyles,o=document.createElement("div"),m=e.cloneNode();return o.appendChild(m),this.setWrapperStyles(e,o),u.appendChild(this.getClassNameForStyles(j)),i.appendChild(u),m.appendChild(j),M.appendChild(o),i.appendChild(M),i}setWrapperClass(j){let Z=j.parentElement,e=!1;if(Z)for(let i=0;i<50&&!e&&Z;i++)if(Z.nextSibling&&-1!==Z.nextSibling.nodeName.search(/style/i)&&Z.previousSibling&&-1!==Z.previousSibling.nodeName.search(/style/i)){var u=Z.getAttribute("class");j.className+=j.className.length?" "+u:u,e=!0}else Z=Z.parentElement}get headCopyWithStyles(){const j=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((Z=>{const e=Z.KEY,u=Z.ALL_STYLES_FROM,i=Z.COMMENT_PAGE;for(let Z of Array.from(j.children))if(-1!==Z.nodeName.search(/^(style|link)$/gi)){if(Z.dataset[e]){let j=u.some((j=>Z.dataset[e].includes(j)));!j&&this.isCommentPage&&(j=i.some((j=>Z.dataset[e].includes(j)))),j||Z.remove()}}else Z.remove()})),this.neccesaryStyleRules){const Z=document.createElement("style");Z.innerHTML=this.neccesaryStyleRules,j.appendChild(Z)}return this.getStylesByTagName(j),j}get neccesaryStyleRules(){let j=null;const Z=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((j=>{const Z=new RegExp(j,"gi"),e=document.querySelector("head").outerHTML.match(Z);let u;return e&&e.length&&(u=e.join("")),u})).filter((j=>j));return Z&&Z.length&&(j=Z.join("")),j}getClassNameForStyles(j){let Z=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((e=>{const u=j.querySelector(e.CLASS_NAME_CHILD);let i=u&&u.parentElement?u.parentElement:null,M="";for(let j=1;j<e.DEEP_LEVEL;j++)i&&(i=i.parentElement);i&&(M=i.classList[0],Z.innerHTML+="."+M+e.STYLES)})),Z}getStylesByTagName(j){let Z=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((Z=>{const e=new RegExp(Z.ATTRIBUTE_REGEX_VALUE);return Array.from(j.querySelectorAll(Z.TAG_NAME)).filter((j=>{if(j&&j[Z.ATTRIBUTE_NAME]&&-1!==j[Z.ATTRIBUTE_NAME].search(e))return j;j.remove()}))})).filter((j=>j)).forEach((j=>{Z=Z.concat(j)})),Z.forEach((Z=>{j.appendChild(Z)}))}get bodyCopyWithStyles(){const j=document.createElement("body"),Z=document.querySelector("body style")?.cloneNode(!0);return Z&&j.appendChild(Z),j}isPromoted(j){if(!j)return!1;let Z=j,e=null;1===Z.childElementCount&&Z.firstElementChild.shadowRoot&&Z.firstElementChild.shadowRoot.firstElementChild?e=Z.firstElementChild.shadowRoot.firstElementChild:Z.shadowRoot&&(e=Z.shadowRoot.firstElementChild);let u=[];e&&(u=Array.from(e.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)));let i=Array.from(Z.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)).concat(u);return i.length?i.some((j=>{let Z=j.textContent.trim().toLowerCase();return Z?this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0)):j.dataset.beforeContent?(Z=j.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0))):void 0})):void 0}IsPostContentRendered(j,Z){let e=!1;if(j){let u=j.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(u&&0===u.length){let u=M.GetFullElementSize(j);if(u.w>0){M.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,j,u).some((j=>j>=Z))&&(e=!0)}}j.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(e=!0)}return e}lookingTargetUrl(j){let Z="";let e=Array.from(j.querySelectorAll('a[target="_blank"]')).filter((j=>!(!j||!j.href||j.href.includes("reddit.com/user/"))));return e.length&&(Z=e[0].href),Z}isAvatarImgReady(j){if(!j)return!1;let Z=[j],e=null;1===j.childElementCount&&j.firstElementChild.shadowRoot&&(e=j.firstElementChild.shadowRoot.firstElementChild),j.shadowRoot&&(e=j.shadowRoot.firstElementChild),e&&Z.push(e);let u=!1;for(let j of Z){let Z=j.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(Z){if(!Z.shadowRoot)return!0;if(u=!!Z.shadowRoot&&!!Z.shadowRoot.querySelector("img"),u)break}}return u}isVideoPost(j){let Z=!1;if(j){Z=Array.from(j.querySelectorAll("*")).some((j=>{let Z=!!j.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!Z&&j.shadowRoot&&(Z=!!j.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),Z}))}return Z}lookingForVideoDataInContent(j){const Z=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let e=j.querySelector(Z);if(e){let j=e.getAttribute("src");e.getAttribute("poster");if(j&&!j.includes("blob:")){const Z=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let e=j.match(Z),u=null;if(e?.groups?.videoId)return u=e.groups.videoId,{videoId:u,url:j}}}return{}}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+`max-width: ${this.maxWidthContainer(j)}`}get isCommentPage(){return-1!==window.location.href.indexOf(this.redditConfig.COMMENT_PAGE.TEXT_FROM_HREF)}get isCommentPopup(){return!!document.querySelector(this.redditConfig.COMMENT_PAGE.QUERY_IS_POPUP)}}},9431:(j,Z,e)=>{const u=e(655),i=e(1568),M=e(2880);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.id=j,this.feedObserver=null,this.redditConfig=u,this.feedContainer=null,this.AdBlockerAgent=e,this.lastTopPosition=null,this.adPlacementType=i.REDDIT_AD_PLACEMENT_TYPE_FEED}isCarousel(){}HideElement(){}setSizesAndIdForAllElements(j){}getAdRedditObject(j,Z,e,u){}doesElementExists(j){}ActualizeDetector(){return!!this.isValidUrl&&(this.feedContainer=this.getFeedContainer,!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.lastTopPosition=parseInt(this.feedContainer.getBoundingClientRect().top),this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processFeedAds(),this.isCommentPage||this.isCommentPopup||(this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds())}processFeedAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let j=[],Z=0;if(this.feedContainer){let e=Array.from(this.feedContainer.children),u=Array.from(document.querySelectorAll(this.redditConfig.FEED.QUERY_POSTS));j=e,u&&u.length&&(j=e.concat(u)),Z=this.redditConfig.FEED.IMG_SPACE_PERCENTAGE}return j=j.filter((j=>this.isPromoted(j)&&j.offsetHeight<this.redditConfig.FEED.MAX_CHILD_HEIGHT)),{allCells:j,minImgSquarePercentage:Z}}extractOccurrences(){let{allCells:j,minImgSquarePercentage:Z}=this.allCellsAndMinImgSpace();if(j.length)for(let e of j)if(!e.hasAttribute(i.ATTRIBUTE_BIS_ID)&&!e.hasAttribute(i.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(e,Z)&&this.isAvatarImgReady(e)){this.isCarousel(e)&&this.redditConfig.IS_ACTIVE_GET_SLIDES_SRC&&this.getSlidesSrc(e);let j=M.GenerateAndSetBisIdToRedditAds(e),Z=this.isVideoPost(e);if(this.isShadowRootExist(e)){const u=this.deepClone(e);let i=this.buildBannerHtml(u,this.adPlacementType),M=this.getAdRedditObject(e,i,"",this.adPlacementType);Z&&(M.videoData=this.lookingForVideoDataInContent(e)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,j,M,Z),100)}else{this.setSizesAndIdForAllElements(e);const u=e.cloneNode(!0);let i=this.buildBannerHtml(u,this.adPlacementType),o=this.getAdRedditObject(e,i,"",this.adPlacementType);o.size.h<300&&(o.size=M.SetFullSizeToElement(e)),Z&&(o.videoData=this.lookingForVideoDataInContent(e)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,j,o,Z),100)}}}isShadowRootExist(j){if(j.shadowRoot)return!0;return Array.from(j.querySelectorAll("*")).some((j=>j.shadowRoot))}deepClone(j){let Z=1;const e=(j,u)=>{const i=(j,Z)=>{for(;j;)e(j,Z),j=j.nextSibling};if(j){const e=j.cloneNode(!1);"SLOT"===j.nodeName&&(j.setAttribute("data-assigning-slot-id",Z),e.setAttribute("data-assigning-slot-id",Z)),j.assignedSlot&&j instanceof Element&&j.assignedSlot.hasAttribute("data-assigning-slot-id")&&e.setAttribute("data-assigned-to",j.assignedSlot.getAttribute("data-assigning-slot-id")),Z+=1,u.appendChild(e),j.shadowRoot&&(this.setSizesAndIdForAllElements(j.shadowRoot),j.shadowRoot&&j.shadowRoot.firstChild.setAttribute&&M.SetFullSizeToElement(j.shadowRoot.firstChild),i(j.shadowRoot.firstChild,e)),this.setSizesAndIdForAllElements(j),j&&j.setAttribute&&M.SetFullSizeToElement(j),i(j.firstChild,e)}},u=document.createElement("div");return e(j,u),this.replaceElementsToRightSlots(u.firstElementChild),u.firstElementChild}replaceElementsToRightSlots(j){const Z=j.querySelectorAll("*[data-assigned-to]"),e=j.querySelectorAll("*[data-assigning-slot-id]");for(let j of Z){const Z=j.getAttribute("data-assigned-to");for(let u of e){if(Z===u.getAttribute("data-assigning-slot-id")){u.appendChild(j);break}}}}getSlidesSrc(j){var Z=j.querySelector("ul").parentElement,e=Z.querySelector(this.redditConfig.CAROUSEL_BUTTON_NEXT),u=Z.querySelector(this.redditConfig.CAROUSEL_BUTTON_PREVIUOS);e&&u&&(e.click(),u.click())}buildBannerHtml(j,Z){let e=this.feedContainer;this.setWrapperClass(e);let u=this.headCopyWithStyles;const i=document.createElement("html"),M=this.bodyCopyWithStyles,o=document.createElement("div"),m=e.cloneNode();return o.appendChild(m),this.setWrapperStyles(e,o),u.appendChild(this.getClassNameForStyles(j)),i.appendChild(u),m.appendChild(j),M.appendChild(o),i.appendChild(M),i}setWrapperClass(j){let Z=j.parentElement,e=!1;if(Z)for(let i=0;i<50&&!e&&Z;i++)if(Z.nextSibling&&-1!==Z.nextSibling.nodeName.search(/style/i)&&Z.previousSibling&&-1!==Z.previousSibling.nodeName.search(/style/i)){var u=Z.getAttribute("class");j.className+=j.className.length?" "+u:u,e=!0}else Z=Z.parentElement}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+`max-width: ${this.maxWidthContainer(j)}`}get getFeedContainer(){let j=this.redditConfig.FEED.QUERIES,Z=window.innerWidth,e=this.redditConfig.FEED.SECONDARY_CHECK_QUERY,u=this.redditConfig.FEED.QUERY_TO_EXCLUDE;for(let i of j){const j=Array.from(document.querySelectorAll(i));for(let i of j){const j=getComputedStyle(i),M=(Z-parseInt(j.width))/Z*100;if(parseInt(j.height)>1e3&&M>2&&!i.querySelector(u))return i.querySelector(e)?i.querySelector(e):i}}return null}get headCopyWithStyles(){const j=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((Z=>{const e=Z.KEY,u=Z.ALL_STYLES_FROM,i=Z.FEED_PAGE;for(let Z of Array.from(j.children))if(-1!==Z.nodeName.search(/^(style|link)$/gi)){if(Z.dataset[e]){let j=u.some((j=>Z.dataset[e].includes(j)));j||this.isCommentPage||(j=i.some((j=>Z.dataset[e].includes(j)))),j||Z.remove()}}else Z.remove()})),this.neccesaryStyleRules){const Z=document.createElement("style");Z.innerHTML=this.neccesaryStyleRules,j.appendChild(Z)}return this.getStylesByTagName(j),j}get neccesaryStyleRules(){let j=null;const Z=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((j=>{const Z=new RegExp(j,"gi"),e=document.querySelector("head").outerHTML.match(Z);let u;return e&&e.length&&(u=e.join("")),u})).filter((j=>j));return Z&&Z.length&&(j=Z.join("")),j}getClassNameForStyles(j){let Z=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((e=>{const u=j.querySelector(e.CLASS_NAME_CHILD);let i=u&&u.parentElement?u.parentElement:null,M="";for(let j=1;j<e.DEEP_LEVEL;j++)i&&(i=i.parentElement);i&&(M=i.classList[0],Z.innerHTML+="."+M+e.STYLES)})),Z}getStylesByTagName(j){let Z=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((Z=>{const e=new RegExp(Z.ATTRIBUTE_REGEX_VALUE);return Array.from(j.querySelectorAll(Z.TAG_NAME)).filter((j=>{if(j&&j[Z.ATTRIBUTE_NAME]&&-1!==j[Z.ATTRIBUTE_NAME].search(e))return j;j.remove()}))})).filter((j=>j)).forEach((j=>{Z=Z.concat(j)})),Z.forEach((Z=>{j.appendChild(Z)}))}get bodyCopyWithStyles(){const j=document.createElement("body"),Z=Array.from(document.querySelectorAll("body style")).map((j=>{if(j)return j.cloneNode(!0)}));return Z&&Z.forEach((Z=>{j.appendChild(Z)})),j}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}isVideoPost(j){let Z=!1;if(j){Z=Array.from(j.querySelectorAll("*")).some((j=>{let Z=!!j.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!Z&&j.shadowRoot&&(Z=!!j.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),Z}))}return Z}lookingForVideoDataInContent(j){const Z=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let e=j.querySelector(Z);if(e){let j=e.getAttribute("src");e.getAttribute("poster");if(j&&!j.includes("blob:")){const Z=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let e=j.match(Z),u=null;if(e?.groups?.videoId)return u=e.groups.videoId,{videoId:u,url:j}}}return{}}isPromoted(j){if(j){let Z=j;1===Z.childElementCount&&Z.firstElementChild.shadowRoot&&Z.firstElementChild.shadowRoot.firstElementChild&&(Z=Z.firstElementChild.shadowRoot.firstElementChild);let e=Array.from(Z.querySelectorAll(this.redditConfig.FEED.PROMOTED_SELECTOR)),u=Array.from(Z.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)),i=Array.from(j.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR)),M=e.concat(i).concat(u);if(M.length)return M.some((j=>{let Z=j.textContent.trim().toLowerCase();return Z?this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0)):j.dataset.beforeContent?(Z=j.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0))):void 0}))}return!1}IsPostContentRendered(j,Z){let e=!1;if(j){let u=j.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(u&&0===u.length){let u=M.GetFullElementSize(j);if(u.w>0){M.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,j,u).some((j=>j>=Z))&&(e=!0)}}j.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(e=!0)}return e}isAvatarImgReady(j){if(!j)return!1;let Z=[j],e=null;1===j.childElementCount&&j.firstElementChild.shadowRoot&&(e=j.firstElementChild.shadowRoot.firstElementChild),j.shadowRoot&&(e=j.shadowRoot.firstElementChild),e&&Z.push(e);let u=!1;for(let j of Z){let Z=j.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(Z){if(!Z.shadowRoot)return!0;if(u=!!Z.shadowRoot&&!!Z.shadowRoot.querySelector("img"),u)break}}return u}get isValidUrl(){return!this.redditConfig.FEED.INVALID_URL_PATHS.some((j=>window.location.href.includes(j)))}}},9955:(j,Z,e)=>{const u=e(655),i=e(1568),M=e(2880);j.exports=class extends u{constructor(j,Z,e,u){super(j,Z,e),this.id=j,this.rightColumnObserver=null,this.redditConfig=u,this.rightColumnContainer=null,this.AdBlockerAgent=e,this.lastTopPosition=null,this.adPlacementType=i.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN}HideElement(){}setSizesAndIdForAllElements(j){}getAdRedditObject(j,Z,e,u){}doesElementExists(j){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer,!!this.rightColumnContainer}ActivateMutationObserver(){this.rightColumnContainer?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processRightColumnAds(),this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer,this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.extractOccurrences(i.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)}allCellsAndMinImgSpace(){let j=[],Z=0;return this.rightColumnContainer&&this.rightColumnContainer.children&&(j=Array.from(this.rightColumnContainer.children).map((j=>j.querySelector("div ~ div > button")?j.querySelector("div:nth-child(1)"):"HR"===j.nodeName||0===j.getBoundingClientRect().height?null:j)).filter((j=>j)),Z=this.redditConfig.RIGHT_COLUMN.IMG_SPACE_PERCENTAGE),j=j.filter((j=>this.isPromoted(j))),{allCells:j,minImgSquarePercentage:Z}}extractOccurrences(){let{allCells:j,minImgSquarePercentage:Z}=this.allCellsAndMinImgSpace();if(j.length)for(let e of j)if(!e.hasAttribute(i.ATTRIBUTE_BIS_ID)&&!e.hasAttribute(i.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(e,Z)){let j=M.GenerateAndSetBisIdToRedditAds(e);if(this.isShadowRootExist(e)){const Z=this.deepClone(e);let u=this.buildBannerHtml(Z),i=this.lookingTargetUrl(u),M=this.getAdRedditObject(e,u,i,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),Z.remove(),setTimeout(this.ExtractAd.bind(this,j,M),100)}else{this.setSizesAndIdForAllElements(e);const Z=e.cloneNode(!0);let u=this.buildBannerHtml(Z),i=this.lookingTargetUrl(u),M=this.getAdRedditObject(e,u,i,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(1)),Z.remove(),setTimeout(this.ExtractAd.bind(this,j,M),100)}}}isShadowRootExist(j){if(j.shadowRoot)return!0;return Array.from(j.querySelectorAll("*")).some((j=>j.shadowRoot))}deepClone(j){let Z=1;const e=(j,u)=>{const i=(j,Z)=>{for(;j;)e(j,Z),j=j.nextSibling};if(j){const e=j.cloneNode(!1);"SLOT"===j.nodeName&&(j.setAttribute("data-assigning-slot-id",Z),e.setAttribute("data-assigning-slot-id",Z)),j.assignedSlot&&j instanceof Element&&j.assignedSlot.hasAttribute("data-assigning-slot-id")&&e.setAttribute("data-assigned-to",j.assignedSlot.getAttribute("data-assigning-slot-id")),Z+=1,u.appendChild(e),j.shadowRoot&&(this.setSizesAndIdForAllElements(j.shadowRoot),j.shadowRoot&&j.shadowRoot.firstChild.setAttribute&&M.SetFullSizeToElement(j.shadowRoot.firstChild),i(j.shadowRoot.firstChild,e)),this.setSizesAndIdForAllElements(j),j&&j.setAttribute&&M.SetFullSizeToElement(j),i(j.firstChild,e)}},u=document.createElement("div");return e(j,u),this.replaceElementsToRightSlots(u.firstElementChild),u.firstElementChild}buildBannerHtml(j){let Z=this.rightColumnContainer;this.setWrapperClass(Z);let e=this.headCopyWithStyles;const u=document.createElement("html"),i=this.bodyCopyWithStyles,M=document.createElement("div"),o=Z.cloneNode();return M.appendChild(o),this.setWrapperStyles(Z,M),e.appendChild(this.getClassNameForStyles(j)),u.appendChild(e),o.appendChild(j),i.appendChild(M),u.appendChild(i),u}setWrapperClass(j){let Z=j.parentElement,e=!1;if(Z)for(let i=0;i<50&&!e&&Z;i++)if(Z.nextSibling&&-1!==Z.nextSibling.nodeName.search(/style/i)&&Z.previousSibling&&-1!==Z.previousSibling.nodeName.search(/style/i)){var u=Z.getAttribute("class");j.className+=j.className.length?" "+u:u,e=!0}else Z=Z.parentElement}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+`max-width: ${this.maxWidthContainer(j)}`}replaceElementsToRightSlots(j){const Z=j.querySelectorAll("*[data-assigned-to]"),e=j.querySelectorAll("*[data-assigning-slot-id]");for(let j of Z){const Z=j.getAttribute("data-assigned-to");for(let u of e){if(Z===u.getAttribute("data-assigning-slot-id")){u.appendChild(j);break}}}}isPromoted(j){if(j){let Z=j,e=Array.from(Z.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR));if(e.length)return e.some((j=>{let Z=j.textContent.trim().toLowerCase();return Z?this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0)):j.dataset.beforeContent?(Z=j.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((j=>Z.indexOf(j)>=0))):void 0}))}return!1}IsPostContentRendered(j,Z){let e=!1;if(j){let u=j.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(0===u?.length){let u=M.GetFullElementSize(j);if(u.w>0&&u.h>0){M.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,j,u).some((j=>j>=Z))&&(e=!0)}}j.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(e=!0)}return e}lookingTargetUrl(j){let Z="";let e=Array.from(j.querySelectorAll('a[target="_blank"]')).filter((j=>!(!j||!j.href||j.href.includes("reddit.com/user/"))));return e.length&&(Z=e[0].href),Z}get headCopyWithStyles(){const j=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((Z=>{const e=Z.KEY,u=Z.ALL_STYLES_FROM,i=Z.FEED_PAGE;for(let Z of Array.from(j.children))if(-1!==Z.nodeName.search(/^(style|link)$/gi)){if(Z.innerHTML=Z.innerHTML.replace(/}.[^}]*{visibility:hidden}/,"}"),Z.dataset[e]){let j=u.some((j=>Z.dataset[e].includes(j)));j||this.isCommentPage||(j=i.some((j=>Z.dataset[e].includes(j)))),j||Z.remove()}}else Z.remove()})),this.neccesaryStyleRules){const Z=document.createElement("style");Z.innerHTML=this.neccesaryStyleRules,j.appendChild(Z)}return this.getStylesByTagName(j),j}get neccesaryStyleRules(){let j=null;const Z=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((j=>{const Z=new RegExp(j,"gi"),e=document.querySelector("head").outerHTML.match(Z);let u;return e&&e.length&&(u=e.join("")),u})).filter((j=>j));return Z&&Z.length&&(j=Z.join("")),j}getClassNameForStyles(j){let Z=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((e=>{const u=j.querySelector(e.CLASS_NAME_CHILD);let i=u&&u.parentElement?u.parentElement:null,M="";for(let j=1;j<e.DEEP_LEVEL;j++)i&&(i=i.parentElement);i&&(M=i.classList[0],Z.innerHTML+="."+M+e.STYLES)})),Z}getStylesByTagName(j){let Z=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((Z=>{const e=new RegExp(Z.ATTRIBUTE_REGEX_VALUE);return Array.from(j.querySelectorAll(Z.TAG_NAME)).filter((j=>{if(j&&j[Z.ATTRIBUTE_NAME]&&-1!==j[Z.ATTRIBUTE_NAME].search(e))return j;j.remove()}))})).filter((j=>j)).forEach((j=>{Z=Z.concat(j)})),Z.forEach((Z=>{j.appendChild(Z)}))}get bodyCopyWithStyles(){const j=document.createElement("body"),Z=document.querySelector("body style")?.cloneNode(!0);return Z&&j.appendChild(Z),j}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}get getRightColumnContainer(){const j=this.redditConfig.RIGHT_COLUMN.QUERIES;let Z=null;for(let e of j){let j=Array.from(document.querySelectorAll(e));if(!j.length)continue;let u=j.filter((j=>j.children.length>2));if(u&&u.length){Z=u[0];break}}return Z}}},9105:(j,Z,e)=>{const u=e(2880);e(1568);j.exports=class{constructor(j){this.id=j}setAttributes(j){const Z=u.getURL("../executors/reddit.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}InjectDetector(){if(document.head){var j=document.createElement("script"),Z=function(){document.head.appendChild(j),window.removeEventListener("DOMContentLoaded",Z)};this.setAttributes(j),window.addEventListener("DOMContentLoaded",Z)}}}},5849:(j,Z,e)=>{const u=e(9346),i=e(1568),M=e(8384),o=e(5364),m=e(1687),w=e(8838),_=e(2880),x=e(9358);j.exports=class extends u{constructor(j,Z,e){super(j),this.id=j,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=e,this.tiktokConfig=Z.TiktokConfig,this.tiktokDetectorFeed=null,this.ActivateTrafficDetector()}onPageUrlChanged(){this.available&&setTimeout((()=>{this.DeactivateDetectors(i.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.tiktokDetectorFeed.ActivateDetector()}DeactivateDetectors(j){this.tiktokDetectorFeed.DeactivateDetector(j)}ActivateDetector(j){j===i.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.tiktokDetectorFeed=new m(this.id,this.tiktokConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.tiktokConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.tiktokDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.tiktokDetectorFeed.getTiktokAdObject=this.getTiktokAdObject.bind(this),this.tiktokDetectorFeed.ExtractAd=this.processAndSendTiktokAd.bind(this),this.tiktokDetectorFeed.removePostCopy=this.removePostCopy.bind(this),this.tiktokDetectorFeed.HideElement=this.HideElement.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new w(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_t",JSON.stringify(this.tiktokConfig)))}processAndSendTiktokAd(j,Z,e=document){let u=e.querySelector(`[${i.ATTRIBUTE_BIS_ID}=${j}]`);u&&(o.SendAdCandidates(this.id,[Z],i.MESSAGE_TYPE_TIKTOK_FEED_DATA,null),M.q&&M.B&&(u.children[0].children[0].style.cssText+=i.STYLES_OUTLINE_VIDEO_AD))}getTiktokAdObject(j,Z,e,u){const i=_.SetFullSizeToElement(j);return{content:x.encode(Z.outerHTML),size:i,adPlacementType:u,videoId:e}}removePostCopy(j){j.remove()}}},1687:(j,Z,e)=>{const u=e(2880),i=e(1568),M=e(655);j.exports=class extends M{constructor(j,Z,e,u){super(j,Z,e),this.tiktokConfig=u,this.id=j,this.adBlockerAgent=e,this.feedContainer=null,this.feedObserver=null}HideElement(j){}setSizesAndIdForAllElements(j){}getTiktokAdObject(j,Z,e,u){}removePostCopy(j){}ActualizeDetector(){return this.feedContainer=this.#K(),!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.#C()}CheckIfAdRendered(j){for(let Z of this.tiktokConfig.FEED.PREVIEW_QUERIES){const e=j.querySelector(Z);if(e?.src)return new RegExp(/^https:\/\//).test(e.src)}return!1}#K(){const j=this.tiktokConfig.FEED.CONTAINER_QUERIES,Z=this.tiktokConfig.FEED.CONTAINER_MIN_HEIGHT;for(let e of j){let j=document.querySelector(e);if(j){if(j.offsetHeight>=Z)return j}}}#C(){let j=this.#$();if(j?.length)for(let Z of j)if(this.CheckIfAdRendered(Z)&&!Z.hasAttribute(i.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(Z);const j=u.GenerateAndSetBisIdToInstagramAds(Z),e=this.#W(Z),M=this.#a(Z),o=this.getTiktokAdObject(Z,e,M,i.TIKTOK_AD_PLACEMENT_TYPE_FEED);this.removePostCopy(e);let m=setTimeout((()=>{this.ExtractAd.call(this,j,o),clearTimeout(m)}),100)}}#$(){if(!this.feedContainer)return[];let j=Array.from(this.feedContainer.children),Z=[];for(let e of j){if(this.tiktokConfig.FEED.PROMOTED_QUERIES.find((j=>e.querySelector(j)))){Z.push(e);break}}return Z}#W(j){const Z=this.feedContainer.cloneNode(),e=document.createElement("html"),u=this.#g(),i=this.#P(),M=j.cloneNode(!0);return Z.appendChild(M),u.appendChild(Z),e.appendChild(i),e.appendChild(u),e}#g(){const j=document.createElement("body"),Z=document.querySelectorAll('body style, body link[rel="stylesheet"]');return Z&&Z.forEach((Z=>{const e=Z.cloneNode(!0);j.appendChild(e)})),j}#P(){const j=document.createElement("head"),Z=document.querySelectorAll("style"),e=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head');return Z&&Z.forEach((Z=>{let e="";for(let j of Z.sheet.cssRules)e+=j.cssText;const u=Z.cloneNode(!0);u.innerHTML=e,j.appendChild(u)})),e&&e.forEach((Z=>{let e=Z.cloneNode(!0);j.appendChild(e)})),j}#a(j){const Z=this.tiktokConfig.FEED.VIDEO_CONTAINER_QUERIES.find((Z=>j.querySelector(Z))),e=j.querySelector(Z);if(e){const j=new RegExp(/\d{5,}/).exec(e.id);return j?j[0]:null}return null}}},8838:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j,Z){this.id=j,this.AdBlockerAgent=Z}InjectDetector(j){if(document.head){let j=document.createElement("script");this.setAttributes(j),document.head.appendChild(j)}}setAttributes(j){const Z=u.getURL("../executors/tiktok.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z,this.AdBlockerAgent.IsEnabledForTiktok()&&j.setAttribute("adblock_use","")}}},9203:(j,Z,e)=>{const u=e(1568),i=e(4736);j.exports=class{constructor(j,Z,e,u){this.id=j,this.videoTrafficDetector=null,this.ioManager=e,this.adBlockerAgent=u,this.config=Z.twitchConfig,this.videoTrafficDetector=new i(this.id,this.config,this.ioManager),this.videoTrafficDetector.InjectDetector()}ActivateDetector(j){j===u.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0)}}},4736:(j,Z,e)=>{const u=e(2880),i=e(9358),M=e(855);j.exports=class extends M{constructor(j,Z,e){super(j,Z,e,!0),this.id=j,this.IOManager.onGotTwitchVideoInstreamDataCallback=this.processTwitchInstreamData.bind(this),this.signature=null,this.token=null,this.config=Z}InjectDetector(){if(document.head){let j=document.createElement("script");this.setAttributes(j),document.head.appendChild(j)}}setAttributes(j){const Z=u.getURL("../executors/twitch.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}processTwitchInstreamData(j){this.findAndSaveSignatureAndToken(j.content);const Z=this.parsePostBodyData(j);let e=this.buildInstreamAdURL(Z);const u=this.prepareObjectToSend(e);this.sendCandidateToBackground(u)}findAndSaveSignatureAndToken(j){j?.includes("streamPlaybackAccessToken")&&(this.signature=j.match(/signature":(| )["'](?<sig>.[^"]*)",/)?.groups?.sig,this.token=encodeURIComponent(j.match(/value":(| )["'](?<token>.*)/).groups.token.replace(/","signature":.*/,"").replace(/\\/g,"")))}parsePostBodyData(j){if(!new RegExp("video-edge.*.ts$").test(j.url)&&"application/x-www-form-urlencoded; charset=utf-8"!==j.type)return;if(!j.encodedPostBody||0!==j.encodedPostBody.search(/^data=/))return;let Z=i.decode(j.encodedPostBody.replace(/data=/,""),!1);return JSON.parse(Z)}buildInstreamAdURL(j){if(!this.signature)return;const Z={};if(Z.channel=document.location.pathname.match(/\//g)?.length>1?"":document.location.pathname.replace(/\//g,""),!Z.channel)return;Z.browserFamily=u.IsChrome()?"chrome":"firefox",Z.browserVersion=navigator.userAgent.match(new RegExp("(chrome|firefox)/(?<browserVersion>\\d{3}.\\d)","i")).groups.browserVersion;const{osName:e,osVersion:i}=navigator.userAgent.match(/\((?<osName>.[^ ]*)\s(?<osVersion>.[^;]*);\)?/)?.groups;Z.osName=e,Z.osVersion=i,Z.signature=this.signature,Z.token=this.token,Z.p=Math.floor(1e7*Math.random())+1;for(let e of j)if(e?.properties.hasOwnProperty("play_session_id")){Z.playSessionId=e.properties.play_session_id;break}return Z.playSessionId?this.replaceMacrosesInUrl(Z):void 0}getMacrosArray(){return this.config.URL_PATTERN_TO_GET_HLS.match(/\$\{(.[^}]*)}/g).map((j=>j.replace(/[${}]/g,"")))}replaceMacrosesInUrl(j){let Z=this.config.URL_PATTERN_TO_GET_HLS;for(let[e,u]of Object.entries(j))Z=Z.replace(`\${${e}}`,u);return Z}prepareObjectToSend(j){return{requestMethod:"GET",urlToGetInstreamData:j,url:"",contentType:"",mediaType:"",alias:"TWITCH_HLS"}}sendCandidateToBackground(j){this.IOManager.SendTwitchInstreamData(this.id,j)}}},4919:(j,Z,e)=>{const u=e(8384),i=e(2880),M=e(1568),o=e(9346),m=e(5364),w=e(1402),_=e(9473);e(5473);j.exports=class extends o{constructor(j,Z,e){super(j),this.id=j,this.onPageRefreshed=this.onPageUrlChanged,this.twConfig=Z.TwitterConfig,this.TwitterDetectorFeed=null,this.TwitterDetectorRightColumn=null,this.VideoTrafficDetector=null,this.AdBlockerAgent=e,this.ActivateVideoTrafficDetector()}onPageUrlChanged(j,Z){this.available&&setTimeout((()=>{this.DeactivateDetectors(M.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new w(this.id),this.VideoTrafficDetector.InjectDetector())}ActivateDetector(j){j===M.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.TwitterDetectorFeed=new _(this.id,this.twConfig.FEED.DETECTOR_OPTIONS,this.twConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}ActivateDetectors(){this.TwitterDetectorFeed.ActivateDetector()}AddNecessaryMethods(){this.TwitterDetectorFeed.ExtractAd=this.processAndSendTwitterAd.bind(this),this.TwitterDetectorFeed.isVideo=this.isVideo.bind(this),this.TwitterDetectorFeed.HideElement=this.HideElement.bind(this),this.TwitterDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.TwitterDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.TwitterDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.TwitterDetectorFeed.getAdTwitterObject=this.getAdTwitterObject.bind(this)}DeactivateDetectors(j){this.TwitterDetectorFeed.DeactivateDetector(j)}IsAdContentRendered(j,Z){let e=!1;if(j){let u=j.querySelectorAll(this.twConfig.PROGRESS_SELECTOR);if(u&&0===u.length){let u=i.GetFullElementSize(j);if(u.w>0){i.GetImagesSpacePercentage(this.twConfig.TAGS_FOR_LOADING_CHECK,j,u).some((j=>j>=Z))&&(e=!0)}}}return e}processAndSendTwitterAd(j,Z,e=!1,i=document){let o=i.querySelector(`[${M.ATTRIBUTE_BIS_ID}=${j}]`);o&&(m.SendCandidatePlacementsCount(this.id,1,M.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER,null),m.SendAdCandidates(this.id,[Z],M.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER,null),u.q&&u.B&&(o.style.cssText+=e?M.STYLES_OUTLINE_VIDEO_AD:M.STYLES_OUTLINE_SUCCESS_DETECT))}}},9473:(j,Z,e)=>{const u=e(2880),i=e(1568),M=e(655);j.exports=class extends M{constructor(j,Z,e,i){super(j,Z,i),this.available=!1,this.twConfig=e,this.AdBlockerAgent=i,this.feedObserver=null,this.activated=!1,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.lastFeedPostAdsCheckTime=u.GetCurrentTimestampMs(),this.lastFeedWhoToFollowAdsCheckTime=u.GetCurrentTimestampMs(),this.feedContainer=null}isVideo(j,Z){}HideElement(){}IsAdContentRendered(j,Z){}doesElementExists(j){}setSizesAndIdForAllElements(j){}getAdTwitterObject(j,Z,e){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}get getFeedContainer(){const j=this.twConfig.FEED.CONTAINER;let Z=Array.from(document.querySelectorAll(j)).filter((j=>j&&j.children.length>2));return Z&&Z.length?Z[0]:null}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.startIntervalDetectCandidates.bind(this,i.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processAdsFromFeed()}processAdsFromFeed(){this.processFeedAds(),this.processFeedWhoToFollowAds()}processFeedAds(){this.extractOccurrences(i.TWITTER_AD_PLACEMENT_TYPE_FEED)}processFeedWhoToFollowAds(){this.extractOccurrences(i.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW)}allCellsAndMinImgSpace(j){let Z=[],e=0;return j===i.TWITTER_AD_PLACEMENT_TYPE_FEED?(this.feedContainer&&(Z=Array.from(this.feedContainer.children)),e=this.twConfig.FEED.MIN_IMGS_SPACE_PERCENTAGE):j===i.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW&&(Z=Array.from(document.querySelectorAll(this.twConfig.FEED.WHO_TO_FOLLOW_SELECTOR)),e=this.twConfig.FEED.WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE),Z=Z.filter((j=>this.isPromoted(j))),{allCells:Z,minImgSquarePercentage:e}}extractOccurrences(j){let{allCells:Z,minImgSquarePercentage:e}=this.allCellsAndMinImgSpace(j);if(Z.length)for(const M of Z)if(!M.hasAttribute(i.ATTRIBUTE_BIS_ID)&&!M.hasAttribute(i.ATTRIBUTE_BIS_SIZE)&&this.IsAdContentRendered(M,e)){let Z,e=u.GenerateAndSetBisIdToTwitterAds(M);this.setSizesAndIdForAllElements(M);let o=this.isVideo(M,this.twConfig.FEED.TAGS_FOR_VIDEO_TWEET_CHECK);const m=M.cloneNode(!0);let w=this.buildBannerHtml(m,j),_=this.chooseContent(M,w);Z=this.getAdTwitterObject(_,M,j,this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT),j===i.TWITTER_AD_PLACEMENT_TYPE_FEED&&(o&&!this.isCarouselCandidate(M)?Z.videoData={}:!o&&this.isCarouselCandidate(M)&&this.twConfig.COLLECT_CAROUSEL_DATA&&(Z.carouselData={})),this.AdBlockerAgent.IsEnabledForTwitter()&&!this.AdBlockerAgent.IsElementHidden(M)&&(this.HideElement(M),this.AdBlockerAgent.SetHiddenAmount(1)),setTimeout(this.ExtractAd.bind(this,e,Z,o),100)}}chooseContent(j,Z){return this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT?Z:j.querySelector(this.twConfig.FEED.TWEETS_SELECTOR)?j.querySelector(this.twConfig.FEED.TWEETS_SELECTOR):j}buildBannerHtml(j,Z){let e=this.feedContainer;this.setWrapperClass(e),j.style.transform="none",j.style.position="relative";let u=this.headCopyWithStyles;const i=document.createElement("html"),M=this.bodyCopyWithStyles,o=document.createElement("div"),m=e.cloneNode();return m.style.minHeight="auto",o.appendChild(m),this.setWrapperStyles(e,o),i.appendChild(u),m.appendChild(j),M.appendChild(o),i.appendChild(M),i}setWrapperClass(j){let Z=j.parentElement,e=!1;if(Z)for(let u=0;u<50&&!e&&Z;u++)if(Z.nextSibling&&-1!==Z.nextSibling.nodeName.search(/style/i)&&Z.previousSibling&&-1!==Z.previousSibling.nodeName.search(/style/i)){let u=Z.getAttribute("class");j.className+=j.className.length?" "+u:u,e=!0}else Z=Z.parentElement}setWrapperStyles(j,Z){Z.style.cssText=Z.style.cssText+`max-width: ${this.maxWidthContainer(j)}`}maxWidthContainer(j){return j?j.offsetWidth+"px":"auto"}get bodyCopyWithStyles(){const j=document.createElement("body"),Z=Array.from(document.querySelectorAll("body style")).map((j=>{if(j)return j.cloneNode(!0)}));return Z&&Z.forEach((Z=>{j.appendChild(Z)})),j}get headCopyWithStyles(){const j=document.createElement("head"),Z=Array.from(document.querySelectorAll("head style, head meta")).map((j=>{if(j)return j.cloneNode(!0)}));return Z&&Z.forEach((Z=>{j.appendChild(Z)})),j}isPromoted(j){if(j){let Z=Array.from(j.querySelectorAll(this.twConfig.PROMOTED_SELECTOR));if(Z.length)return Z.some((j=>{let Z=j.textContent;return!(!Z||"string"!=typeof Z)&&this.twConfig.PROMOTED_ALIASES.some((j=>{let e=Z.toLowerCase().trim().split(" ");return e.length<6&&e.includes(j.toLowerCase().trim())}))}))}return!1}isCarouselCandidate(j){if(j){if(j.querySelector(this.twConfig.FEED.CHECK_IF_CAROUSEL_QUERY))return!0}return!1}}},5473:()=>{},1402:(j,Z,e)=>{const u=e(2880);j.exports=class{constructor(j){this.id=j}InjectDetector(){if(document.head){let j=document.createElement("script"),Z=function(){document.head.appendChild(j),window.removeEventListener("DOMContentLoaded",Z)};this.setAttributes(j),window.addEventListener("DOMContentLoaded",Z)}}setAttributes(j){const Z=u.getURL("../executors/twitter.js");j.setAttribute("bis_use","true"),j.type="text/javascript",j.setAttribute("charset","utf-8"),j.setAttribute("nonce",""),j.src=Z}}},2880:(j,Z,e)=>{const u=e(1568);class i{static QuerySelectorAll(j,Z){return document.__proto__.querySelectorAll.call(j,Z)}static QuerySelector(j,Z){return document.__proto__.querySelector.call(j,Z)}static Escape(j){return j.replace(/\"/g,"&quot;")}static ToJSON(j){return"function"==typeof j.toJSON?j.toJSON():JSON.stringify(j)}static GetBaseHref(){let j=i.QuerySelector(document,"base");return j&&j.href?j.href:""}static GetTabIdKey(j){return"tb_"+j}static GetMainPageId(j){return"mp_"+j}static IsOnChromeRuntime(){let j=!0;if(chrome){if(chrome.runtime){try{chrome.runtime.getManifest()}catch(Z){j=!1}if(j)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(chrome.app)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(self.navigator.userAgent.toLowerCase().includes("firefox"))return!!chrome.runtime;return!1}static GetElementSize(j){let Z={x:0,y:0,w:0,h:0};if(j&&j.getBoundingClientRect){let e=j.getBoundingClientRect();Z={x:~~(e.left+window.scrollX),y:~~(e.top+window.scrollY),w:~~e.width,h:~~e.height}}return Z}static IsCoordinatesValid(j){return!!(j&&j.hasOwnProperty("x")&&"number"==typeof j.x&&j.hasOwnProperty("y")&&"number"==typeof j.y)}static GetFullElementSize(j,Z,e){let u=i.GetElementSize(j);return i.IsCoordinatesValid(e)&&(u.x=u.x+e.x,u.y=u.y+e.y),i.IsCoordinatesValid(Z)?(u.abs_x=u.x+Z.x,u.abs_y=u.y+Z.y):(u.abs_x=u.x,u.abs_y=u.y),u}static SetFullSizeToElement(j,Z,e){let u={x:0,y:0,w:0,h:0};return i.IsCoordinatesValid(e)&&(u.x=u.x+e.x,u.y=u.y+e.y),j&&j.setAttribute&&(u=i.GetFullElementSize(j,Z,e),j.setAttribute("bis_size",i.ToJSON(u))),u}static GenerateAndSetBisId(j,Z){let e=Z+i.GenerateQuickId();return j&&j.setAttribute&&j.setAttribute(u.ATTRIBUTE_BIS_ID,e),e}static GenerateAndSetBisIdToFrame(j){return i.GenerateAndSetBisId(j,"fr_")}static GenerateAndSetBisIdToBanner(j){return i.GenerateAndSetBisId(j,"bn_")}static GenerateAndSetBisIdToPinterestAds(j){return i.GenerateAndSetBisId(j,"pt_")}static GenerateAndSetBisIdToInstagramAds(j){return i.GenerateAndSetBisId(j,"ig_")}static GenerateAndSetBisIdToLinkedinAds(j){return i.GenerateAndSetBisId(j,"ln_")}static GenerateAndSetBisIdToFBAds(j){return i.GenerateAndSetBisId(j,"fb_")}static GenerateAndSetBisIdToTwitterAds(j){return i.GenerateAndSetBisId(j,"tw_")}static GenerateAndSetBisIdToRedditAds(j){return i.GenerateAndSetBisId(j,"rd_")}static SetBisDepth(j,Z){j&&j.setAttribute&&j.setAttribute("bis_depth",Z)}static SetBisChainId(j,Z){j&&j.setAttribute&&j.setAttribute("bis_chainid",Z)}static SetBannerId(j,Z){j&&j.setAttribute&&j.setAttribute("bis_bannerid",Z)}static UpdateCandidateStatusBorderColor(j,Z){if(j&&j.style&&j.style.cssText&&Z){let e="";Z.filteredOut?e=u.STYLES_BORDER_BANNER_FILTERED:Z.sentToBackend?e=u.STYLES_BORDER_BANNER_SENT:Z.targetUrlExtracted?e=u.STYLES_BORDER_BANNER_URL_EXTRACTED:Z.fullContentExtracted&&(e=u.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);let i=j.style.cssText;i.includes(e)||(i=i.replace(/((border|outline): .{3,20} solid 6px !important;)|((border|outline): 6px solid .{3,20} !important;)/,e),j.style.cssText=i)}}static GetMainDomainFromHost(j){if(j&&j.split){let Z=j.split(".");if(Z.length>=2){let j=Z[Z.length-2],e=Z[Z.length-1];return Z.length>=3&&2===e.length&&3===j.length?`${Z[Z.length-3]}.${j}.${e}`:j+"."+e}}return null}static GetMainDomainFromUrl(j){return i.GetMainDomainFromHost(i.GetHostNameFromUrl(j))}static GetHostNameFromUrl(j){let Z=j.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=Z&&Z.length>2&&"string"==typeof Z[2]&&Z[2].length>0?Z[2]:null}static IsUrlFromHost(j,Z){return-1!==j.indexOf(i.GetMainDomainFromUrl(Z))}static IsPublisherInBlacklist(j,Z){let e=!1,u=i.GetHostNameFromUrl(j);return Z&&Z.length&&u&&Z.includes(u)&&(e=!0),e}static GetUrlFromStyleStr(j){let Z=j.replace(/"/g,"'"),e=Z.indexOf("http");-1===e&&(e=Z.indexOf("//"));let u=Z.indexOf("'",e),i="";return e>0&&u>0&&e<u&&(i=Z.substr(e,u-e)),i}static GetCurrentDataTimeStr(){function j(j){return j<10?"0"+j:""+j}let Z=new Date;return`${Z.getFullYear()}-${j(Z.getMonth()+1)}-${j(Z.getDate())} ${j(Z.getHours())}:${j(Z.getMinutes())}:${j(Z.getSeconds())}`}static GetCurrentDataTimeStrWithGMT(){function j(j){return j<10?"0"+j:""+j}let Z=new Date;return`${Z.getFullYear()}-${j(Z.getMonth()+1)}-${j(Z.getDate())} ${j(Z.getHours())}:${j(Z.getMinutes())}:${j(Z.getSeconds())} ${Z.toTimeString().match(/GMT.\S*/)[0]}`}static GetWindowSize(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}static IsIframeHasContentScript(j){try{if(j&&!i.IsIframeSecure(j)&&"ok"!==j.contentDocument.body.getAttribute("bis_status"))return!1}catch(j){}return!0}static IsIframeSecure(j){return!j||0!==j.src.length&&"about:blank"!==j.src&&"about:srcdoc"!==j.src&&0!==j.src.indexOf("javascript:")}static isValidUrl(j){return"string"==typeof j&&j.length>0&&(-1!==j.indexOf("http")||-1!==j.indexOf("//"))}static IsValidBisId(j){return!!(j.startsWith("mp_")||j.startsWith("bg_")||j.startsWith("fr_"))}static IsYouTubeUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("youtube.com")}static IsFacebookUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("facebook.com")}static IsTwitterUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.search(/twitter|x\.com/)}static IsRedditUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("reddit.com")}static IsPinterestUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}static IsInstagramUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("instagram.com")}static IsLinkedinUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("linkedin.com")}static IsTiktokUrl(j){return!!~i.GetHostNameFromUrl(j).indexOf("tiktok.com")}static IsTwitchUrl(j){let Z=i.GetHostNameFromUrl(j);return!!Z&&-1!==Z.indexOf("twitch.tv")}static isClaudeUrl(j,Z){const e=Z?.l?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isChatgptUrl(j,Z){const e=Z?.V?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isDeepseekUrl(j,Z){const e=Z?.I?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isCopilotUrl(j,Z){const e=Z?.T?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isPerplexityUrl(j,Z){const e=Z?.p?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isMetaUrl(j,Z){const e=Z?.J?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isGeminiUrl(j,Z){const e=Z?.G?.URL_PATTERN,u=i.GetHostNameFromUrl(j);return!!e&&i.getRegExpFromString(e).test(u)}static isAI(j,Z){return[i.isClaudeUrl,i.isChatgptUrl,i.isCopilotUrl,i.isDeepseekUrl,i.isPerplexityUrl,i.isMetaUrl,i.isGeminiUrl].some((e=>e(j,Z)))}static GetFullIdStr(j,Z,e){return`ext:${chrome.runtime.id}-chainId:${j}-frameId:${Z}-bisId:${e}`}static GetRandomIntInRange(j,Z){return parseInt((Math.random()*(Z-j)+j).toFixed(0))}static GetCurrentTimestamp(){return Date.now()/1e3|0}static GetCurrentTimestampMs(){return Date.now()}static GenerateQuickId(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}static GenerateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(j){let Z=16*Math.random()|0;return("x"==j?Z:3&Z|8).toString(16)}))}static IsInFilterList(j,Z){let e=!1;if(j)for(let u=0;u<j.length&&!e;u++)-1!==Z.indexOf(j[u])&&(e=!0);return e}static IsChrome(){return-1!==navigator.userAgent.indexOf("Chrome")}static IsFirefox(){return-1!==navigator.userAgent.indexOf("Firefox")}static IsFBVideoDataValid(j){let Z=!1;if(j)try{"number"==typeof j.detectionTime&&"string"==typeof j.videoId&&"string"==typeof j.videoUrl&&j.videoId.length&&j.videoUrl.length&&(Z=!0)}catch(j){}return Z}static GetDefaultAdblockerStatus(){return{[u.ADBLOCKER_FOR_DISPLAY]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_FACEBOOK]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_TWITTER]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_REDDIT]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_PINTEREST]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_INSTAGRAM]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_TIKTOK]:u.ADBLOCKER_STATUS_DISABLED,[u.ADBLOCKER_FOR_LINKEDIN]:u.ADBLOCKER_STATUS_DISABLED,[u.USE_LOCAL_CONFIG]:u.ADBLOCKER_STATUS_DISABLED}}static GetImagesSpacePercentage(j,Z,e){let u=[];if(!Z)return u;const M=e.w*e.h;let o=[],m=Array.from(Z.querySelectorAll("*")).map((Z=>Z.shadowRoot?Z.shadowRoot.querySelectorAll(j):"IMG"===Z.nodeName||"IFRAME"===Z.nodeName?Z:Z.querySelectorAll(j))).filter((j=>j)).reduce(((j,Z)=>(Z&&Z.length&&Z.forEach((Z=>{j.includes(Z)||j.push(Z)})),"IMG"!==Z.nodeName&&"IFRAME"!==Z.nodeName||j.push(Z),j)),[]);if(!m?.length||0===M)return u;for(let Z of m){let e=Z;e&&e.shadowRoot&&(e=e.shadowRoot.firstElementChild.querySelector(j));let u=i.GetElementSize(e);o.push(u.w*u.h/M*100)}return o}static CheckDocumentReadyState(j){return document.readyState===j}static getURL(j){return chrome.runtime.getURL(j)}static getDataFromStorageLocal(j){return chrome.storage.local.get([j]).then((Z=>Z[j]?Z[j]:Z))}static getDataFromStorageSync(j){return new Promise(((Z,e)=>{try{chrome.storage.sync.get([j]).then((e=>{e[j]?Z(e[j]):Z(e)}))}catch(j){e(j)}}))}static GetCookie(j){let Z=j+"=",e=decodeURIComponent(document.cookie).split(";");for(let j=0;j<e.length;j++){let u=e[j];for(;" "==u.charAt(0);)u=u.substring(1);if(0==u.indexOf(Z))return u.substring(Z.length,u.length)}return""}static GetOriginFromHref(j){j&&j.search(/^http/)}static GetLocaleDateString(){try{return(new Date).toJSON().replace("T",", ")}catch(j){return(new Date).toTimeString()}}static GetAllCookies(){return document.cookie}static async waitForElement(j,Z=1e4){return new Promise(((e,u)=>{const i=document.querySelector(j);if(i)return e(i);const M=new MutationObserver((()=>{const Z=document.querySelector(j);Z&&(M.disconnect(),e(Z))}));M.observe(document.body,{childList:!0,subtree:!0}),Z&&setTimeout((()=>{M.disconnect(),u(new Error(`Element ${j} not found within timeout`))}),Z)}))}static getRegExpFromString(j){let Z=j.replace(/.*\/([gimy]*)$/,"$1"),e=j.replace(new RegExp("^/(.*?)/"+Z+"$"),"$1");return new RegExp(e,Z)}}j.exports=i},1568:(j,Z,e)=>{const u=e(9358);j.exports=class{static get DOCUMENT_READYSTATE_LOADING(){return"loading"}static get DOCUMENT_READYSTATE_INTERACTIVE(){return"interactive"}static get DOCUMENT_READYSTATE_COMPLETE(){return"complete"}static get ATTRIBUTE_BIS_ID(){return"bis_id"}static get ATTRIBUTE_BIS_SIZE(){return"bis_size"}static get ATTRIBUTE_BIS_STYLE(){return"bis_style"}static get ATTRIBUTE_BIS_STATUS(){return"bis_status"}static get ATTRIBUTE_BIS_LABEL(){return"bis_label"}static get ATTRIBUTE_BIS_ELEMENT_ID(){return"bis_element_id"}static get ATTRIBUTE_BIS_HIDE_HEIGHT(){return"bis_hide_height"}static get ATTRIBUTE_BIS_HIDE_WIDTH(){return"bis_hide_width"}static get ATTRIBUTE_BIS_HIDE_STATUS(){return"bis_hide_status"}static get ATTRIBUTE_BIS_HIDE_LEFT_OFFSET(){return"bis_hide_left_offset"}static get ATTRIBUTE_BIS_PRECISE_AD(){return"bis_precise_ad"}static get ACTIVATION_BY_ADS_MANAGER(){return"ACTIVATION_BY_ADS_MANAGER"}static get ACTIVATION_BY_ADS_SELF(){return"ACTIVATION_BY_ADS_SELF"}static get MESSAGE_ID(){return"PANELOS_MESSAGE"}static get MESSAGE_TYPE_TEST(){return"TEST"}static get MESSAGE_TYPE_IFRAME_CONTENT(){return"IFRAME_CONTENT"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE"}static get MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}static get MESSAGE_TYPE_TAB_INITIALIZATION(){return"TAB_INITIALIZATION"}static get MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}static get MESSAGE_TYPE_TAB_URL_CHANGED(){return"TAB_URL_CHANGED"}static get MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED(){return"TAB_ADBLOCKER_STATUS_CHANGED"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION(){return"IFRAME_INITIALIZATION"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE(){return"IFRAME_INITIALIZATION_RESPONSE"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}static get MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL(){return"GET_WINDOW_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND(){return"GET_WINDOW_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL(){return"GET_WINDOW_CLICK_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_FRAME_CONTENT(){return"GET_FRAME_CONTENT"}static get MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK(){return"TARGET_URL_DETECTION_BY_CLICK"}static get MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET(){return"NEW_PAGE_CREATED_TICKET"}static get MESSAGE_TYPE_PANEL_REGULATOR_RESULT(){return"PANEL_REGULATOR_RESULT"}static get MESSAGE_TYPE_OUT_TICKET(){return"OUT_TICKET"}static get MESSAGE_TYPE_CHAIN_ACTIVATION(){return"CHAIN_ACTIVATION"}static get MESSAGE_TYPE_HEADER_INFO_TO_STORAGE(){return"HEADER_INFO_TO_STORAGE"}static get MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE(){return"LINKEDIN_FRAME_CONTENT_TO_STORAGE"}static get MESSAGE_TYPE_CANDIDATES_DATA_SKINADS(){return"CANDIDATES_DATA_SKINADS"}static get MESSAGE_TYPE_CANDIDATES_DATA_BANNERS(){return"CANDIDATES_DATA_BANNERS"}static get MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK(){return"CANDIDATES_DATA_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH(){return"CANDIDATES_VIDEO_DATA_TWITCH"}static get MESSAGE_TYPE_CANDIDATES_DATA_TWITTER(){return"CANDIDATES_DATA_TWITTER"}static get MESSAGE_TYPE_CANDIDATES_DATA_REDDIT(){return"CANDIDATES_DATA_REDDIT"}static get MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST(){return"CANDIDATES_DATA_PINTEREST"}static get MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM(){return"CANDIDATES_DATA_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN(){return"CANDIDATES_DATA_LINKEDIN"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER(){return"CANDIDATE_PLACEMENTS_TWITTER"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT(){return"CANDIDATE_PLACEMENTS_REDDIT"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST(){return"CANDIDATE_PLACEMENTS_PINTEREST"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5(){return"CANDIDATE_PLACEMENTS_HTML5"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN(){return"CANDIDATE_PLACEMENTS_LINKEDIN"}static get MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_VIDEO_XHR_CANDIDATE(){return"VIDEO_XHR_CANDIDATE"}static get MESSAGE_TYPE_VIDEO_HAR(){return"VIDEO_HAR"}static get MESSAGE_TYPE_FACEBOOK_VIDEO_DATA(){return"FACEBOOK_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA(){return"FACEBOOK_INSTREAM_DATA"}static get MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_CANVAS_TEXT(){return"FACEBOOK_CANVAS_TEXT"}static get MESSAGE_TYPE_PINTEREST_VIDEO_DATA(){return"PINTEREST_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_VIDEO_DATA(){return"TWITTER_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_CAROUSEL_DATA(){return"TWITTER_CAROUSEL_DATA"}static get MESSAGE_TYPE_REDDIT_VIDEO_DATA(){return"REDDIT_VIDEO_DATA"}static get MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA(){return"REDDIT_RIGHT_COLUMN_DATA"}static get MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA(){return"INSTAGRAM_VIDEO_DATA"}static get MESSAGE_TYPE_INSTAGRAM_STORY_DATA(){return"INSTAGRAM_STORY_DATA"}static get MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA(){return"INSTAGRAM_FULL_TEXT_DATA"}static get MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES(){return"INSTAGRAM_CAROUSEL_SLIDES_SOURCES"}static get MESSAGE_TYPE_LINKEDIN_VIDEO_DATA(){return"LINKEDIN_VIDEO_DATA"}static get MESSAGE_TYPE_LINKEDIN_SLIDES_DATA(){return"LINKEDIN_SLIDES_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA(){return"VIDEO_TWITCH_INSTREAM_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_ACCESS_TOKEN_DATA(){return"VIDEO_XHR_ACCESS_TOKEN_DATA"}static get MESSAGE_TYPE_TIKTOK_FEED_DATA(){return"TIKTOK_FEED_DATA"}static get MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES(){return"TIKTOK_VIDEO_CANDIDATES"}static get MESSAGE_TYPE_CLAUDE_DATA(){return"CLAUDE_DATA"}static get MESSAGE_TYPE_CHATGPT_DATA(){return"CHATGPT_DATA"}static get MESSAGE_TYPE_GEMINI_DATA(){return"GEMINI_DATA"}static get MESSAGE_TYPE_COPILOT_DATA(){return"COPILOT_DATA"}static get MESSAGE_TYPE_PERPLEXITY_DATA(){return"PERPLEXITY_DATA"}static get MESSAGE_TYPE_META_AI_DATA(){return"META_AI_DATA"}static get MESSAGE_TYPE_DEEPSEEK_DATA(){return"DEEPSEEK_DATA"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID(){return"GET_PANALYTICS_ID"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION(){return"GET_PANELOS_VERSION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS(){return"GET_ADBLOCKER_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS(){return"GET_ADBLOCKER_COUNTERS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER(){return"ENABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER(){return"DISABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS(){return"GET_DATA_COLLECTION_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION(){return"ENABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION(){return"DISABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}static get MESSAGE_TYPE_GET_EXCLUDE_LIST(){return"GET_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST(){return"ADD_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST(){return"REMOVE_FROM_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_GET_CURRENT_DOMAIN(){return"GET_CURRENT_DOMAIN"}static get MESSAGE_TYPE_GET_CURRENT_PAGE_URL(){return"GET_CURRENT_PAGE_URL"}static get MESSAGE_TYPE_USE_LOCAL_CONFIG(){return"USE_LOCAL_CONFIG"}static get MESSAGE_TYPE_GET_LOCAL_CONFIG_STATUS(){return"GET_LOCAL_CONFIG_STATUS"}static get ADBLOCKER_STATUS_ENABLED(){return"enabled"}static get ADBLOCKER_STATUS_DISABLED(){return"disabled"}static get VIDEO_TRAFFIC_SOURCE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_SOURCE_JS(){return"JS"}static get VIDEO_TRAFFIC_SOURCE_XHR(){return"XHR"}static get VIDEO_TRAFFIC_MEDIA_TYPE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON(){return"JSON"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON(){return"JSON_FB"}static get VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE(){return"YT_JSON_NEXTPAGE"}static get VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH(){return"feedWatch"}static get FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE(){return"marketplace"}static get FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN(){return"rightColumn"}static get FACEBOOK_AD_PLACEMENT_TYPE_STORIES(){return"stories"}static get FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE(){return"videoPage"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_NAME(){return"[ADVERTISER_NAME]"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID(){return"[VIDEO_ID]"}static get TWITTER_AD_PLACEMENT_TYPE_FEED(){return"feedPost"}static get TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW(){return"feedWhoToFollow"}static get TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW(){return"rightColumnWhoToFollow"}static get REDDIT_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE(){return"commentPage"}static get REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get LINKEDIN_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get PINTEREST_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get PINTEREST_AD_PLACEMENT_TYPE_SEARCH(){return"searchPage"}static get PINTEREST_AD_PLACEMENT_TYPE_PIN(){return"pinPage"}static get PINTEREST_LOADER_TYPE_PIN_PAGE(){return"pinPage"}static get PINTEREST_LOADER_TYPE_USER_INFO(){return"userInfo"}static get INSTAGRAM_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get INSTAGRAM_AD_PLACEMENT_TYPE_STORY(){return"story"}static get TIKTOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get KNOWN_CSS_NAMES(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}static get FACEBOOK_DESIGN_VERSION_OLD(){return 1}static get FACEBOOK_DESIGN_VERSION_NEW(){return 2}static get OUT_TICKET_TYPE_SINGLE(){return"SINGLE"}static get OUT_TICKET_TYPE_MULTI(){return"MULTI"}static get ADBLOCKER_FOR_DISPLAY(){return"DISPLAY"}static get ADBLOCKER_FOR_FACEBOOK(){return"FACEBOOK"}static get ADBLOCKER_FOR_TWITTER(){return"TWITTER"}static get ADBLOCKER_FOR_REDDIT(){return"REDDIT"}static get ADBLOCKER_FOR_PINTEREST(){return"PINTEREST"}static get ADBLOCKER_FOR_INSTAGRAM(){return"INSTAGRAM"}static get ADBLOCKER_FOR_TIKTOK(){return"TIKTOK"}static get ADBLOCKER_FOR_LINKEDIN(){return"LINKEDIN"}static get USE_LOCAL_CONFIG(){return"CONFIG"}static get AD_DETECTOR_INITIATOR_TIMER(){return"timer"}static get AD_DETECTOR_INITIATOR_MUTATION(){return"mutation"}static get AD_DETECTOR_INITIATOR_PAGECHANGE(){return"pagechange"}static get AD_DETECTOR_INITIATOR_ACTIVATION(){return"activation"}static get AD_DETECTOR_INITIATOR_URL(){return"url"}static get AD_DETECTOR_INITIATOR_SCROLL_EVENT(){return"scroll"}static get IFRAMES_CHAIN_BUILDING_STATUS_NONE(){return 0}static get IFRAMES_CHAIN_BUILDING_STATUS_INITED(){return 1}static get IFRAMES_CHAIN_BUILDING_STATUS_STARTED(){return 2}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED(){return 3}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED(){return 4}static get IFRAMES_CHAIN_BUILDING_STATUS_FINISHED(){return 5}static get IFRAMES_TRAFFIC_FILENAME_TO_INJECT(){return"fr-co.js"}static get CANDIDATE_PROCESS_STATUS_DETECTED(){return 1}static get CANDIDATE_PROCESS_STATUS_START_PROCESSING(){return 2}static get CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED(){return 3}static get CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT(){return 4}static get TICKET_BUILDING_STATUS_INIT(){return 0}static get TICKET_BUILDING_STATUS_STARTED(){return 1}static get TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES(){return 2}static get TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES(){return 3}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE(){return 4}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE(){return 5}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE(){return 6}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE(){return 7}static get TICKET_BUILDING_STATUS_DONE(){return 8}static get MESSAGE_TYPE_CONFIG_NOT_FOUND(){return"CONFIG_NOT_FOUND"}static get MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE(){return"CONFIG_UPDATED_IN_STORAGE"}static get TICKET_ALIAS_PANALYTICSID(){return u.decode("cGFuZWxpc3RJZA==")}static get TICKET_ALIAS_PINSTANCEID(){return u.decode("cGFuZWxJZA==")}static get MAX_OUT_TICKETS_QUEUE_LENGTH(){return 20}static EXCLUDE_DOMAINS_LIST(){return"EXCLUDE_DOMAINS_LIST"}static EXCLUDE_PAGES_LIST(){return"EXCLUDE_PAGES_LIST"}static get STYLES_BORDER_BANNER_CONTENT_EXTRACTED(){return"border: 6px solid blue !important;"}static get STYLES_BORDER_BANNER_URL_EXTRACTED(){return"border: 6px solid blueviolet !important;"}static get STYLES_BORDER_BANNER_FILTERED(){return"border: 6px solid orange !important;"}static get STYLES_BORDER_BANNER_SENT(){return"border: 6px solid green !important;"}static get STYLES_OUTLINE_SUCCESS_DETECT(){return"outline: green solid 6px !important;"}static get STYLES_OUTLINE_VIDEO_AD(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}static get STYLES_OUTLINE_TEXT_AD(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}static get STYLES_CONSOLE_LOGS_INFO(){return"background-color: rgba(108, 101, 224, 0.2); color: rgba(58, 191, 224, 1)"}static get STYLES_CONSOLE_LOGS_ERROR(){return"background-color: rgba(241, 0, 43, 0.4); color: rgba(58, 191, 224, 1)"}static get STYLES_HIDE_INSTAGRAM_FEED_AD(){return["position: absolute !important; height: 0px !important; margin: 0px !important; padding: 0px !important; overflow: hidden !important;","height: 0px !important; visibility: hidden !important;"]}static get STYLES_HIDE_ELEMENT(){return"left: -10000px !important; position: absolute !important; height: 0;"}}},6882:(j,Z,e)=>{const u=e(1568),i=e(2880);j.exports=class{static get EmptyMessage(){return{posdMessageId:u.MESSAGE_ID,posdHash:i.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}static IsValid(j){try{if(void 0!==j&&void 0!==j.posdMessageId&&void 0!==j.type&&void 0!==j.content)return j.posdMessageId===u.MESSAGE_ID}catch(j){throw j}return!1}static IsStrictValid(j){try{if(void 0!==j&&void 0!==j.posdMessageId&&void 0!==j.from&&void 0!==j.to&&void 0!==j.type&&void 0!==j.content)return j.posdMessageId===u.MESSAGE_ID}catch(j){throw j}return!1}}},533:(j,Z,e)=>{const u=e(1568);j.exports=class{constructor(){}getStylesByElementsBisId(j){let Z={};return this.addStylesForNode(j,Z),j.querySelectorAll("*").forEach((j=>{this.addStylesForNode(j,Z)})),Z}addStylesForNode(j,Z){let e=this.getStyles(j);Z[j.getAttribute(u.ATTRIBUTE_BIS_ELEMENT_ID)]=e}getStyles(j){let Z=window.getComputedStyle(j,null);return this.minimiseComputedStyles(Z)}minimiseComputedStyles(j){let Z={};for(let e=0;e<j.length;e++){let i=j.item(e),M=j.getPropertyValue(i);Z[M]||(Z[M]=[]);let o=u.KNOWN_CSS_NAMES.indexOf(i);o>=0?Z[M].push(o):Z[M].push(i)}return Z}}},9358:j=>{var Z={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(j,e=!0){if(TextEncoder&&atob&&btoa&&e)return Z.bytesToBase64((new TextEncoder).encode(j));let u,i,M,o,m,w,_,x="",K=0;for(j=Z._utf8_encode(j);K<j.length;)u=j.charCodeAt(K++),i=j.charCodeAt(K++),M=j.charCodeAt(K++),o=u>>2,m=(3&u)<<4|i>>4,w=(15&i)<<2|M>>6,_=63&M,isNaN(i)?w=_=64:isNaN(M)&&(_=64),x=x+this._keyStr.charAt(o)+this._keyStr.charAt(m)+this._keyStr.charAt(w)+this._keyStr.charAt(_);return x},decode:function(j,e=!0){if("{"===j[0])return j;if(TextDecoder&&atob&&btoa&&e)return(new TextDecoder).decode(Z.base64ToBytes(j));let u,i,M,o,m,w,_,x="",K=0;for(j=j.replace(/[^A-Za-z0-9\+\/\=]/g,"");K<j.length;)o=this._keyStr.indexOf(j.charAt(K++)),m=this._keyStr.indexOf(j.charAt(K++)),w=this._keyStr.indexOf(j.charAt(K++)),_=this._keyStr.indexOf(j.charAt(K++)),u=o<<2|m>>4,i=(15&m)<<4|w>>2,M=(3&w)<<6|_,x+=String.fromCharCode(u),64!=w&&(x+=String.fromCharCode(i)),64!=_&&(x+=String.fromCharCode(M));return x=Z._utf8_decode(x),x},_utf8_encode:function(j){j=j.replace(/\r\n/g,"\n");let Z="";for(let e=0;e<j.length;e++){let u=j.charCodeAt(e);u<128?Z+=String.fromCharCode(u):u>127&&u<2048?(Z+=String.fromCharCode(u>>6|192),Z+=String.fromCharCode(63&u|128)):(Z+=String.fromCharCode(u>>12|224),Z+=String.fromCharCode(u>>6&63|128),Z+=String.fromCharCode(63&u|128))}return Z},_utf8_decode:function(j){let Z="",e=0,u=0,i=0,M=0;for(;e<j.length;)u=j.charCodeAt(e),u<128?(Z+=String.fromCharCode(u),e++):u>191&&u<224?(i=j.charCodeAt(e+1),Z+=String.fromCharCode((31&u)<<6|63&i),e+=2):(i=j.charCodeAt(e+1),M=j.charCodeAt(e+2),Z+=String.fromCharCode((15&u)<<12|(63&i)<<6|63&M),e+=3);return Z},base64ToBytes:function(j){const Z=atob(j);return Uint8Array.from(Z,(j=>j.codePointAt(0)))},bytesToBase64:function(j){const Z=Array.from(j,(j=>String.fromCodePoint(j))).join("");return btoa(Z)}};j.exports=Z}},Z={};function e(u){var i=Z[u];if(void 0!==i)return i.exports;var M=Z[u]={exports:{}};return j[u](M,M.exports,e),M.exports}e.n=j=>{var Z=j&&j.__esModule?()=>j.default:()=>j;return e.d(Z,{a:Z}),Z},e.d=(j,Z)=>{for(var u in Z)e.o(Z,u)&&!e.o(j,u)&&Object.defineProperty(j,u,{enumerable:!0,get:Z[u]})},e.o=(j,Z)=>Object.prototype.hasOwnProperty.call(j,Z),(()=>{"use strict";e(7452);const j=e(1568),Z=e(3129),u=e(3870),i=e(2880);if(self===top){(new Z).Init()}else if(i.CheckDocumentReadyState(j.DOCUMENT_READYSTATE_LOADING))document.addEventListener("DOMContentLoaded",(()=>{(new u).Init()}));else if(i.CheckDocumentReadyState(j.DOCUMENT_READYSTATE_INTERACTIVE)||i.CheckDocumentReadyState(j.DOCUMENT_READYSTATE_COMPLETE)){(new u).Init()}})()})();