(()=>{const j=null!==(Z=sessionStorage.getItem("bis_data"))?JSON.parse(Z):null;var Z;const e=document.querySelector("script[bis_id]");window.bisData={id:e?e.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:j?j.config.html5TargetUrlDetectionConfig:null};const u=window.bisData.html5TargetUrlDetectionConfig,i=window.bisData.id;function M(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function o(j,Z,e,u){if(!window.bisData)return;let i=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var o=document.querySelectorAll(i);if(o.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var m=function(i){if(window.bisData.clickTargetUrl.some((j=>j.href===i)))return null;if(window.bisData.clickTargetUrl.push({href:i,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let i="GET_WINDOW_TARGET_URL"===u.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:u.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},o={posdMessageId:"PANELOS_MESSAGE",posdHash:M(),type:`${u.type}_RESPOND`,from:j,to:j.substring(0,j.length-2),content:i};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(o)),Z.postMessage&&Z.postMessage(o,e)}return null};window.open=m;for(var w=0;w<o.length&&0===window.bisData.clickTargetUrl.length;w++)try{if(o[w]&&o[w].click&&o[w].getBoundingClientRect){let j=o[w].getBoundingClientRect();j.width>40&&j.height>40&&(window.bisData.elementSquare=j.width*j.height,window.open==m&&o[w].click())}}catch(j){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(j){try{var Z=i,e=j.data;let w=j.source,_=j.origin;if(void 0!==(m=e)&&void 0!==m.posdMessageId&&void 0!==m.from&&void 0!==m.to&&void 0!==m.type&&void 0!==m.content&&"PANELOS_MESSAGE"===m.posdMessageId&&e.to===Z)if("GET_WINDOW_TARGET_URL"===e.type){let i=function(j,Z,e){let u=K(Z,[i,M,o,m,w,_],e);u&&u.length;return u;function i(j){if(void 0!==j.clickTag&&x(j.clickTag))return{href:j.clickTag,square:1000001}}function M(j){if(void 0!==j.adData){if(void 0!==j.adData.destination_url&&x(j.adData.destination_url))return{href:j.adData.destination_url,square:1000001};if(void 0!==j.adData.redirect_url&&x(j.adData.redirect_url))return{href:j.adData.redirect_url,square:1000001}}}function o(j){if(void 0!==j.BF&&void 0!==j.BF.Parameters&&void 0!==j.BF.Parameters.targeturl&&x(j.BF.Parameters.targeturl))return{href:j.BF.Parameters.targeturl,square:1000001}}function m(j){if(void 0!==j.ADAPT&&void 0!==j.ADAPT.symbols&&void 0!==j.ADAPT.symbols.stage&&void 0!==j.ADAPT.symbols.stage.clickUrl&&x(j.ADAPT.symbols.stage.clickUrl))return{href:j.ADAPT.symbols.stage.clickUrl,square:1000001}}function w(j){if(void 0!==j.admixAPI&&void 0!==j.admixAPI.ownerBanner&&void 0!==j.admixAPI.ownerBanner.clickUrl&&x(j.admixAPI.ownerBanner.clickUrl))return{href:j.admixAPI.ownerBanner.clickUrl,square:1000001}}function _(Z,e){let u=C(j,Z,e);if(x(u))return{href:u,square:999999}}function x(j){return"string"==typeof j&&j.length>0&&(-1!==j.indexOf("http")||-1!==j.indexOf("//"))}function K(j,Z,e){let u=[];for(let i of Z)try{let Z=i(j,e);Z&&Z.href&&u.push(Z)}catch(j){}return u}function C(j,Z,e){let u=g(Z,e);return u&&0!==u.length?$(Z,u,e):null}function $(j,Z,e,u=[]){let i=e.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(u.length>i)return null;for(let i of Z)try{let Z=j[i];if(!Z)return null;let M=u.concat(i);if("object"==typeof Z){let j=$(Z,Object.getOwnPropertyNames(Z),e,M);if(j)return j}else if("string"==typeof Z&&W(i,e)&&x(Z))return Z}catch(j){}return null}function W(j,Z){let e=a(j),u=Z.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let j of u){if(e===j)return!0}return!1}function a(j){return j.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function g(j,Z){let e=Object.getOwnPropertyNames(j);const u=Z.WINDOW_PROPERTY_NAMES;return e.filter((j=>u.indexOf(j)<0))}}(Z,window,u);if(i.length){let e={posdMessageId:"PANELOS_MESSAGE",posdHash:M(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:Z,to:Z.substring(0,Z.length-2),content:{targetUrlList:i}};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(e)),j.source.postMessage&&j.source.postMessage(e,j.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;o(Z,w,_,e)}}else if("GET_WINDOW_CLICK_TARGET_URL"===e.type){if(window.bisData.clickTargetUrlProcessed)return;o(Z,w,_,e)}}catch(j){}var m}),!1)})();