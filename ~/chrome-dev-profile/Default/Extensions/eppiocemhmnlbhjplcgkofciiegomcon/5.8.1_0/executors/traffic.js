(()=>{function j(j,Z,e,u,i=null){try{let M=document.location.host,o="detector",m={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:o,to:o.substring(0,o.length-2),content:{requestMethod:j,url:Z,type:e,content:u}};M.includes("youtube.com")&&i&&i[0]&&i[0].length&&(m.content.encodedPostBody=i[0]),window.postMessage(m,"*")}catch(j){}}let Z=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],Z.apply(this,arguments)};let e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const Z=Object.assign(arguments,{});let u=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(j){const Z=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!Z&&Z.some((Z=>j.includes(Z)))}(this.responseURL)||j(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,Z),u)return u.apply(this,arguments)},e.apply(this,arguments)};let u=fetch;fetch=function(){const Z=arguments;let e=arguments[0]instanceof Request?arguments[0].url:arguments[0];const i=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof e&&e.href&&(e=e.href),new Promise(((M,o)=>{u.apply(this,Z).then((function(Z){if(Z.body instanceof ReadableStream){const u=Z.json;Z.json=function(){return new Promise(((M,o)=>{u.apply(this,arguments).then((function(u){0!==Z.url.search(/data:application\/json;base64/)&&j(i,e,Z.headers.get("content-type"),JSON.stringify(u)),M(u)})).catch((function(j){o(j)}))}))};const M=Z.text;Z.text=function(){return new Promise(((u,o)=>{M.apply(this,arguments).then((function(M){0!==Z.url.search(/data:application\/json;base64/)&&j(i,e,Z.headers.get("content-type"),M),u(M)})).catch((function(j){o(j)}))}))}}M.apply(this,arguments)})).catch((function(j){o.apply(this,arguments)}))}))}})();