(()=>{const j=null!==(Z=sessionStorage.getItem("bis_data"))?JSON.parse(Z):null;var Z;const e=j?j.config.redditConfig:null,u=j?j.id+"_w":null;if(null!==e){function i(j){const Z=function(j){const Z=function(j){const Z=new RegExp(e.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let u=j.match(Z),i=null;u&&u.length&&(i=u[1]);return i}(j);return{videoId:Z,url:j}}(j);!function(j){try{j.detectionTime=Date.now()/1e3|0;let Z={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:u,to:u.substring(0,u.length-2),content:j};window.postMessage(Z)}catch(j){}}(Z)}function M(j){try{const Z=JSON.parse(j.content);let e=[];for(let j of Z){const Z={};j.source&&j.source.hasOwnProperty("outboundUrl")&&(Z.elementId=j.id,Z.targetUrl=j.source.outboundUrl,e.push(Z))}!function(j){try{let Z={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:u,to:u.substring(0,u.length-2),content:j};window.postMessage(Z)}catch(j){}}(e)}catch(j){}}let o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],o.apply(this,arguments)};let m=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var j=this;let Z=(u=j.url,new RegExp(e.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(u));var u;let o,w=function(j){return new RegExp(e.RIGHT_COLUMN.PATH_WITH_AD_URL).test(j)}(j.url);if(!Z&&!w)return m.apply(this,arguments);const _=function(){if(w&&4===j.readyState){M({url:j.url,content:""===j.responseType||"text"===j.responseType?j.responseText:""})}else w&&4!==j.readyState?o=setTimeout((()=>_.apply(this,arguments)),0):o&&clearTimeout(o)};return _(),i(j.url),m.apply(this,arguments)}}})();