(()=>{const j=function(){let j=sessionStorage.getItem("bis_data");return null!==j?JSON.parse(j):null}(),Z=j?j.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PARSERS:[],e=j?j.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],u=j?`${j.id}_p`:null;const i=function(j,Z){let u=null;for(let i of e){const e=i.NAME,o=i.PATH_NAME;u||(u={}),"detectionTime"!==e?"videoId"===e&&u.videoUrl?u[e]=m(u.videoUrl,Z[o]):u[e]=M(j,Z[o]):u[e]=Date.now()/1e3|0}return u},M=function(j,Z){let e=j;for(let j of Z)if(e[j])e=e[j];else if(!e[j]){e=null;break}return e},o=function(j,Z){return function(){!function(j,Z,e){try{let u={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:e,from:j,to:j.substring(0,j.length-2),content:Z};window.postMessage(u)}catch(j){}}(u,j,Z)}},m=function(j,Z){if(!j)return"";const e=new RegExp(Z);let u=j.match(e);return u&&u[1]?u[1]:""},w=function(j,Z){let e=null;const u=Object.keys(j);for(let M of u){const u=j[M];Z.CHECK_PROPERTIES.every((j=>u[j]))&&(e=i(u,Z.PATHS_GET_PROPERTIES),e&&setTimeout(o(e,"PINTEREST_VIDEO_DATA"),0))}},_={script:function(j){const Z=Array.from(document.querySelectorAll(j.QUERY));if(Z.length)for(let e of Z)try{if(!e.text||e.text&&"{"!==e.text[0])return;e.setAttribute("data-bis-activated","");let Z=JSON.parse(e.text),u={};for(let e of j.PATH_TO_PINS){let j=!1;u=Z;for(let Z of e){const i=e.indexOf(Z);if(!u[Z])break;u=u[Z],i===e.length-1&&(j=!0)}if(j)break}setTimeout((()=>w(u,j)),0)}catch(j){}},XMLHttpRequest:function(j){let Z=XMLHttpRequest.prototype.open,e=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const j=arguments[0].toLowerCase(),Z=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[j]=Z,e.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],Z.apply(this,arguments)};let u=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let Z=this.onreadystatechange;return this.onreadystatechange=function(){const e=new RegExp(j.QUERY);if(4===this.readyState&&e.test(this.responseURL)){let Z=this.response.length&&"{"===this.response[0]?JSON.parse(this.response):this.response,e=[];for(let u of j.PATH_TO_PINS){let j=!1;e=Z;for(let Z of u){const i=u.indexOf(Z);if(!e[Z])break;e=e[Z],i===u.length-1&&(j=!0)}if(j)break}!function(j,Z){let e=null;if(j.length)for(let u of j)Z.CHECK_PROPERTIES.every((j=>u[j]))&&(e=i(u,Z.PATHS_GET_PROPERTIES),e&&setTimeout(o(e,"PINTEREST_VIDEO_DATA"),0))}(e,j)}if(Z)return Z.apply(this,arguments)},u.apply(this,arguments)}}};for(let j of Z){if(!j.USE)continue;if("XMLHttpRequest"===j.TYPE){_[j.TYPE](j);continue}let Z=j?.MAX_REPEATS_ACTIVATE||5,e=setInterval((()=>{Z--,_[j.TYPE](j),Z<=0&&clearInterval(e)}),1e3)}})();